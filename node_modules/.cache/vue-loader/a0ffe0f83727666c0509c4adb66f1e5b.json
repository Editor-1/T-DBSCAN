{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue","mtime":1722213490833},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js","mtime":1720856215506}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnICAvLyDlvJXlhaVMZWFmbGV05bqTCmltcG9ydCAnbGVhZmxldC1tYXJrZXJzLWNhbnZhcycKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXInOwppbXBvcnQgJ2xlYWZsZXQubWFya2VyY2x1c3Rlci9kaXN0L01hcmtlckNsdXN0ZXIuY3NzJzsKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9NYXJrZXJDbHVzdGVyLkRlZmF1bHQuY3NzJzsKaW1wb3J0ICJsZWFmbGV0LWNhbnZhcy1tYXJrZXIiCmltcG9ydCBQYXBhIGZyb20gJ3BhcGFwYXJzZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgRHJhd1BvaSBmcm9tICcuL0RyYXdQb2knCmltcG9ydCBEcmF3TmV3UG9pIGZyb20gJy4vRHJhd05ld1BvaScKaW1wb3J0ICogYXMgUGF0aExheWVyIGZyb20gJy4uL2NvbW0vUGF0aExheWVyJwpjb25zdCBwb2ludGVySW1nID0gcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL2xvY2F0aW9uNjQucG5nJykKY29uc3QgY2x1UG9pbnRJbWcgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWFnZXMvcG9pbnQucG5nJykKaW1wb3J0ICogYXMgRmlsZVNhdmUgZnJvbSAnLi9GaWxlU2F2ZScKaW1wb3J0IHsgZ2V0VXVpZCB9IGZyb20gJy4uL2Jpei9jb21tb24nCmltcG9ydCBJY29uc0RpYWxvZyBmcm9tICcuLi8uLi8uLi90b29sL2J1aWxkL0ljb25zRGlhbG9nLnZ1ZScKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnCi8vIOWumuS5iSBkcmF3UG9pIOWPmOmHjwpsZXQgZHJhd05ld1BvaQpsZXQgZHJhd1BvaQpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBJY29uc0RpYWxvZyB9LAogIG5hbWU6ICdQb2lQYW5lbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGNsdWRhdGE6ICcnLAogICAgICBjbHVkYXRhOltdLAogICAgICAvLyDmlbDmja7mqKHlvI8KICAgICAgcGF0dGVybjoyLAogICAgICAvLyDlh6DkvZXnsbvlnosKICAgICAgZ2VvbWV0cmljVHlwZToyLAogICAgICAvL+iBmuWQiOaWueW8jwogICAgICBjbHVzdGVyU3R5bGVPcHRpb25zOlt7CiAgICAgICAgdmFsdWU6MCwKICAgICAgICBsYWJlbDonQ0xBUkFOUycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MSwKICAgICAgICBsYWJlbDonSy1NZWFucycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MiwKICAgICAgICBsYWJlbDonREJTQ0FOJwogICAgICB9LHsKICAgICAgICB2YWx1ZTozLAogICAgICAgIGxhYmVsOidPUFRJQ1MnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjQsCiAgICAgICAgbGFiZWw6J1QtREJTQ0FOJwogICAgICB9XSwKICAgICAgLy8g6IGa5ZCI5pWw5o2uCiAgICAgIGNsdXN0ZXJEYXRhT3B0aW9uczpbewogICAgICAgIHZhbHVlOjAsCiAgICAgICAgbGFiZWw6J+eBsOm5pCcKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MSwKICAgICAgICBsYWJlbDon5bCP5aSp6bmFJwogICAgICB9LHsKICAgICAgICB2YWx1ZToyLAogICAgICAgIGxhYmVsOifpuJ/nsbsxJwogICAgICB9LHsKICAgICAgICB2YWx1ZTozLAogICAgICAgIGxhYmVsOifpuJ/nsbsyJwogICAgICB9XSwKICAgICAgc2hvd3BvaW50OiAnMCcsCiAgICAgIGRhdGFMaXN0OiBbXSwgLy8g5pWw5o2u5YiX6KGoCiAgICAgIHBhZ2U6ICdsaXN0JywgLy8g5b2T5YmN6aG16Z2i77yIbGlzdCDmiJYgZWRpdO+8iQogICAgICBjdXJyZW50UG9pbnQ6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0aW1lOiAnJwogICAgICB9LCAvLyDlvZPliY3nvJbovpHnmoTngrnkv6Hmga8KICAgICAgZmlsZUxpc3Q6IFtdLCAvLyDkuIrkvKDnmoTmlofku7bliJfooagKICAgICAgcG9pbnRlckltZzogcG9pbnRlckltZywgLy8g5oyH6ZKI5Zu+54mHCiAgICAgIGRyYXdpbmc6IGZhbHNlLCAvLyDmmK/lkKbmraPlnKjnu5jliLYKICAgICAgbmF2ZHJhd2luZzogZmFsc2UsCiAgICAgIGtleVdvcmQ6ICcnLCAvLyDmkJzntKLlhbPplK7lrZcKICAgICAgbmFtZUxpc3Q6W10sCiAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgIGNoaWxkcmVuOiAnY2hpbGRyZW4nLAogICAgICAgIGxhYmVsOiAnbGFiZWwnCiAgICAgIH0sCiAgICAgIHN0YXJ0UGxhY2U6eyAvL+WHuuWPkeeCuQogICAgICAgIG5hbWU6JycsCiAgICAgICAgbG5nOiAnJywKICAgICAgICBsYXQ6ICcnCiAgICAgIH0sCiAgICAgIGVuZFBsYWNlOnsgLy/nu4jngrkKICAgICAgICBuYW1lOicnLAogICAgICAgIGxuZzogJycsCiAgICAgICAgbGF0OiAnJwogICAgICB9LAogICAgICAvL+WvvOiIquagt+W8jwogICAgICBuYXZzdHlsZTogMCwKICAgICAgbmF2T3B0aW9uczpbewogICAgICAgIHZhbHVlOjAsCiAgICAgICAgbGFiZWw6J+acgOW/q+i3r+e6vycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MSwKICAgICAgICBsYWJlbDon5pyA55+t6Lev57q/JwogICAgICB9LHsKICAgICAgICB2YWx1ZToyLAogICAgICAgIGxhYmVsOifpgb/lvIDpq5jpgJ8nCiAgICAgIH0sewogICAgICAgIHZhbHVlOjMsCiAgICAgICAgbGFiZWw6J+atpeihjCcKICAgICAgfV0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDliJ3lp4vljJYgZHJhd1BvaSDlkowgUGF0aExheWVyCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGRyYXdOZXdQb2kgPSBuZXcgRHJhd05ld1BvaSh0aGlzKQogICAgICBkcmF3UG9pID0gbmV3IERyYXdQb2kodGhpcykKICAgICAgUGF0aExheWVyLmluaXQoKQogICAgfSkKICAgIC8vIOWKoOi9veaVsOaNrgogICAgdGhpcy5sb2FkRGF0YSgpCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8g5riF6Zmk57uY5Yi2CiAgICBkcmF3TmV3UG9pLmNsZWFyKCkKICAgIGRyYXdOZXdQb2kuZHJhd0NhbmNlbCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbHVzYXZlKCl7CiAgICAgIHRoaXMubG9hZENTVih0aGlzLnNlbGVjdGNsdWRhdGEpCiAgICAgIC8vIGNvbnN0IGNsdXN0ZXJMYXllciA9IEwubWFya2VyQ2x1c3Rlckdyb3VwKHsKICAgICAgLy8gc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsCiAgICAgIC8vIC8vIHpvb21Ub0JvdW5kc09uQ2xpY2s6IGZhbHNlLAogICAgICAvLyAvLyBzcGlkZXJmeU9uTWF4Wm9vbTogZmFsc2UsCiAgICAgIC8vIC8vIHJlbW92ZU91dHNpZGVWaXNpYmxlQm91bmRzOiBmYWxzZSwKICAgICAgLy8gLy8gc3BpZGVyTGVnUG9seWxpbmVPcHRpb25zOiB7fQogICAgICAvLyAvLyDoh6rlrprkuYnogZrlkIjmoLflvI8KICAgICAgLy8gLy8gaWNvbkNyZWF0ZUZ1bmN0aW9uOiBmdW5jdGlvbiAoY2x1c3RlcikgewogICAgICAvLyAvLyByZXR1cm4gTC5kaXZJY29uKHtodG1sOiAnPGIgY2xhc3M9ImJnLSNbZjQwXSI+JyArIGNsdXN0ZXIuZ2V0Q2hpbGRDb3VudCgpICsgJzwvYj4nfSk7CiAgICAgIC8vIC8vIH0KICAgICAgLy8gfSk7CiAgICAgIC8vIHRoaXMuY2x1ZGF0YS5mb3JFYWNoKGl0ZW0gPT57CiAgICAgIC8vICAgaWYgKGl0ZW0ubGF0ICE9IG51bGwgJiYgaXRlbS5sbmcgIT0gbnVsbCkgewogICAgICAvLyAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW2l0ZW0ubG5nLCBpdGVtLmxhdF0sIHsgIC8vIOWOu+aOieWkmuS9meeahOaWueaLrOWPtwogICAgICAvLyAgICAgICB0aXRsZTogYOeCuSAke2l0ZW0udGltZX1gLAogICAgICAvLyAgICAgICBpY29uOiBMLmljb24oewogICAgICAvLyAgICAgICAgIGljb25Vcmw6IGNsdVBvaW50SW1nLAogICAgICAvLyAgICAgICAgIGljb25TaXplOiBbMTIsIDEyXSwKICAgICAgLy8gICAgICAgICBpY29uQW5jaG9yOiBbMCwgMF0KICAgICAgLy8gICAgICAgfSkKICAgICAgLy8gICAgIH0pOwoKICAgICAgLy8gICAgIG1hcmtlci5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ21hcmtlciA9PT09JywgZXZlbnQubGF0bG5nKTsKICAgICAgLy8gICAgIH0pOwoKICAgICAgLy8gICAgIG1hcmtlci5vbignY2x1c3RlcmNsaWNrJywgZnVuY3Rpb24gKGEpIHsKICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ2NsdXN0ZXIgJyArIGEubGF5ZXIuZ2V0QWxsQ2hpbGRNYXJrZXJzKCkubGVuZ3RoKTsKICAgICAgLy8gICAgIH0pOwoKICAgICAgLy8gICAgIGNsdXN0ZXJMYXllci5hZGRMYXllcihtYXJrZXIpOwogICAgICAvLyAgIH0gZWxzZSB7CiAgICAgIC8vICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgbGF0L2xuZyBmb3IgaXRlbTpgLCBpdGVtKTsKICAgICAgLy8gICB9CiAgICAgIC8vIH0pCiAgICAgIC8vIG1hcC5hZGRMYXllcihjbHVzdGVyTGF5ZXIpOwogICAgICBjb25zdCBsYXllckdyb3VwID0gTC5jYW52YXNJY29uTGF5ZXIoKQogICAgICBsYXllckdyb3VwLmFkZFRvKHRoaXMubWFwKQogICAgICBsZXQgZ2V0TWFya2VyID0gKGl0ZW0pID0+ewogICAgICAgIGxldCBtYXJrZXIgPSBMLm1hcmtlcihpdGVtLmxhdGxuZyx7CiAgICAgICAgICBpY29uOiBMLmljb24oewogICAgICAgICAgICBpY29uVXJsOiBjbHVQb2ludEltZywKICAgICAgICAgICAgaWNvblNpemU6IFsxMiwgMTJdLAogICAgICAgICAgICBpY29uQW5jaG9yOiBbMCwgMF0KICAgICAgICAgIH0pLAogICAgICAgICAgaXRlbTppdGVtCiAgICAgICAgfSkKICAgICAgICByZXR1cm4gbWFya2VyCiAgICAgIH0KICAgICAgdGhpcy5jbHVkYXRhLmZvckVhY2goaXRlbSA9PnsKICAgICAgICBsYXllckdyb3VwLmFkZE1hcmtlcihnZXRNYXJrZXIoaXRlbSkpCiAgICAgIH0pCiAgICAgIG1hcC5hZGRMYXllcihsYXllckdyb3VwKTsKICAgIH0sCiAgICAKICAgIC8vIOivu+WPlmNzduaWh+S7tgogICAgYXN5bmMgbG9hZENTVihkYXRhKSB7ICAKICAgICAgY29uc3QgY3N2VXJsID0gYC4uL3Jlc291cmNlLyR7ZGF0YX0uY3N2YDsgIAogICAgICB0cnkgeyAgCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjc3ZVcmwpOyAgCiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTsgIAogICAgICAgIGNvbnN0IGNzdiA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTsgIAogICAgICAgIGNvbnN0IHJlc3VsdHMgPSBQYXBhLnBhcnNlKGNzdiwgeyBoZWFkZXI6IHRydWUgfSk7IAogICAgICAgIHRoaXMuY2x1ZGF0YSA9IHJlc3VsdHMuZGF0YTsgLy8g5bCG6Kej5p6Q5ZCO55qE5pWw5o2u6LWL5YC857uZZGF0YWxpc3QgIAogICAgICB9IGNhdGNoIChlcnJvcikgeyAgCiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBDU1Y6JywgZXJyb3IpOyAgCiAgICAgICAgLy8g5Y+v5Lul5Zyo6L+Z6YeM5aSE55CG6ZSZ6K+v77yM5q+U5aaC5pi+56S65LiA5Liq6ZSZ6K+v5raI5oGv57uZ55So5oi3ICAKICAgICAgfSAgCiAgICB9LAogICAgLy/moLnmja7lnLDlkI3mn6Xmib7nu4/nuqzluqYKICAgIHNlYXJjaExuZ0J5TmFtZShvcHRpb25zKXsKICAgICAgLy/muZbljZfnnIHnjq/nkIPkv6Hlo6vlhazlj7gKICAgICAgLy/or7fmsYLvvJogaHR0cDovL2FwaS50aWFuZGl0dS5nb3YuY24vZ2VvY29kZXI/ZHM9eyJrZXlXb3JkIjoi5YyX5Lqs5biC5bu25bqG5Yy65bu25bqG6ZWH6I6y6Iqx5rGg5p2R5YmN6KGXNTDlpJXpmLPnuqLlhbvogIHpmaIifSZ0az3mgqjnmoTlr4bpkqUKICAgICAgYXhpb3MuZ2V0KCdodHRwOi8vYXBpLnRpYW5kaXR1Lmdvdi5jbi9nZW9jb2Rlcj9kcz17ImtleVdvcmQiOiInICsgb3B0aW9ucy5uYW1lICsgJyJ9JnRrPTg5ZGVhM2VhYjU2MWYwZGZiOTg2N2U1MzE0MTVlMDE1JykudGhlbihyZXMgPT4gewogICAgICAgIG9wdGlvbnMubG5nPXJlcy5kYXRhLmxvY2F0aW9uLmxvbgogICAgICAgIG9wdGlvbnMubGF0PXJlcy5kYXRhLmxvY2F0aW9uLmxhdAogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHJvdXRlOicsIGVycikKICAgICAgfSkgCiAgICB9LAogICAgLy/ngrnlh7voioLngrkKICAgIGhhbmRsZU5vZGVDbGljayhkYXRhKXsKICAgICAgY29uc29sZS5sb2coJ+iKgueCueaVsOaNricsZGF0YSkKICAgICAgY29uc29sZS5sb2coJ+iKgueCuUlEJyxkYXRhLiR0cmVlTm9kZUlkKQogICAgfSwKICAgIC8v5a+86IiqCiAgICBuYXZpZ2F0aW9uKCl7CiAgICAgIHRoaXMucGFnZT0nbmF2aWdhdGlvbicgLy/ot7PovazliLDlr7zoiKrnlYzpnaIKICAgICAgdGhpcy5uYXZkcmF3aW5nID0gdHJ1ZQogICAgICBkcmF3UG9pLmRyYXcoKQogICAgfSwKICAgIC8v57uY5Yi25a+86Iiq6Lev57q/CiAgICBzZWFyY2hSb3V0ZSgpewogICAgICB0aGlzLnNob3dQYXRoKHRoaXMuc3RhcnRQbGFjZSx0aGlzLmVuZFBsYWNlLHRoaXMubmF2c3R5bGUpCiAgICB9LAogICAgLy/mn6Xor6LlnLDlkI0KICAgIHNlYXJjaEJ5TmFtZShrZXlXb3JkKXsKICAgICAgY29uc3QgbGlzdCA9IFtdCiAgICAgIEZpbGVTYXZlLmdldExpc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc3QgdGVtcCA9IHJlcwogICAgICAgIGlmKHRlbXApewogICAgICAgICAgdGVtcC5mb3JFYWNoKGl0ZW0gPT57CiAgICAgICAgICAgIGlmKGl0ZW0ubmFtZS5pbmNsdWRlcyhrZXlXb3JkKSl7CiAgICAgICAgICAgICAgbGlzdC5wdXNoKGl0ZW0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9KQogICAgICB0aGlzLmRhdGFMaXN0ID0gbGlzdAogICAgfSwKICAgIC8vIOWKoOi9veaVsOaNrgogICAgbG9hZERhdGEoKSB7CiAgICAgIEZpbGVTYXZlLmdldExpc3QoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcykKICAgICAgICBjb25zdCBsaXN0ID0gcmVzCiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgLy8g5aSE55CG5Zu+54mHCiAgICAgICAgICBsaXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgIGlmIChpdGVtLnBob3RvcykgewogICAgICAgICAgICAgIGNvbnN0IGFyciA9IGl0ZW0ucGhvdG9zLnNwbGl0KCcjJykKICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGl0ZW1bJ3Bob3RvMCddID0gYXJyWzBdCiAgICAgICAgICAgICAgICBpdGVtWydwaG90b0FyciddID0gYXJyCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IGxpc3QKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5kYXRhTGlzdCA9IFtdCiAgICAgICAgfQogICAgICAgIGNvbnN0IG5hbWVMaXN0ID0gW10KICAgICAgICBsaXN0LmZvckVhY2goaXRlbSA9PnsKICAgICAgICAgIGlmKGl0ZW0ubmFtZSl7CiAgICAgICAgICAgICAgY29uc3QgW3Byb3ZpbmNlLHBsYWNlXSA9IGl0ZW0ubmFtZS5zcGxpdCgnLScpCiAgICAgICAgICAgICAgY29uc3QgcHJvdmluY2VzID0gbmFtZUxpc3QgLy8g55yB5Lu95bGC57qn5piv5qCR55qE5qC5CiAgICAgICAgICAgICAgY29uc3QgcHJvdmluY2VOb2RlID0gZmluZE9yQ3JlYXRlUGFyZW50KHByb3ZpbmNlcywgcHJvdmluY2UpCiAgICAgICAgICAgICAgY29uc3QgcGxhY2VzID0gcHJvdmluY2VOb2RlLmNoaWxkcmVuCiAgICAgICAgICAgICAgZmluZE9yQ3JlYXRlUGFyZW50KHBsYWNlcywgcGxhY2UpIC8vIOWfjuW4guS9nOS4uuecgeS7veeahOWtkOiKgueCuQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgIHRoaXMubmFtZUxpc3Q9bmFtZUxpc3QKICAgICAgfSkKICAgIH0sCiAgICAvLyDogZrlkIjliIbmnpAKICAgIGNsdXN0ZXJBbmFseXNpcygpewogICAgICB0aGlzLnBhZ2UgPSAnY2x1c3RlcicKICAgICAgZHJhd05ld1BvaS5jbGVhcigpCiAgICAgIGRyYXdQb2kuY2xlYXIoKQogICAgICBQYXRoTGF5ZXIuY2xlYXIoKQogICAgfSwKICAgIC8vIOW8gOWni+e7mOWItgogICAgc3RhcnREcmF3KCkgewogICAgICB0aGlzLmRyYXdpbmcgPSB0cnVlCiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXQogICAgICBkcmF3TmV3UG9pLmRyYXcoKQogICAgfSwKICAgIC8vIOWPlua2iOe7mOWItgogICAgY2FuY2VsRHJhdygpIHsKICAgICAgZHJhd05ld1BvaS5kcmF3Q2FuY2VsKCkKICAgICAgdGhpcy5kcmF3aW5nID0gZmFsc2UKICAgIH0sCiAgICAvLyDov5Tlm57liJfooajpobXpnaIKICAgIGJhY2tUb0xpc3QoKSB7CiAgICAgIHRoaXMucGFnZSA9ICdsaXN0JwogICAgICBkcmF3TmV3UG9pLmNsZWFyKCkKICAgICAgZHJhd1BvaS5jbGVhcigpCiAgICAgIFBhdGhMYXllci5jbGVhcigpCiAgICAgIHRoaXMubmF2ZHJhd2luZyA9IGZhbHNlCiAgICAgIGlmKHRoaXMuc3RhcnRQbGFjZSE9JycpewogICAgICAgIHRoaXMuc3RhcnRQbGFjZS5uYW1lPScnCiAgICAgICAgdGhpcy5zdGFydFBsYWNlLmxuZz0nJwogICAgICAgIHRoaXMuc3RhcnRQbGFjZS5sYXQ9JycKICAgICAgICB0aGlzLmVuZFBsYWNlLm5hbWU9JycKICAgICAgICB0aGlzLmVuZFBsYWNlLmxuZz0nJwogICAgICAgIHRoaXMuZW5kUGxhY2UubGF0PScnCgogICAgICB9CiAgICAgIHRoaXMuJHJlZnMucG9pRm9ybS5yZXNldEZpZWxkcygpCiAgICB9LAogICAgLy8g5L+d5a2Y5pWw5o2uCiAgICBzYXZlKCkgewogICAgICB0aGlzLiRyZWZzLnBvaUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIHJldHVybgogICAgICAgIH0KICAgICAgICBjb25zdCBjdXJyZW50UG9pbnQgPSB0aGlzLmN1cnJlbnRQb2ludAoKICAgICAgICBjb25zdCBwYXJhbSA9IHsKICAgICAgICAgIG5hbWU6IGN1cnJlbnRQb2ludC5uYW1lLAogICAgICAgICAgdGltZTogY3VycmVudFBvaW50LnRpbWUsCiAgICAgICAgICBsb25naXR1ZGU6IGN1cnJlbnRQb2ludC5sbmcsCiAgICAgICAgICBsYXRpdHVkZTogY3VycmVudFBvaW50LmxhdCwKICAgICAgICAgIGFsdGl0dWRlOiBjdXJyZW50UG9pbnQuYWx0aXR1ZGUgfHwgMCwKICAgICAgICAgIHBob3RvczogJycsCiAgICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICAgIGRlc2M6IGN1cnJlbnRQb2ludC5kZXNjIHx8ICcnCiAgICAgICAgfQogICAgICAgIGNvbnN0IHBob3RvcyA9IFtdCiAgICAgICAgaWYgKHRoaXMuZmlsZUxpc3QubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5maWxlTGlzdC5mb3JFYWNoKGYgPT4gewogICAgICAgICAgICBwaG90b3MucHVzaChmLm5hbWUpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICBpZiAocGhvdG9zLmxlbmd0aCA+IDApIHsKICAgICAgICAgIHBhcmFtLnBob3RvcyA9IHBob3Rvcy5qb2luKCcjJykKICAgICAgICB9CgogICAgICAgIGlmIChjdXJyZW50UG9pbnQuaWQpIHsKICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmRhdGFMaXN0LmZpbmQoZCA9PiBkLmlkID09PSBjdXJyZW50UG9pbnQuaWQpCiAgICAgICAgICBpZiAoaXRlbSkgewogICAgICAgICAgICBpdGVtLm5hbWUgPSBjdXJyZW50UG9pbnQubmFtZSB8fCAnJwogICAgICAgICAgICBpdGVtLnRpbWUgPSBjdXJyZW50UG9pbnQudGltZSB8fCAnJwogICAgICAgICAgICBpdGVtLmxvbmdpdHVkZSA9IGN1cnJlbnRQb2ludC5sbmcKICAgICAgICAgICAgaXRlbS5sYXRpdHVkZSA9IGN1cnJlbnRQb2ludC5sYXQKICAgICAgICAgICAgaXRlbS5hbHRpdHVkZSA9IGN1cnJlbnRQb2ludC5hbHRpdHVkZSB8fCAwCiAgICAgICAgICAgIGl0ZW0ucGhvdG9zID0gcGFyYW0ucGhvdG9zCiAgICAgICAgICAgIGl0ZW0uYWRkcmVzcyA9IHBhcmFtLmFkZHJlc3MKICAgICAgICAgICAgaXRlbS5kZXNjID0gY3VycmVudFBvaW50LmRlc2MgfHwgJycKICAgICAgICAgICAgRmlsZVNhdmUuY3JlYXRlKHRoaXMuZGF0YUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlU3VjY2VzcygpCiAgICAgICAgICAgICAgdGhpcy5iYWNrVG9MaXN0KCkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgcGFyYW1bJ2lkJ10gPSBnZXRVdWlkKCkKICAgICAgICAgIHRoaXMuZGF0YUxpc3QucHVzaChwYXJhbSkKICAgICAgICAgIEZpbGVTYXZlLmNyZWF0ZSh0aGlzLmRhdGFMaXN0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICAgICAgdGhpcy5iYWNrVG9MaXN0KCkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMubG9hZERhdGEoKQogICAgICB9KQogICAgfSwKICAgIC8vIOmjnuWIsOaMh+WumueCuQogICAgZmx5VG8oaXRlbSkgewogICAgICBkcmF3TmV3UG9pLmZseVRvKGl0ZW0pCiAgICB9LAogICAgLy8g57yW6L6R5oyH5a6a54K5CiAgICBlZGl0KGl0ZW0pIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgIGNvbnN0IHBob3RvcyA9IGl0ZW0ucGhvdG9zCiAgICAgIGlmIChwaG90b3MpIHsKICAgICAgICBjb25zdCBhcnIgPSBwaG90b3Muc3BsaXQoJyMnKQogICAgICAgIGFyci5mb3JFYWNoKHVybCA9PiB7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0LnB1c2goewogICAgICAgICAgICBzdGF0dXM6ICdkb25lJywKICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgIG5hbWU6IHVybCwKICAgICAgICAgICAgdWlkOiBnZXRVdWlkKCkKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgfQogICAgICBkcmF3TmV3UG9pLmVkaXQoaXRlbSkKICAgIH0sCiAgICAvLyDliKDpmaTmjIflrprngrkKICAgIGRlbGV0ZUNsaWNrKGl0ZW0pIHsKICAgICAgY29uc3QgaWR4ID0gdGhpcy5kYXRhTGlzdC5maW5kSW5kZXgoZCA9PiBkLmlkID09PSBpdGVtLmlkKQogICAgICB0aGlzLmRhdGFMaXN0LnNwbGljZShpZHgsIDEpCiAgICAgIEZpbGVTYXZlLmNyZWF0ZSh0aGlzLmRhdGFMaXN0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZVN1Y2Nlc3MoKQogICAgICAgIHRoaXMubG9hZERhdGEoKQogICAgICAgIGRyYXdOZXdQb2kuY2xlYXJCeUlkKGl0ZW0uaWQpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5paH5Lu25YiX6KGo5Y+Y5YyWCiAgICBsaXN0Q2hhbmdlKGxpc3QpIHsKICAgICAgdGhpcy5maWxlTGlzdCA9IGxpc3QKICAgIH0sCiAgICAvLyDnu4/nuqzluqblj5jljJYKICAgIGxhdExuZ0NoYW5nZSh2KSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRQb2ludC5sYXQgJiYgdGhpcy5jdXJyZW50UG9pbnQubG5nKSB7CiAgICAgICAgZHJhd05ld1BvaS5zZXRMYXRMbmcodGhpcy5jdXJyZW50UG9pbnQubGF0LCB0aGlzLmN1cnJlbnRQb2ludC5sbmcpCiAgICAgIH0KICAgIH0sCiAgICAvLyDmmL7npLrot6/lvoQKICAgIHNob3dQYXRoKHN0YXJ0LGVuZCxzdHlsZSkgewogICAgICBQYXRoTGF5ZXIucGF0aChzdGFydCxlbmQsc3R5bGUpCiAgICB9CiAgfQp9Ci8vIOi+heWKqeWHveaVsO+8muWcqOagkeS4reafpeaJvuaIlua3u+WKoOeItuiKgueCuQpmdW5jdGlvbiBmaW5kT3JDcmVhdGVQYXJlbnQocGFyZW50cywgcGFyZW50TmFtZSkgewogIGxldCBwYXJlbnQgPSBwYXJlbnRzLmZpbmQocCA9PiBwLmxhYmVsID09PSBwYXJlbnROYW1lKTsKICBpZiAoIXBhcmVudCkgewogICAgcGFyZW50ID0geyBsYWJlbDogcGFyZW50TmFtZSwgY2hpbGRyZW46IFtdIH07CiAgICBwYXJlbnRzLnB1c2gocGFyZW50KTsKICB9CiAgcmV0dXJuIHBhcmVudDsKfQoK"},{"version":3,"sources":["PoiPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PoiPanel.vue","sourceRoot":"src/views/AMyWork/tools/poi","sourcesContent":["<template>\n  <div style=\"overflow: auto;width: 260px;background: white;\">\n    <!-- 列表页面 -->\n    <div v-show=\"page == 'list'\" class=\"poiPage\" style=\"margin-top: 10px;\">\n      <section style=\"margin: 0 20px;color:black;\">\n        <!-- 全选按钮和标绘按钮 -->\n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\" icon=\"el-icon-map-location\">\n              <i class=\"iconfont icon-jia-line\" /> 新增地点\n            </el-button>\n            <el-button v-if=\"drawing\" type=\"link\" @click=\"cancelDraw\">\n              取消\n            </el-button>\n          </div>\n        </div>\n        \n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button type=\"link\" @click=\"clusterAnalysis\" icon=\"el-icon-wind-power\">聚合分析</el-button>\n          </div>\n        </div>\n        <!-- 搜索框 -->\n        <div style=\"clear: right;\">\n          <el-input\n            v-model=\"keyWord\"\n            placeholder=\"请输入你要查找的地名\"\n            style=\"width:220px;margin-top: 10px;\"\n            allow-clear\n            enter-button\n            @pressEnter=\"loadData\"\n            @search=\"loadData\"\n          />\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchByName(keyWord)\">搜索</el-button>\n          <el-button type=\"primary\" icon=\"el-icon-position\" @click=\"navigation()\">\n            导航\n          </el-button>\n        </div>\n      <!-- 没有数据时候的展示 -->\n      </section>\n        <section style=\"margin: 20px;color:black;\">\n        <!-- 无数据时的占位符 -->\n        <el-empty v-show=\"dataList.length<1\" style=\"color: #606266;margin-top: 20px;padding-top: 120px;height:calc(100vh - 100px)\">\n          <span slot=\"description\"> 无数据 </span>\n          <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\">\n            <i class=\"iconfont icon-jia-line\" /> 标绘\n          </el-button>\n          <el-button v-if=\"drawing\" type=\"primary\" @click=\"cancelDraw\">\n            取消\n          </el-button>\n        </el-empty>\n        <!-- 数据列表 -->\n        <div v-show=\"dataList.length > 0\" item-layout=\"horizontal\" :data-source=\"dataList\" :style=\"{ height: 'calc(100vh - 240px)',overflow: 'auto' }\">\n          <!-- 分组 -->\n          <el-tree :data=\"nameList\" :props=\"defaultProps\" @node-click=\"handleNodeClick\"></el-tree>\n          <!--  -->\n          <div v-for=\"item in dataList\" :key=\"item.id\">\n            <div style=\"line-height: 36px;border-bottom: 1px solid #d3e1f5;\" @dblclick=\"edit(item)\"> \n              <div style=\"display: inline-block;\">{{ item.name }}</div>\n              <div style=\"float: right;\">\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link\" ghost @click=\"edit(item)\">编辑</el-button>\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link hover-red\" ghost @click=\"deleteClick(item)\">删除</el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n    <!-- 编辑页面 -->\n    <div v-show=\"page == 'edit'\">\n      <div style=\"padding: 20px;max-height: calc(100vh - 130px);overflow: auto;\">\n        <el-form ref=\"poiForm\" :model=\"currentPoint\" size=\"small\">\n          <el-form-item prop=\"name\" label=\"名称\">\n            <el-input v-model=\"currentPoint.name\" allow-clear />\n          </el-form-item>\n          <el-form-item prop=\"name\" label=\"时间\">\n            <el-input v-model=\"currentPoint.time\" allow-clear />\n          </el-form-item>\n          <el-form-item label=\"x\">\n            <el-input v-model=\"currentPoint.lng\" :min=\"-180\" :max=\"180\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"y\">\n            <el-input v-model=\"currentPoint.lat\" :min=\"-90\" :max=\"90\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"描述\" style=\"margin-bottom: 0;\">\n            <el-input v-model=\"currentPoint.desc\" type=\"textarea\" />\n          </el-form-item>\n          <el-form-item label=\"图片\" style=\"margin-top: 10px;\">\n            <image-upload :fileList=\"fileList\" type=\"poi\" @listChange=\"listChange\" />\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"save\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 导航页面  -->\n    <div v-show=\"page == 'navigation'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        <el-form size=\"small\" >\n          <el-form-item prop=\"startPlace\" label=\"输入起点\">\n            <el-input v-model=\"startPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(startPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLng\" label=\"起点经度\">\n            <el-input v-model=\"startPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLat\" label=\"起点维度\">\n            <el-input v-model=\"startPlace.lat\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlace\" label=\"输入终点\">\n            <el-input v-model=\"endPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(endPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLng\" label=\"终点经度\">\n            <el-input v-model=\"endPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLat\" label=\"终点维度\">\n            <el-input v-model=\"endPlace.lat\"/>\n          </el-form-item>\n          <el-form-item  label=\"请选择导航路线类型\">\n            <el-select v-model=\"navstyle\" clearable placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in navOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"searchRoute()\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 聚合分析页面 -->\n    <div v-show=\"page =='cluster'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        <el-form size=\"small\">\n          <el-form-item label=\"聚合方法\">\n            <el-select v-model=\"clusterStyleOptions.label\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in clusterStyleOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item> \n          <el-form-item label=\"聚合数据\">\n            <el-select v-model=\"selectcludata\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in clusterDataOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.label\">\n              </el-option>\n            </el-select>\n          </el-form-item> \n          <el-form-item label=\"模式\">\n            <el-radio-group v-model=\"pattern\">\n              <el-radio :label=\"1\">简化</el-radio>\n              <el-radio :label=\"2\">初始</el-radio>\n              <el-radio :label=\"3\">聚合</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"几何类型\">\n            <el-radio-group v-model=\"geometricType\">\n              <el-radio :label=\"1\">线</el-radio>\n              <el-radio :label=\"2\">点</el-radio>\n              <el-radio :label=\"3\">点+线</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"clusave\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet'  // 引入Leaflet库\nimport 'leaflet-markers-canvas'\nimport 'leaflet.markercluster/dist/leaflet.markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport \"leaflet-canvas-marker\"\nimport Papa from 'papaparse'\nimport axios from 'axios'\nimport DrawPoi from './DrawPoi'\nimport DrawNewPoi from './DrawNewPoi'\nimport * as PathLayer from '../comm/PathLayer'\nconst pointerImg = require('@/assets/images/location64.png')\nconst cluPointImg = require('@/assets/images/point.png')\nimport * as FileSave from './FileSave'\nimport { getUuid } from '../biz/common'\nimport IconsDialog from '../../../tool/build/IconsDialog.vue'\nimport 'leaflet/dist/leaflet.css'\n// 定义 drawPoi 变量\nlet drawNewPoi\nlet drawPoi\nexport default {\n  components: { IconsDialog },\n  name: 'PoiPanel',\n  data() {\n    return {\n      selectcludata: '',\n      cludata:[],\n      // 数据模式\n      pattern:2,\n      // 几何类型\n      geometricType:2,\n      //聚合方式\n      clusterStyleOptions:[{\n        value:0,\n        label:'CLARANS'\n      },{\n        value:1,\n        label:'K-Means'\n      },{\n        value:2,\n        label:'DBSCAN'\n      },{\n        value:3,\n        label:'OPTICS'\n      },{\n        value:4,\n        label:'T-DBSCAN'\n      }],\n      // 聚合数据\n      clusterDataOptions:[{\n        value:0,\n        label:'灰鹤'\n      },{\n        value:1,\n        label:'小天鹅'\n      },{\n        value:2,\n        label:'鸟类1'\n      },{\n        value:3,\n        label:'鸟类2'\n      }],\n      showpoint: '0',\n      dataList: [], // 数据列表\n      page: 'list', // 当前页面（list 或 edit）\n      currentPoint: {\n        name: '',\n        time: ''\n      }, // 当前编辑的点信息\n      fileList: [], // 上传的文件列表\n      pointerImg: pointerImg, // 指针图片\n      drawing: false, // 是否正在绘制\n      navdrawing: false,\n      keyWord: '', // 搜索关键字\n      nameList:[],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      startPlace:{ //出发点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      endPlace:{ //终点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      //导航样式\n      navstyle: 0,\n      navOptions:[{\n        value:0,\n        label:'最快路线'\n      },{\n        value:1,\n        label:'最短路线'\n      },{\n        value:2,\n        label:'避开高速'\n      },{\n        value:3,\n        label:'步行'\n      }]\n    }\n  },\n  mounted() {\n    // 初始化 drawPoi 和 PathLayer\n    this.$nextTick(() => {\n      drawNewPoi = new DrawNewPoi(this)\n      drawPoi = new DrawPoi(this)\n      PathLayer.init()\n    })\n    // 加载数据\n    this.loadData()\n  },\n  beforeDestroy() {\n    // 清除绘制\n    drawNewPoi.clear()\n    drawNewPoi.drawCancel()\n  },\n  methods: {\n    clusave(){\n      this.loadCSV(this.selectcludata)\n      // const clusterLayer = L.markerClusterGroup({\n      // showCoverageOnHover: false,\n      // // zoomToBoundsOnClick: false,\n      // // spiderfyOnMaxZoom: false,\n      // // removeOutsideVisibleBounds: false,\n      // // spiderLegPolylineOptions: {}\n      // // 自定义聚合样式\n      // // iconCreateFunction: function (cluster) {\n      // // return L.divIcon({html: '<b class=\"bg-#[f40]\">' + cluster.getChildCount() + '</b>'});\n      // // }\n      // });\n      // this.cludata.forEach(item =>{\n      //   if (item.lat != null && item.lng != null) {\n      //     const marker = L.marker([item.lng, item.lat], {  // 去掉多余的方括号\n      //       title: `点 ${item.time}`,\n      //       icon: L.icon({\n      //         iconUrl: cluPointImg,\n      //         iconSize: [12, 12],\n      //         iconAnchor: [0, 0]\n      //       })\n      //     });\n\n      //     marker.on('click', function (event) {\n      //       console.log('marker ====', event.latlng);\n      //     });\n\n      //     marker.on('clusterclick', function (a) {\n      //       console.log('cluster ' + a.layer.getAllChildMarkers().length);\n      //     });\n\n      //     clusterLayer.addLayer(marker);\n      //   } else {\n      //     console.warn(`Invalid lat/lng for item:`, item);\n      //   }\n      // })\n      // map.addLayer(clusterLayer);\n      const layerGroup = L.canvasIconLayer()\n      layerGroup.addTo(this.map)\n      let getMarker = (item) =>{\n        let marker = L.marker(item.latlng,{\n          icon: L.icon({\n            iconUrl: cluPointImg,\n            iconSize: [12, 12],\n            iconAnchor: [0, 0]\n          }),\n          item:item\n        })\n        return marker\n      }\n      this.cludata.forEach(item =>{\n        layerGroup.addMarker(getMarker(item))\n      })\n      map.addLayer(layerGroup);\n    },\n    \n    // 读取csv文件\n    async loadCSV(data) {  \n      const csvUrl = `../resource/${data}.csv`;  \n      try {  \n        const response = await fetch(csvUrl);  \n        if (!response.ok) throw new Error('Network response was not ok');  \n        const csv = await response.text();  \n        const results = Papa.parse(csv, { header: true }); \n        this.cludata = results.data; // 将解析后的数据赋值给datalist  \n      } catch (error) {  \n        console.error('Error loading CSV:', error);  \n        // 可以在这里处理错误，比如显示一个错误消息给用户  \n      }  \n    },\n    //根据地名查找经纬度\n    searchLngByName(options){\n      //湖南省环球信士公司\n      //请求： http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"北京市延庆区延庆镇莲花池村前街50夕阳红养老院\"}&tk=您的密钥\n      axios.get('http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"' + options.name + '\"}&tk=89dea3eab561f0dfb9867e531415e015').then(res => {\n        options.lng=res.data.location.lon\n        options.lat=res.data.location.lat\n      }).catch(err => {\n        console.error('Error fetching route:', err)\n      }) \n    },\n    //点击节点\n    handleNodeClick(data){\n      console.log('节点数据',data)\n      console.log('节点ID',data.$treeNodeId)\n    },\n    //导航\n    navigation(){\n      this.page='navigation' //跳转到导航界面\n      this.navdrawing = true\n      drawPoi.draw()\n    },\n    //绘制导航路线\n    searchRoute(){\n      this.showPath(this.startPlace,this.endPlace,this.navstyle)\n    },\n    //查询地名\n    searchByName(keyWord){\n      const list = []\n      FileSave.getList().then(res => {\n        const temp = res\n        if(temp){\n          temp.forEach(item =>{\n            if(item.name.includes(keyWord)){\n              list.push(item)\n            }\n          })\n        }\n      })\n      this.dataList = list\n    },\n    // 加载数据\n    loadData() {\n      FileSave.getList().then(res => {\n        console.log('res', res)\n        const list = res\n        if (res) {\n          // 处理图片\n          list.forEach(item => {\n            if (item.photos) {\n              const arr = item.photos.split('#')\n              if (arr.length > 0) {\n                item['photo0'] = arr[0]\n                item['photoArr'] = arr\n              }\n            }\n          })\n          this.dataList = list\n        } else {\n          this.dataList = []\n        }\n        const nameList = []\n        list.forEach(item =>{\n          if(item.name){\n              const [province,place] = item.name.split('-')\n              const provinces = nameList // 省份层级是树的根\n              const provinceNode = findOrCreateParent(provinces, province)\n              const places = provinceNode.children\n              findOrCreateParent(places, place) // 城市作为省份的子节点\n            }\n          }\n        )\n        this.nameList=nameList\n      })\n    },\n    // 聚合分析\n    clusterAnalysis(){\n      this.page = 'cluster'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n    },\n    // 开始绘制\n    startDraw() {\n      this.drawing = true\n      this.fileList = []\n      drawNewPoi.draw()\n    },\n    // 取消绘制\n    cancelDraw() {\n      drawNewPoi.drawCancel()\n      this.drawing = false\n    },\n    // 返回列表页面\n    backToList() {\n      this.page = 'list'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n      this.navdrawing = false\n      if(this.startPlace!=''){\n        this.startPlace.name=''\n        this.startPlace.lng=''\n        this.startPlace.lat=''\n        this.endPlace.name=''\n        this.endPlace.lng=''\n        this.endPlace.lat=''\n\n      }\n      this.$refs.poiForm.resetFields()\n    },\n    // 保存数据\n    save() {\n      this.$refs.poiForm.validate(valid => {\n        if (!valid) {\n          return\n        }\n        const currentPoint = this.currentPoint\n\n        const param = {\n          name: currentPoint.name,\n          time: currentPoint.time,\n          longitude: currentPoint.lng,\n          latitude: currentPoint.lat,\n          altitude: currentPoint.altitude || 0,\n          photos: '',\n          address: '',\n          desc: currentPoint.desc || ''\n        }\n        const photos = []\n        if (this.fileList.length > 0) {\n          this.fileList.forEach(f => {\n            photos.push(f.name)\n          })\n        }\n        if (photos.length > 0) {\n          param.photos = photos.join('#')\n        }\n\n        if (currentPoint.id) {\n          const item = this.dataList.find(d => d.id === currentPoint.id)\n          if (item) {\n            item.name = currentPoint.name || ''\n            item.time = currentPoint.time || ''\n            item.longitude = currentPoint.lng\n            item.latitude = currentPoint.lat\n            item.altitude = currentPoint.altitude || 0\n            item.photos = param.photos\n            item.address = param.address\n            item.desc = currentPoint.desc || ''\n            FileSave.create(this.dataList).then(res => {\n              this.$messageSuccess()\n              this.backToList()\n            })\n          }\n        } else {\n          param['id'] = getUuid()\n          this.dataList.push(param)\n          FileSave.create(this.dataList).then(res => {\n            this.$messageSuccess()\n            this.backToList()\n          })\n        }\n        this.loadData()\n      })\n    },\n    // 飞到指定点\n    flyTo(item) {\n      drawNewPoi.flyTo(item)\n    },\n    // 编辑指定点\n    edit(item) {\n      this.fileList = []\n      const photos = item.photos\n      if (photos) {\n        const arr = photos.split('#')\n        arr.forEach(url => {\n          this.fileList.push({\n            status: 'done',\n            url: url,\n            name: url,\n            uid: getUuid()\n          })\n        })\n      }\n      drawNewPoi.edit(item)\n    },\n    // 删除指定点\n    deleteClick(item) {\n      const idx = this.dataList.findIndex(d => d.id === item.id)\n      this.dataList.splice(idx, 1)\n      FileSave.create(this.dataList).then(res => {\n        this.$messageSuccess()\n        this.loadData()\n        drawNewPoi.clearById(item.id)\n      })\n    },\n    // 文件列表变化\n    listChange(list) {\n      this.fileList = list\n    },\n    // 经纬度变化\n    latLngChange(v) {\n      if (this.currentPoint.lat && this.currentPoint.lng) {\n        drawNewPoi.setLatLng(this.currentPoint.lat, this.currentPoint.lng)\n      }\n    },\n    // 显示路径\n    showPath(start,end,style) {\n      PathLayer.path(start,end,style)\n    }\n  }\n}\n// 辅助函数：在树中查找或添加父节点\nfunction findOrCreateParent(parents, parentName) {\n  let parent = parents.find(p => p.label === parentName);\n  if (!parent) {\n    parent = { label: parentName, children: [] };\n    parents.push(parent);\n  }\n  return parent;\n}\n\n</script>\n\n<style scoped>\n.poiImg {\n  width: 40px;\n  height: 40px;\n  border-radius: 5px;\n}\n</style>\n"]}]}