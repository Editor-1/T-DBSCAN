{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue","mtime":1722303089682},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js","mtime":1720856215506}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnICAvLyDlvJXlhaVMZWFmbGV05bqTCmltcG9ydCAnbGVhZmxldC1tYXJrZXJzLWNhbnZhcycKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXInOwppbXBvcnQgJ2xlYWZsZXQubWFya2VyY2x1c3Rlci9kaXN0L01hcmtlckNsdXN0ZXIuY3NzJzsKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9NYXJrZXJDbHVzdGVyLkRlZmF1bHQuY3NzJzsKaW1wb3J0ICJsZWFmbGV0LWNhbnZhcy1tYXJrZXIiCmltcG9ydCBQYXBhIGZyb20gJ3BhcGFwYXJzZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgRHJhd1BvaSBmcm9tICcuL0RyYXdQb2knCmltcG9ydCBEcmF3TmV3UG9pIGZyb20gJy4vRHJhd05ld1BvaScKaW1wb3J0ICogYXMgRmlsZVNhdmUgZnJvbSAnLi9GaWxlU2F2ZScKaW1wb3J0IHsgZ2V0VXVpZCB9IGZyb20gJy4uL2Jpei9jb21tb24nCmltcG9ydCBJY29uc0RpYWxvZyBmcm9tICcuLi8uLi8uLi90b29sL2J1aWxkL0ljb25zRGlhbG9nLnZ1ZScKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnCmltcG9ydCB7IGRvdWdsYXNQZXVja2VyIH0gZnJvbSAnLi9Eb3VnbGFzUGV1a2VyJwppbXBvcnQgeyBrTWVhbnMgfSBmcm9tICcuLi9hbGdvL2ttZWFucycgCmltcG9ydCB7IGNsYXJhbnMgfSBmcm9tICcuLi9hbGdvL2NsYXJhbnMnIAppbXBvcnQgeyBkYnNjYW4gfSBmcm9tICcuLi9hbGdvL2Ric2NhbicgCmltcG9ydCB7IG9wdGljcyB9IGZyb20gJy4uL2FsZ28vb3B0aWNzJyAKaW1wb3J0IHsgdGRic2Nhbixjb252ZXJ0RGF0ZVN0cmluZ1RvVW5peCB9IGZyb20gJy4uL2FsZ28vdGRic2NhbicgCmltcG9ydCAqIGFzIFBhdGhMYXllciBmcm9tICcuLi9jb21tL1BhdGhMYXllcicKY29uc3QgcG9pbnRlckltZyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9sb2NhdGlvbjY0LnBuZycpCmNvbnN0IGNsdVBvaW50SW1nID0gcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL3BvaW50LnBuZycpCmNvbnN0IGFycm93SW1nID0gcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL3BvaW50LnBuZycpCi8vIOWumuS5iSBkcmF3UG9pIOWPmOmHjwpsZXQgZHJhd05ld1BvaQpsZXQgZHJhd1BvaQpsZXQgcHJldmlvdXNMYXllcnMgPSBbXQpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBJY29uc0RpYWxvZyB9LAogIG5hbWU6ICdQb2lQYW5lbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGNsdWRhdGE6ICcnLAogICAgICAvL+eBsOm5pAogICAgICBncmV5Q3JhbmU6W10sCiAgICAgIC8v5bCP5aSp6bmFCiAgICAgIGN5Z25lOltdLAogICAgICAvLyDpuJ/nsbsxCiAgICAgIGJpcmRPbmU6W10sCiAgICAgIC8vIOm4n+exuzIKICAgICAgYmlyZFR3bzpbXSwKICAgICAgLy8g5pWw5o2u5qih5byPCiAgICAgIHBhdHRlcm46MiwKICAgICAgLy8g5Yeg5L2V57G75Z6LCiAgICAgIGdlb21ldHJpY1R5cGU6MSwKICAgICAgLy8g6IGa5ZCI566X5rOVCiAgICAgIGNsdXN0ZXJTdHlsZTonJywKICAgICAgLy/ogZrlkIjmlrnlvI8KICAgICAgY2x1c3RlclN0eWxlT3B0aW9uczpbewogICAgICAgIHZhbHVlOjEsCiAgICAgICAgbGFiZWw6J0NMQVJBTlMnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjIsCiAgICAgICAgbGFiZWw6J0stTWVhbnMnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjMsCiAgICAgICAgbGFiZWw6J0RCU0NBTicKICAgICAgfSx7CiAgICAgICAgdmFsdWU6NCwKICAgICAgICBsYWJlbDonT1BUSUNTJwogICAgICB9LHsKICAgICAgICB2YWx1ZTo1LAogICAgICAgIGxhYmVsOidULURCU0NBTicKICAgICAgfV0sCiAgICAgIC8vIOiBmuWQiOaVsOaNrgogICAgICBjbHVzdGVyRGF0YU9wdGlvbnM6W3sKICAgICAgICB2YWx1ZTowLAogICAgICAgIGxhYmVsOifngbDpuaQnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjEsCiAgICAgICAgbGFiZWw6J+Wwj+Wkqem5hScKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MiwKICAgICAgICBsYWJlbDon6bif57G7MScKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MywKICAgICAgICBsYWJlbDon6bif57G7MicKICAgICAgfV0sCiAgICAgIHNob3dwb2ludDogJzAnLAogICAgICBkYXRhTGlzdDogW10sIC8vIOaVsOaNruWIl+ihqAogICAgICBwYWdlOiAnbGlzdCcsIC8vIOW9k+WJjemhtemdou+8iGxpc3Qg5oiWIGVkaXTvvIkKICAgICAgY3VycmVudFBvaW50OiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdGltZTogJycKICAgICAgfSwgLy8g5b2T5YmN57yW6L6R55qE54K55L+h5oGvCiAgICAgIGZpbGVMaXN0OiBbXSwgLy8g5LiK5Lyg55qE5paH5Lu25YiX6KGoCiAgICAgIHBvaW50ZXJJbWc6IHBvaW50ZXJJbWcsIC8vIOaMh+mSiOWbvueJhwogICAgICBkcmF3aW5nOiBmYWxzZSwgLy8g5piv5ZCm5q2j5Zyo57uY5Yi2CiAgICAgIG5hdmRyYXdpbmc6IGZhbHNlLAogICAgICBrZXlXb3JkOiAnJywgLy8g5pCc57Si5YWz6ZSu5a2XCiAgICAgIG5hbWVMaXN0OltdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ2xhYmVsJwogICAgICB9LAogICAgICBzdGFydFBsYWNlOnsgLy/lh7rlj5HngrkKICAgICAgICBuYW1lOicnLAogICAgICAgIGxuZzogJycsCiAgICAgICAgbGF0OiAnJwogICAgICB9LAogICAgICBlbmRQbGFjZTp7IC8v57uI54K5CiAgICAgICAgbmFtZTonJywKICAgICAgICBsbmc6ICcnLAogICAgICAgIGxhdDogJycKICAgICAgfSwKICAgICAgLy/lr7zoiKrmoLflvI8KICAgICAgbmF2c3R5bGU6IDAsCiAgICAgIG5hdk9wdGlvbnM6W3sKICAgICAgICB2YWx1ZTowLAogICAgICAgIGxhYmVsOifmnIDlv6vot6/nur8nCiAgICAgIH0sewogICAgICAgIHZhbHVlOjEsCiAgICAgICAgbGFiZWw6J+acgOefrei3r+e6vycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MiwKICAgICAgICBsYWJlbDon6YG/5byA6auY6YCfJwogICAgICB9LHsKICAgICAgICB2YWx1ZTozLAogICAgICAgIGxhYmVsOifmraXooYwnCiAgICAgIH1dCiAgICB9CiAgfSwKICB3YXRjaDogeyAgCiAgICBjbHVzdGVyU3R5bGUobmV3VmFsKSB7ICAKICAgICAgaWYgKG5ld1ZhbCkgeyAvLyDnoa7kv53mnInlgLzooqvpgInkuK0gIAogICAgICAgIHRoaXMucGF0dGVybiA9IDMgLy8g6K6+572u5Li66IGa5ZCIICAKICAgICAgICAvLyDlpoLmnpzpnIDopoHvvIzlj6/ku6XlnKjov5nph4zmt7vliqDpgLvovpHmnaXnpoHnlKjmiJbpmpDol4/lhbbku5bpgInpobnvvIzkvYZFbGVtZW50IFVJ55qEZWwtcmFkaW/kuI3mlK/mjIHnm7TmjqXnpoHnlKggIAogICAgICAgIC8vIOS4gOenjeaWueazleaYr+S9v+eUqOmineWklueahOaVsOaNruWxnuaAp+adpeaOp+WItuaYvuekuiAgCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMucGF0dGVybiA9IDIKICAgICAgfSAgCiAgICB9ICAKICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDliJ3lp4vljJYgZHJhd1BvaSDlkowgUGF0aExheWVyCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGRyYXdOZXdQb2kgPSBuZXcgRHJhd05ld1BvaSh0aGlzKQogICAgICBkcmF3UG9pID0gbmV3IERyYXdQb2kodGhpcykKICAgICAgUGF0aExheWVyLmluaXQoKQogICAgfSkKICAgIC8vIOWKoOi9veaVsOaNrgogICAgdGhpcy5sb2FkRGF0YSgpCiAgICB0aGlzLmNsdXN0ZXJEYXRhT3B0aW9ucy5mb3JFYWNoKGl0ZW09PnsKICAgICAgaWYoaXRlbS5sYWJlbD09J+eBsOm5pCcpewogICAgICAgIHRoaXMuZ3JleUNyYW5lID0gdGhpcy5sb2FkQ1NWKCfngbDpuaQnKQogICAgICB9ZWxzZSBpZihpdGVtLmxhYmVsPT0n5bCP5aSp6bmFJyl7CiAgICAgICAgdGhpcy5jeWduZXQgPSB0aGlzLmxvYWRDU1YoJ+Wwj+Wkqem5hScpCiAgICAgIH1lbHNlIGlmKGl0ZW0ubGFiZWw9PSfpuJ/nsbsxJyl7CiAgICAgICAgdGhpcy5iaXJkT25lID0gdGhpcy5sb2FkQ1NWKCfpuJ/nsbsxJykKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5iaXJkVHdvID0gdGhpcy5sb2FkQ1NWKCfpuJ/nsbsyJykKICAgICAgfQogICAgfSkKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyDmuIXpmaTnu5jliLYKICAgIGRyYXdOZXdQb2kuY2xlYXIoKQogICAgZHJhd05ld1BvaS5kcmF3Q2FuY2VsKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsdXNhdmUoKXsKICAgICAgLy8gY29uc3QgY2x1c3RlckxheWVyID0gTC5tYXJrZXJDbHVzdGVyR3JvdXAoewogICAgICAvLyBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSwKICAgICAgLy8gLy8gem9vbVRvQm91bmRzT25DbGljazogZmFsc2UsCiAgICAgIC8vIC8vIHNwaWRlcmZ5T25NYXhab29tOiBmYWxzZSwKICAgICAgLy8gLy8gcmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHM6IGZhbHNlLAogICAgICAvLyAvLyBzcGlkZXJMZWdQb2x5bGluZU9wdGlvbnM6IHt9CiAgICAgIC8vIC8vIOiHquWumuS5ieiBmuWQiOagt+W8jwogICAgICAvLyAvLyBpY29uQ3JlYXRlRnVuY3Rpb246IGZ1bmN0aW9uIChjbHVzdGVyKSB7CiAgICAgIC8vIC8vIHJldHVybiBMLmRpdkljb24oe2h0bWw6ICc8YiBjbGFzcz0iYmctI1tmNDBdIj4nICsgY2x1c3Rlci5nZXRDaGlsZENvdW50KCkgKyAnPC9iPid9KTsKICAgICAgLy8gLy8gfQogICAgICAvLyB9KTsKICAgICAgLy8gdGhpcy5jbHVkYXRhLmZvckVhY2goaXRlbSA9PnsKICAgICAgLy8gICBpZiAoaXRlbS5sYXQgIT0gbnVsbCAmJiBpdGVtLmxuZyAhPSBudWxsKSB7CiAgICAgIC8vICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbaXRlbS5sbmcsIGl0ZW0ubGF0XSwgeyAgLy8g5Y675o6J5aSa5L2Z55qE5pa55ous5Y+3CiAgICAgIC8vICAgICAgIHRpdGxlOiBg54K5ICR7aXRlbS50aW1lfWAsCiAgICAgIC8vICAgICAgIGljb246IEwuaWNvbih7CiAgICAgIC8vICAgICAgICAgaWNvblVybDogY2x1UG9pbnRJbWcsCiAgICAgIC8vICAgICAgICAgaWNvblNpemU6IFsxMiwgMTJdLAogICAgICAvLyAgICAgICAgIGljb25BbmNob3I6IFswLCAwXQogICAgICAvLyAgICAgICB9KQogICAgICAvLyAgICAgfSk7CgogICAgICAvLyAgICAgbWFya2VyLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAvLyAgICAgICBjb25zb2xlLmxvZygnbWFya2VyID09PT0nLCBldmVudC5sYXRsbmcpOwogICAgICAvLyAgICAgfSk7CgogICAgICAvLyAgICAgbWFya2VyLm9uKCdjbHVzdGVyY2xpY2snLCBmdW5jdGlvbiAoYSkgewogICAgICAvLyAgICAgICBjb25zb2xlLmxvZygnY2x1c3RlciAnICsgYS5sYXllci5nZXRBbGxDaGlsZE1hcmtlcnMoKS5sZW5ndGgpOwogICAgICAvLyAgICAgfSk7CgogICAgICAvLyAgICAgY2x1c3RlckxheWVyLmFkZExheWVyKG1hcmtlcik7CiAgICAgIC8vICAgfSBlbHNlIHsKICAgICAgLy8gICAgIGNvbnNvbGUud2FybihgSW52YWxpZCBsYXQvbG5nIGZvciBpdGVtOmAsIGl0ZW0pOwogICAgICAvLyAgIH0KICAgICAgLy8gfSkKICAgICAgLy8gbWFwLmFkZExheWVyKGNsdXN0ZXJMYXllcik7CiAgICAgIC8vIOa4hemZpOWFiOWJjeeahOWbvuWxggogICAgICBwcmV2aW91c0xheWVycy5mb3JFYWNoKGxheWVyID0+IHsKICAgICAgICAgIG1hcC5yZW1vdmVMYXllcihsYXllcikKICAgICAgfSk7CiAgICAgIHByZXZpb3VzTGF5ZXJzID0gW10KICAgICAgY29uc3QgbWFya2Vyc0NhbnZhcyA9IG5ldyBMLk1hcmtlcnNDYW52YXMoKQogICAgICBtYXJrZXJzQ2FudmFzLmFkZFRvKG1hcCkKICAgICAgcHJldmlvdXNMYXllcnMucHVzaChtYXJrZXJzQ2FudmFzKQogICAgICB2YXIgaWNvbiA9IEwuaWNvbih7CiAgICAgICAgaWNvblVybDpjbHVQb2ludEltZywKICAgICAgICBpY29uU2l6ZTpbMTIsMTJdLAogICAgICAgIGljb25BbmNob3I6WzYsNl0KICAgICAgfSkKICAgICAgY29uc3QgbWFya2VycyA9IFtdCiAgICAgIGlmKHRoaXMuc2VsZWN0Y2x1ZGF0YSA9PSAn54Gw6bmkJyl7CiAgICAgICAgaWYodGhpcy5jbHVzdGVyU3R5bGUubGVuZ3RoID09IDApewogICAgICAgICAgaWYodGhpcy5wYXR0ZXJuID09ICcyJyl7CiAgICAgICAgICAgICAvLyDmnIDljp/lp4vngrnnmoTlsZXnpLoKICAgICAgICAgICAgaWYodGhpcy5nZW9tZXRyaWNUeXBlID09ICcxJyl7CiAgICAgICAgICAgICAgdGhpcy5ncmV5Q3JhbmUudGhlbihncmV5Q3JhbmVBcnI9PnsKICAgICAgICAgICAgICAgIHZhciBsYXRsbmdzID0gW10KICAgICAgICAgICAgICAgIGdyZXlDcmFuZUFyci5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ubGF0ICE9IG51bGwgJiYgaXRlbS5sbmcgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtlciA9IEwubWFya2VyKFtpdGVtLmxuZywgaXRlbS5sYXRdLHtpY29ufSkuYmluZFBvcHVwKGDml7bpl7Q6JHtpdGVtLnRpbWV9PHA+57uP5bqmOiR7aXRlbS5sYXR9PHA+57qs5bqmOiR7aXRlbS5sbmd9YCkub24oewogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdmVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbS5sbmcsaXRlbS5sYXRdKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICAgICAgLy8gTC5wb2x5bGluZShsYXRsbmdzLHtjb2xvcjogJ3JlZCcsd2VpZ2h0OiAzLG9mZnNldDogJzAlJ30pLmFkZFRvKG1hcCk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5nZW9tZXRyaWNUeXBlID09ICcyJyl7CiAgICAgICAgICAgICAvLyDngrkr57q/55qE5bGV56S6CiAgICAgICAgICAgICB0aGlzLmdyZXlDcmFuZS50aGVuKGdyZXlDcmFuZUFycj0+ewogICAgICAgICAgICAgICAgdmFyIGxhdGxuZ3MgPSBbXQogICAgICAgICAgICAgICAgZ3JleUNyYW5lQXJyLmZvckVhY2goaXRlbT0+ewogICAgICAgICAgICAgICAgICBpZiAoaXRlbS5sYXQgIT0gbnVsbCAmJiBpdGVtLmxuZyAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW2l0ZW0ubG5nLCBpdGVtLmxhdF0se2ljb259KS5iaW5kUG9wdXAoYOaXtumXtDoke2l0ZW0udGltZX08cD7nu4/luqY6JHtpdGVtLmxhdH08cD7nuqzluqY6JHtpdGVtLmxuZ31gKS5vbih7CiAgICAgICAgICAgICAgICAgICAgICBtb3VzZW92ZXIoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblBvcHVwKCkKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBtb3VzZW91dChlKXsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCkKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIpCiAgICAgICAgICAgICAgICAgICAgbGF0bG5ncy5wdXNoKFtpdGVtLmxuZyxpdGVtLmxhdF0pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICBtYXJrZXJzQ2FudmFzLmFkZE1hcmtlcnMobWFya2VycykKICAgICAgICAgICAgICAgIHByZXZpb3VzTGF5ZXJzID0gcHJldmlvdXNMYXllcnMuY29uY2F0KG1hcmtlcnMpCiAgICAgICAgICAgICAgICAvLyBMLnBvbHlsaW5lKGxhdGxuZ3Mse2NvbG9yOiAncmVkJyx3ZWlnaHQ6IDMsb2Zmc2V0OiAnMCUnfSkuYWRkVG8obWFwKTsKICAgICAgICAgICAgICAgIHZhciBwb2x5bGluZSA9IEwucG9seWxpbmUobGF0bG5ncyx7Y29sb3I6ICdyZWQnLHdlaWdodDogM30pLmFkZFRvKG1hcCk7CiAgICAgICAgICAgICAgICB2YXIgZGVjb3JhdG9yID0gTC5wb2x5bGluZURlY29yYXRvcihwb2x5bGluZSwgewogICAgICAgICAgICAgICAgICAgIHBhdHRlcm5zOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRlZmluZXMgYSBwYXR0ZXJuIG9mIDEwcHgtd2lkZSBkYXNoZXMsIHJlcGVhdGVkIGV2ZXJ5IDIwcHggb24gdGhlIGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAge29mZnNldDogMCwgcmVwZWF0OiAzNSwgc3ltYm9sOiBMLlN5bWJvbC5hcnJvd0hlYWQoewogICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxTaXplOiA1LCAgLy8g566t5aS05aSn5bCPCiAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkQW5nbGUgOiA3NSwgIC8vIOinkuW6pgogICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvbjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoT3B0aW9uczoge3N0cm9rZTogdHJ1ZSwgd2VpZ2h0OiAyLCBjb2xvcjogJ2JsdWUnfQogICAgICAgICAgICAgICAgICAgICB9KX0KICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9KS5hZGRUbyhtYXApOwogICAgICAgICAgICAgICAgcHJldmlvdXNMYXllcnMucHVzaChkZWNvcmF0b3IpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycy5wdXNoKHBvbHlsaW5lKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAvLyDnroDljJbngrkg5L2/55So6YGT5qC85ouJ5pav5ruk5rOi566X5rOV5o6S6Zmk54K5CiAgICAgICAgICAgIC8vIOWPquacieeCuQogICAgICAgICAgICBpZih0aGlzLmdlb21ldHJpY1R5cGUgPT0gJzEnKXsKICAgICAgICAgICAgICB0aGlzLmdyZXlDcmFuZS50aGVuKGdyZXlDcmFuZUFyciA9PiB7CiAgICAgICAgICAgICAgICAgIHZhciBsYXRsbmdzID0gW107CiAgICAgICAgICAgICAgICAgIGdyZXlDcmFuZUFyciA9IGRvdWdsYXNQZXVja2VyKGdyZXlDcmFuZUFyciwgMjUwMDApOwogICAgICAgICAgICAgICAgICBncmV5Q3JhbmVBcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtWzBdICE9IG51bGwgJiYgaXRlbVsxXSAhPSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW2l0ZW1bMV0sIGl0ZW1bMF1dLCB7IGljb24gfSkuYmluZFBvcHVwKGDml7bpl7Q6JHtpdGVtWzJdfTxwPue7j+W6pjoke2l0ZW1bMV19PHA+57qs5bqmOiR7aXRlbVswXX1gKS5vbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdXNlb3ZlcihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VzZW91dChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbVsxXSwgaXRlbVswXV0pOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIG1hcmtlcnNDYW52YXMuYWRkTWFya2VycyhtYXJrZXJzKTsKICAgICAgICAgICAgICAgICAgcHJldmlvdXNMYXllcnMgPSBwcmV2aW91c0xheWVycy5jb25jYXQobWFya2Vycyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH1lbHNlIGlmKHRoaXMuZ2VvbWV0cmljVHlwZSA9PSAnMicpe3RoaXMuZ3JleUNyYW5lLnRoZW4oZ3JleUNyYW5lQXJyPT57CiAgICAgICAgICAgICAgICB2YXIgbGF0bG5ncyA9IFtdCiAgICAgICAgICAgICAgICBncmV5Q3JhbmVBcnIgPSBkb3VnbGFzUGV1Y2tlcihncmV5Q3JhbmVBcnIsIDI1MDAwKQogICAgICAgICAgICAgICAgZ3JleUNyYW5lQXJyLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bMF0gIT0gbnVsbCAmJiBpdGVtWzFdICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gTC5tYXJrZXIoW2l0ZW1bMV0sIGl0ZW1bMF1dLCB7IGljb24gfSkuYmluZFBvcHVwKGDml7bpl7Q6JHtpdGVtWzJdfTxwPue7j+W6pjoke2l0ZW1bMV19PHA+57qs5bqmOiR7aXRlbVswXX1gKS5vbih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb3VzZW92ZXIoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3BlblBvcHVwKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7CiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbVsxXSwgaXRlbVswXV0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICAgICAgLy8gTC5wb2x5bGluZShsYXRsbmdzLHtjb2xvcjogJ3JlZCcsd2VpZ2h0OiAzLG9mZnNldDogJzAlJ30pLmFkZFRvKG1hcCk7CiAgICAgICAgICAgICAgICB2YXIgcG9seWxpbmUgPSBMLnBvbHlsaW5lKGxhdGxuZ3Mse2NvbG9yOiAncmVkJyx3ZWlnaHQ6IDN9KS5hZGRUbyhtYXApOwogICAgICAgICAgICAgICAgdmFyIGRlY29yYXRvciA9IEwucG9seWxpbmVEZWNvcmF0b3IocG9seWxpbmUsIHsKICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuczogWwogICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZpbmVzIGEgcGF0dGVybiBvZiAxMHB4LXdpZGUgZGFzaGVzLCByZXBlYXRlZCBldmVyeSAyMHB4IG9uIHRoZSBsaW5lCiAgICAgICAgICAgICAgICAgICAgICAgIHtvZmZzZXQ6IDAsIHJlcGVhdDogMzUsIHN5bWJvbDogTC5TeW1ib2wuYXJyb3dIZWFkKHsKICAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsU2l6ZTogNSwgIC8vIOeureWktOWkp+WwjwogICAgICAgICAgICAgICAgICAgICAgICAgaGVhZEFuZ2xlIDogNzUsICAvLyDop5LluqYKICAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgcGF0aE9wdGlvbnM6IHtzdHJva2U6IHRydWUsIHdlaWdodDogMiwgY29sb3I6ICdibHVlJ30KICAgICAgICAgICAgICAgICAgICAgfSl9CiAgICAgICAgICAgICAgICAgICAgXQogICAgICAgICAgICAgICAgfSkuYWRkVG8obWFwKTsKICAgICAgICAgICAgICAgIHByZXZpb3VzTGF5ZXJzLnB1c2goZGVjb3JhdG9yKQogICAgICAgICAgICAgICAgcHJldmlvdXNMYXllcnMucHVzaChwb2x5bGluZSkKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICBpZih0aGlzLmNsdXN0ZXJTdHlsZSA9PSAxKXsgLy9DTEFSQU5TCiAgICAgICAgICAgIHRoaXMuZ3JleUNyYW5lLnRoZW4oZ3JleUNyYW5lQXJyPT57CiAgICAgICAgICAgICAgY29uc3QgY2x1c3RlckNlbnRlcnMgPSBjbGFyYW5zKGdyZXlDcmFuZUFyciwyMCw1LDEwMCkKICAgICAgICAgICAgICB2YXIgbGF0bG5ncyA9IFtdCiAgICAgICAgICAgICAgY2x1c3RlckNlbnRlcnMuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmxhdCAhPSBudWxsICYmIGl0ZW0ubG5nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbaXRlbS5sbmcsIGl0ZW0ubGF0XSx7aWNvbn0pLmJpbmRQb3B1cChg57uP5bqmOiR7aXRlbS5sYXR9PHA+57qs5bqmOiR7aXRlbS5sbmd9YCkub24oewogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdmVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbS5sbmcsaXRlbS5sYXRdKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICB9KQogICAgICAgICAgfWVsc2UgaWYodGhpcy5jbHVzdGVyU3R5bGUgPT0gMil7IC8vSy1NZWFucwogICAgICAgICAgICB0aGlzLmdyZXlDcmFuZS50aGVuKGdyZXlDcmFuZUFycj0+ewogICAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXJDZW50ZXJzID0ga01lYW5zKGdyZXlDcmFuZUFyciwyMCkKICAgICAgICAgICAgICB2YXIgbGF0bG5ncyA9IFtdCiAgICAgICAgICAgICAgY2x1c3RlckNlbnRlcnMuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmxhdCAhPSBudWxsICYmIGl0ZW0ubG5nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbaXRlbS5sbmcsIGl0ZW0ubGF0XSx7aWNvbn0pLmJpbmRQb3B1cChg57uP5bqmOiR7aXRlbS5sYXR9PHA+57qs5bqmOiR7aXRlbS5sbmd9YCkub24oewogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdmVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbS5sbmcsaXRlbS5sYXRdKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICB9KQogICAgICAgICAgfWVsc2UgaWYodGhpcy5jbHVzdGVyU3R5bGUgPT0gMyl7IC8vREJTQ0FOCiAgICAgICAgICAgIHRoaXMuZ3JleUNyYW5lLnRoZW4oZ3JleUNyYW5lQXJyPT57CiAgICAgICAgICAgICAgLy8gdmFyIHRlbXBBcnIgPSBbXQogICAgICAgICAgICAgIC8vIGZvcih2YXIgaSA9IDA7aTw0MDAwO2krKyl0ZW1wQXJyLnB1c2goZ3JleUNyYW5lQXJyW2ldKQogICAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXJDZW50ZXJzID0gZGJzY2FuKGdyZXlDcmFuZUFyciwyNSw3MCkKICAgICAgICAgICAgICB2YXIgbGF0bG5ncyA9IFtdCiAgICAgICAgICAgICAgY2x1c3RlckNlbnRlcnMuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmxhdCAhPSBudWxsICYmIGl0ZW0ubG5nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbaXRlbS5sbmcsIGl0ZW0ubGF0XSx7aWNvbn0pLmJpbmRQb3B1cChg57uP5bqmOiR7aXRlbS5sYXR9PHA+57qs5bqmOiR7aXRlbS5sbmd9YCkub24oewogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdmVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbS5sbmcsaXRlbS5sYXRdKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICB9KQogICAgICAgICAgfWVsc2UgaWYodGhpcy5jbHVzdGVyU3R5bGUgPT0gNCl7IC8vIE9QVElDUwogICAgICAgICAgICB0aGlzLmdyZXlDcmFuZS50aGVuKGdyZXlDcmFuZUFycj0+ewogICAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXJDZW50ZXJzID0gb3B0aWNzKGdyZXlDcmFuZUFyciwyNSw3MCkKICAgICAgICAgICAgICB2YXIgbGF0bG5ncyA9IFtdCiAgICAgICAgICAgICAgY2x1c3RlckNlbnRlcnMuZm9yRWFjaChpdGVtPT57CiAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmxhdCAhPSBudWxsICYmIGl0ZW0ubG5nICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihbaXRlbS5sbmcsIGl0ZW0ubGF0XSx7aWNvbn0pLmJpbmRQb3B1cChg57uP5bqmOiR7aXRlbS5sYXR9PHA+57qs5bqmOiR7aXRlbS5sbmd9YCkub24oewogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdmVyKGUpewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW5Qb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgbW91c2VvdXQoZSl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VQb3B1cCgpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICAgICAgICAgIGxhdGxuZ3MucHVzaChbaXRlbS5sbmcsaXRlbS5sYXRdKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXJzKG1hcmtlcnMpCiAgICAgICAgICAgICAgICBwcmV2aW91c0xheWVycyA9IHByZXZpb3VzTGF5ZXJzLmNvbmNhdChtYXJrZXJzKQogICAgICAgICAgICB9KQogICAgICAgICAgfWVsc2UgaWYodGhpcy5jbHVzdGVyU3R5bGUgPT0gNSl7IC8vIFQtREJTQ0FOCiAgICAgICAgICAgIHRoaXMuZ3JleUNyYW5lLnRoZW4oZ3JleUNyYW5lQXJyID0+IHsKICAgICAgICAgICAgICAgIHZhciB0ZW1wYXJyID0gW107CiAgICAgICAgICAgICAgICBncmV5Q3JhbmVBcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgICAgICAgICB0ZW1wYXJyLnB1c2goW2l0ZW0ubGF0LCBpdGVtLmxuZywgY29udmVydERhdGVTdHJpbmdUb1VuaXgoaXRlbS50aW1lKV0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgY29uc3QgY2x1c3RlckNlbnRlcnMgPSB0ZGJzY2FuKDI1LCAzLCAxMzAsIHRlbXBhcnIpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2x1c3RlckNlbnRlcnMpCiAgICAgICAgICAgIH0pCgogICAgICAgICAgfQogICAgICAgIH0gIAogICAgICB9CiAgICAgCiAgICB9LAogICAgCiAgICAvLyDor7vlj5Zjc3bmlofku7YKICAgIGFzeW5jIGxvYWRDU1YoZGF0YSkgeyAgCiAgICAgIGNvbnN0IGNzdlVybCA9IGAuLi9yZXNvdXJjZS8ke2RhdGF9LmNzdmA7ICAKICAgICAgdHJ5IHsgIAogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY3N2VXJsKTsgIAogICAgICAgIGlmICghcmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcignTmV0d29yayByZXNwb25zZSB3YXMgbm90IG9rJyk7ICAKICAgICAgICBjb25zdCBjc3YgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7ICAKICAgICAgICBjb25zdCByZXN1bHRzID0gUGFwYS5wYXJzZShjc3YsIHsgaGVhZGVyOiB0cnVlIH0pOyAKICAgICAgICAvLyB0aGlzLmNsdWRhdGEgPSByZXN1bHRzLmRhdGE7IC8vIOWwhuino+aekOWQjueahOaVsOaNrui1i+WAvOe7mWRhdGFsaXN0ICAKICAgICAgICByZXR1cm4gcmVzdWx0cy5kYXRhCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7ICAKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIENTVjonLCBlcnJvcik7ICAKICAgICAgICAvLyDlj6/ku6XlnKjov5nph4zlpITnkIbplJnor6/vvIzmr5TlpoLmmL7npLrkuIDkuKrplJnor6/mtojmga/nu5nnlKjmiLcgIAogICAgICB9ICAKICAgIH0sCiAgICAvL+agueaNruWcsOWQjeafpeaJvue7j+e6rOW6pgogICAgc2VhcmNoTG5nQnlOYW1lKG9wdGlvbnMpewogICAgICAvL+a5luWNl+ecgeeOr+eQg+S/oeWjq+WFrOWPuAogICAgICAvL+ivt+axgu+8miBodHRwOi8vYXBpLnRpYW5kaXR1Lmdvdi5jbi9nZW9jb2Rlcj9kcz17ImtleVdvcmQiOiLljJfkuqzluILlu7bluobljLrlu7bluobplYfojrLoirHmsaDmnZHliY3ooZc1MOWklemYs+e6ouWFu+iAgemZoiJ9JnRrPeaCqOeahOWvhumSpQogICAgICBheGlvcy5nZXQoJ2h0dHA6Ly9hcGkudGlhbmRpdHUuZ292LmNuL2dlb2NvZGVyP2RzPXsia2V5V29yZCI6IicgKyBvcHRpb25zLm5hbWUgKyAnIn0mdGs9ODlkZWEzZWFiNTYxZjBkZmI5ODY3ZTUzMTQxNWUwMTUnKS50aGVuKHJlcyA9PiB7CiAgICAgICAgb3B0aW9ucy5sbmc9cmVzLmRhdGEubG9jYXRpb24ubG9uCiAgICAgICAgb3B0aW9ucy5sYXQ9cmVzLmRhdGEubG9jYXRpb24ubGF0CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcm91dGU6JywgZXJyKQogICAgICB9KSAKICAgIH0sCiAgICAvL+eCueWHu+iKgueCuQogICAgaGFuZGxlTm9kZUNsaWNrKGRhdGEpewogICAgICBjb25zb2xlLmxvZygn6IqC54K55pWw5o2uJyxkYXRhKQogICAgICBjb25zb2xlLmxvZygn6IqC54K5SUQnLGRhdGEuJHRyZWVOb2RlSWQpCiAgICB9LAogICAgLy/lr7zoiKoKICAgIG5hdmlnYXRpb24oKXsKICAgICAgdGhpcy5wYWdlPSduYXZpZ2F0aW9uJyAvL+i3s+i9rOWIsOWvvOiIqueVjOmdogogICAgICB0aGlzLm5hdmRyYXdpbmcgPSB0cnVlCiAgICAgIGRyYXdQb2kuZHJhdygpCiAgICB9LAogICAgLy/nu5jliLblr7zoiKrot6/nur8KICAgIHNlYXJjaFJvdXRlKCl7CiAgICAgIHRoaXMuc2hvd1BhdGgodGhpcy5zdGFydFBsYWNlLHRoaXMuZW5kUGxhY2UsdGhpcy5uYXZzdHlsZSkKICAgIH0sCiAgICAvL+afpeivouWcsOWQjQogICAgc2VhcmNoQnlOYW1lKGtleVdvcmQpewogICAgICBjb25zdCBsaXN0ID0gW10KICAgICAgRmlsZVNhdmUuZ2V0TGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zdCB0ZW1wID0gcmVzCiAgICAgICAgaWYodGVtcCl7CiAgICAgICAgICB0ZW1wLmZvckVhY2goaXRlbSA9PnsKICAgICAgICAgICAgaWYoaXRlbS5uYW1lLmluY2x1ZGVzKGtleVdvcmQpKXsKICAgICAgICAgICAgICBsaXN0LnB1c2goaXRlbSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIHRoaXMuZGF0YUxpc3QgPSBsaXN0CiAgICB9LAogICAgLy8g5Yqg6L295pWw5o2uCiAgICBsb2FkRGF0YSgpIHsKICAgICAgRmlsZVNhdmUuZ2V0TGlzdCgpLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKQogICAgICAgIGNvbnN0IGxpc3QgPSByZXMKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAvLyDlpITnkIblm77niYcKICAgICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGl0ZW0ucGhvdG9zKSB7CiAgICAgICAgICAgICAgY29uc3QgYXJyID0gaXRlbS5waG90b3Muc3BsaXQoJyMnKQogICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMCkgewogICAgICAgICAgICAgICAgaXRlbVsncGhvdG8wJ10gPSBhcnJbMF0KICAgICAgICAgICAgICAgIGl0ZW1bJ3Bob3RvQXJyJ10gPSBhcnIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gbGlzdAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gW10KICAgICAgICB9CiAgICAgICAgY29uc3QgbmFtZUxpc3QgPSBbXQogICAgICAgIGxpc3QuZm9yRWFjaChpdGVtID0+ewogICAgICAgICAgaWYoaXRlbS5uYW1lKXsKICAgICAgICAgICAgICBjb25zdCBbcHJvdmluY2UscGxhY2VdID0gaXRlbS5uYW1lLnNwbGl0KCctJykKICAgICAgICAgICAgICBjb25zdCBwcm92aW5jZXMgPSBuYW1lTGlzdCAvLyDnnIHku73lsYLnuqfmmK/moJHnmoTmoLkKICAgICAgICAgICAgICBjb25zdCBwcm92aW5jZU5vZGUgPSBmaW5kT3JDcmVhdGVQYXJlbnQocHJvdmluY2VzLCBwcm92aW5jZSkKICAgICAgICAgICAgICBjb25zdCBwbGFjZXMgPSBwcm92aW5jZU5vZGUuY2hpbGRyZW4KICAgICAgICAgICAgICBmaW5kT3JDcmVhdGVQYXJlbnQocGxhY2VzLCBwbGFjZSkgLy8g5Z+O5biC5L2c5Li655yB5Lu955qE5a2Q6IqC54K5CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApCiAgICAgICAgdGhpcy5uYW1lTGlzdD1uYW1lTGlzdAogICAgICB9KQogICAgfSwKICAgIC8vIOiBmuWQiOWIhuaekAogICAgY2x1c3RlckFuYWx5c2lzKCl7CiAgICAgIHRoaXMucGFnZSA9ICdjbHVzdGVyJwogICAgICBkcmF3TmV3UG9pLmNsZWFyKCkKICAgICAgZHJhd1BvaS5jbGVhcigpCiAgICAgIFBhdGhMYXllci5jbGVhcigpCiAgICB9LAogICAgLy8g5byA5aeL57uY5Yi2CiAgICBzdGFydERyYXcoKSB7CiAgICAgIHRoaXMuZHJhd2luZyA9IHRydWUKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgIGRyYXdOZXdQb2kuZHJhdygpCiAgICB9LAogICAgLy8g5Y+W5raI57uY5Yi2CiAgICBjYW5jZWxEcmF3KCkgewogICAgICBkcmF3TmV3UG9pLmRyYXdDYW5jZWwoKQogICAgICB0aGlzLmRyYXdpbmcgPSBmYWxzZQogICAgfSwKICAgIC8vIOi/lOWbnuWIl+ihqOmhtemdogogICAgYmFja1RvTGlzdCgpIHsKICAgICAgdGhpcy5wYWdlID0gJ2xpc3QnCiAgICAgIGRyYXdOZXdQb2kuY2xlYXIoKQogICAgICBkcmF3UG9pLmNsZWFyKCkKICAgICAgUGF0aExheWVyLmNsZWFyKCkKICAgICAgdGhpcy5uYXZkcmF3aW5nID0gZmFsc2UKICAgICAgaWYodGhpcy5zdGFydFBsYWNlIT0nJyl7CiAgICAgICAgdGhpcy5zdGFydFBsYWNlLm5hbWU9JycKICAgICAgICB0aGlzLnN0YXJ0UGxhY2UubG5nPScnCiAgICAgICAgdGhpcy5zdGFydFBsYWNlLmxhdD0nJwogICAgICAgIHRoaXMuZW5kUGxhY2UubmFtZT0nJwogICAgICAgIHRoaXMuZW5kUGxhY2UubG5nPScnCiAgICAgICAgdGhpcy5lbmRQbGFjZS5sYXQ9JycKCiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5wb2lGb3JtLnJlc2V0RmllbGRzKCkKICAgIH0sCiAgICAvLyDkv53lrZjmlbDmja4KICAgIHNhdmUoKSB7CiAgICAgIHRoaXMuJHJlZnMucG9pRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGNvbnN0IGN1cnJlbnRQb2ludCA9IHRoaXMuY3VycmVudFBvaW50CgogICAgICAgIGNvbnN0IHBhcmFtID0gewogICAgICAgICAgbmFtZTogY3VycmVudFBvaW50Lm5hbWUsCiAgICAgICAgICB0aW1lOiBjdXJyZW50UG9pbnQudGltZSwKICAgICAgICAgIGxvbmdpdHVkZTogY3VycmVudFBvaW50LmxuZywKICAgICAgICAgIGxhdGl0dWRlOiBjdXJyZW50UG9pbnQubGF0LAogICAgICAgICAgYWx0aXR1ZGU6IGN1cnJlbnRQb2ludC5hbHRpdHVkZSB8fCAwLAogICAgICAgICAgcGhvdG9zOiAnJywKICAgICAgICAgIGFkZHJlc3M6ICcnLAogICAgICAgICAgZGVzYzogY3VycmVudFBvaW50LmRlc2MgfHwgJycKICAgICAgICB9CiAgICAgICAgY29uc3QgcGhvdG9zID0gW10KICAgICAgICBpZiAodGhpcy5maWxlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0LmZvckVhY2goZiA9PiB7CiAgICAgICAgICAgIHBob3Rvcy5wdXNoKGYubmFtZSkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGlmIChwaG90b3MubGVuZ3RoID4gMCkgewogICAgICAgICAgcGFyYW0ucGhvdG9zID0gcGhvdG9zLmpvaW4oJyMnKQogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRQb2ludC5pZCkgewogICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YUxpc3QuZmluZChkID0+IGQuaWQgPT09IGN1cnJlbnRQb2ludC5pZCkKICAgICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGN1cnJlbnRQb2ludC5uYW1lIHx8ICcnCiAgICAgICAgICAgIGl0ZW0udGltZSA9IGN1cnJlbnRQb2ludC50aW1lIHx8ICcnCiAgICAgICAgICAgIGl0ZW0ubG9uZ2l0dWRlID0gY3VycmVudFBvaW50LmxuZwogICAgICAgICAgICBpdGVtLmxhdGl0dWRlID0gY3VycmVudFBvaW50LmxhdAogICAgICAgICAgICBpdGVtLmFsdGl0dWRlID0gY3VycmVudFBvaW50LmFsdGl0dWRlIHx8IDAKICAgICAgICAgICAgaXRlbS5waG90b3MgPSBwYXJhbS5waG90b3MKICAgICAgICAgICAgaXRlbS5hZGRyZXNzID0gcGFyYW0uYWRkcmVzcwogICAgICAgICAgICBpdGVtLmRlc2MgPSBjdXJyZW50UG9pbnQuZGVzYyB8fCAnJwogICAgICAgICAgICBGaWxlU2F2ZS5jcmVhdGUodGhpcy5kYXRhTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICAgICAgICB0aGlzLmJhY2tUb0xpc3QoKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwYXJhbVsnaWQnXSA9IGdldFV1aWQoKQogICAgICAgICAgdGhpcy5kYXRhTGlzdC5wdXNoKHBhcmFtKQogICAgICAgICAgRmlsZVNhdmUuY3JlYXRlKHRoaXMuZGF0YUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZVN1Y2Nlc3MoKQogICAgICAgICAgICB0aGlzLmJhY2tUb0xpc3QoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgdGhpcy5sb2FkRGF0YSgpCiAgICAgIH0pCiAgICB9LAogICAgLy8g6aOe5Yiw5oyH5a6a54K5CiAgICBmbHlUbyhpdGVtKSB7CiAgICAgIGRyYXdOZXdQb2kuZmx5VG8oaXRlbSkKICAgIH0sCiAgICAvLyDnvJbovpHmjIflrprngrkKICAgIGVkaXQoaXRlbSkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gW10KICAgICAgY29uc3QgcGhvdG9zID0gaXRlbS5waG90b3MKICAgICAgaWYgKHBob3RvcykgewogICAgICAgIGNvbnN0IGFyciA9IHBob3Rvcy5zcGxpdCgnIycpCiAgICAgICAgYXJyLmZvckVhY2godXJsID0+IHsKICAgICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgbmFtZTogdXJsLAogICAgICAgICAgICB1aWQ6IGdldFV1aWQoKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CiAgICAgIGRyYXdOZXdQb2kuZWRpdChpdGVtKQogICAgfSwKICAgIC8vIOWIoOmZpOaMh+WumueCuQogICAgZGVsZXRlQ2xpY2soaXRlbSkgewogICAgICBjb25zdCBpZHggPSB0aGlzLmRhdGFMaXN0LmZpbmRJbmRleChkID0+IGQuaWQgPT09IGl0ZW0uaWQpCiAgICAgIHRoaXMuZGF0YUxpc3Quc3BsaWNlKGlkeCwgMSkKICAgICAgRmlsZVNhdmUuY3JlYXRlKHRoaXMuZGF0YUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlU3VjY2VzcygpCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpCiAgICAgICAgZHJhd05ld1BvaS5jbGVhckJ5SWQoaXRlbS5pZCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDmlofku7bliJfooajlj5jljJYKICAgIGxpc3RDaGFuZ2UobGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gbGlzdAogICAgfSwKICAgIC8vIOe7j+e6rOW6puWPmOWMlgogICAgbGF0TG5nQ2hhbmdlKHYpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFBvaW50LmxhdCAmJiB0aGlzLmN1cnJlbnRQb2ludC5sbmcpIHsKICAgICAgICBkcmF3TmV3UG9pLnNldExhdExuZyh0aGlzLmN1cnJlbnRQb2ludC5sYXQsIHRoaXMuY3VycmVudFBvaW50LmxuZykKICAgICAgfQogICAgfSwKICAgIC8vIOaYvuekuui3r+W+hAogICAgc2hvd1BhdGgoc3RhcnQsZW5kLHN0eWxlKSB7CiAgICAgIFBhdGhMYXllci5wYXRoKHN0YXJ0LGVuZCxzdHlsZSkKICAgIH0KICB9Cn0KLy8g6L6F5Yqp5Ye95pWw77ya5Zyo5qCR5Lit5p+l5om+5oiW5re75Yqg54i26IqC54K5CmZ1bmN0aW9uIGZpbmRPckNyZWF0ZVBhcmVudChwYXJlbnRzLCBwYXJlbnROYW1lKSB7CiAgbGV0IHBhcmVudCA9IHBhcmVudHMuZmluZChwID0+IHAubGFiZWwgPT09IHBhcmVudE5hbWUpOwogIGlmICghcGFyZW50KSB7CiAgICBwYXJlbnQgPSB7IGxhYmVsOiBwYXJlbnROYW1lLCBjaGlsZHJlbjogW10gfTsKICAgIHBhcmVudHMucHVzaChwYXJlbnQpOwogIH0KICByZXR1cm4gcGFyZW50Owp9Cgo="},{"version":3,"sources":["PoiPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PoiPanel.vue","sourceRoot":"src/views/AMyWork/tools/poi","sourcesContent":["<template>\n  <div style=\"overflow: auto;width: 260px;background: white;\">\n    <!-- 列表页面 -->\n    <div v-show=\"page == 'list'\" class=\"poiPage\" style=\"margin-top: 10px;\">\n      <section style=\"margin: 0 20px;color:black;\">\n        <!-- 全选按钮和标绘按钮 -->\n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\" icon=\"el-icon-map-location\">\n              <i class=\"iconfont icon-jia-line\" /> 新增地点\n            </el-button>\n            <el-button v-if=\"drawing\" type=\"link\" @click=\"cancelDraw\">\n              取消\n            </el-button>\n          </div>\n        </div>\n        \n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button type=\"link\" @click=\"clusterAnalysis\" icon=\"el-icon-wind-power\">聚合分析</el-button>\n          </div>\n        </div>\n        <!-- 搜索框 -->\n        <div style=\"clear: right;\">\n          <el-input\n            v-model=\"keyWord\"\n            placeholder=\"请输入你要查找的地名\"\n            style=\"width:220px;margin-top: 10px;\"\n            allow-clear\n            enter-button\n            @pressEnter=\"loadData\"\n            @search=\"loadData\"\n          />\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchByName(keyWord)\">搜索</el-button>\n          <el-button type=\"primary\" icon=\"el-icon-position\" @click=\"navigation()\">\n            导航\n          </el-button>\n        </div>\n      <!-- 没有数据时候的展示 -->\n      </section>\n        <section style=\"margin: 20px;color:black;\">\n        <!-- 无数据时的占位符 -->\n        <el-empty v-show=\"dataList.length<1\" style=\"color: #606266;margin-top: 20px;padding-top: 120px;height:calc(100vh - 100px)\">\n          <span slot=\"description\"> 无数据 </span>\n          <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\">\n            <i class=\"iconfont icon-jia-line\" /> 标绘\n          </el-button>\n          <el-button v-if=\"drawing\" type=\"primary\" @click=\"cancelDraw\">\n            取消\n          </el-button>\n        </el-empty>\n        <!-- 数据列表 -->\n        <div v-show=\"dataList.length > 0\" item-layout=\"horizontal\" :data-source=\"dataList\" :style=\"{ height: 'calc(100vh - 240px)',overflow: 'auto' }\">\n          <!-- 分组 -->\n          <el-tree :data=\"nameList\" :props=\"defaultProps\" @node-click=\"handleNodeClick\"></el-tree>\n          <!--  -->\n          <div v-for=\"item in dataList\" :key=\"item.id\">\n            <div style=\"line-height: 36px;border-bottom: 1px solid #d3e1f5;\" @dblclick=\"edit(item)\"> \n              <div style=\"display: inline-block;\">{{ item.name }}</div>\n              <div style=\"float: right;\">\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link\" ghost @click=\"edit(item)\">编辑</el-button>\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link hover-red\" ghost @click=\"deleteClick(item)\">删除</el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n    <!-- 编辑页面 -->\n    <div v-show=\"page == 'edit'\">\n      <div style=\"padding: 20px;max-height: calc(100vh - 130px);overflow: auto;\">\n        <el-form ref=\"poiForm\" :model=\"currentPoint\" size=\"small\">\n          <el-form-item prop=\"name\" label=\"名称\">\n            <el-input v-model=\"currentPoint.name\" allow-clear />\n          </el-form-item>\n          <el-form-item prop=\"name\" label=\"时间\">\n            <el-input v-model=\"currentPoint.time\" allow-clear />\n          </el-form-item>\n          <el-form-item label=\"x\">\n            <el-input v-model=\"currentPoint.lng\" :min=\"-180\" :max=\"180\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"y\">\n            <el-input v-model=\"currentPoint.lat\" :min=\"-90\" :max=\"90\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"描述\" style=\"margin-bottom: 0;\">\n            <el-input v-model=\"currentPoint.desc\" type=\"textarea\" />\n          </el-form-item>\n          <el-form-item label=\"图片\" style=\"margin-top: 10px;\">\n            <image-upload :fileList=\"fileList\" type=\"poi\" @listChange=\"listChange\" />\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"save\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 导航页面  -->\n    <div v-show=\"page == 'navigation'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        <el-form size=\"small\" >\n          <el-form-item prop=\"startPlace\" label=\"输入起点\">\n            <el-input v-model=\"startPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(startPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLng\" label=\"起点经度\">\n            <el-input v-model=\"startPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLat\" label=\"起点维度\">\n            <el-input v-model=\"startPlace.lat\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlace\" label=\"输入终点\">\n            <el-input v-model=\"endPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(endPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLng\" label=\"终点经度\">\n            <el-input v-model=\"endPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLat\" label=\"终点维度\">\n            <el-input v-model=\"endPlace.lat\"/>\n          </el-form-item>\n          <el-form-item  label=\"请选择导航路线类型\">\n            <el-select v-model=\"navstyle\" clearable placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in navOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"searchRoute()\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 聚合分析页面 -->\n    <div v-show=\"page =='cluster'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        <el-form size=\"small\">\n          <el-form-item label=\"聚合方法\">\n            <el-select v-model=\"clusterStyle\" placeholder=\"请选择\" clearable>\n              <el-option\n                v-for=\"item in clusterStyleOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item> \n          <el-form-item label=\"聚合数据\">\n            <el-select v-model=\"selectcludata\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in clusterDataOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.label\">\n              </el-option>\n            </el-select>\n          </el-form-item> \n          <el-form-item label=\"模式\">\n            <el-radio-group v-model=\"pattern\">\n              <el-radio :label=\"1\">简化</el-radio>\n              <el-radio :label=\"2\">初始</el-radio>\n              <el-radio :label=\"3\">聚合</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"几何类型\">\n            <el-radio-group v-model=\"geometricType\">\n              <el-radio :label=\"1\">点</el-radio>\n              <el-radio :label=\"2\">点+线</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"clusave\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet'  // 引入Leaflet库\nimport 'leaflet-markers-canvas'\nimport 'leaflet.markercluster/dist/leaflet.markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport \"leaflet-canvas-marker\"\nimport Papa from 'papaparse'\nimport axios from 'axios'\nimport DrawPoi from './DrawPoi'\nimport DrawNewPoi from './DrawNewPoi'\nimport * as FileSave from './FileSave'\nimport { getUuid } from '../biz/common'\nimport IconsDialog from '../../../tool/build/IconsDialog.vue'\nimport 'leaflet/dist/leaflet.css'\nimport { douglasPeucker } from './DouglasPeuker'\nimport { kMeans } from '../algo/kmeans' \nimport { clarans } from '../algo/clarans' \nimport { dbscan } from '../algo/dbscan' \nimport { optics } from '../algo/optics' \nimport { tdbscan,convertDateStringToUnix } from '../algo/tdbscan' \nimport * as PathLayer from '../comm/PathLayer'\nconst pointerImg = require('@/assets/images/location64.png')\nconst cluPointImg = require('@/assets/images/point.png')\nconst arrowImg = require('@/assets/images/point.png')\n// 定义 drawPoi 变量\nlet drawNewPoi\nlet drawPoi\nlet previousLayers = []\nexport default {\n  components: { IconsDialog },\n  name: 'PoiPanel',\n  data() {\n    return {\n      selectcludata: '',\n      //灰鹤\n      greyCrane:[],\n      //小天鹅\n      cygne:[],\n      // 鸟类1\n      birdOne:[],\n      // 鸟类2\n      birdTwo:[],\n      // 数据模式\n      pattern:2,\n      // 几何类型\n      geometricType:1,\n      // 聚合算法\n      clusterStyle:'',\n      //聚合方式\n      clusterStyleOptions:[{\n        value:1,\n        label:'CLARANS'\n      },{\n        value:2,\n        label:'K-Means'\n      },{\n        value:3,\n        label:'DBSCAN'\n      },{\n        value:4,\n        label:'OPTICS'\n      },{\n        value:5,\n        label:'T-DBSCAN'\n      }],\n      // 聚合数据\n      clusterDataOptions:[{\n        value:0,\n        label:'灰鹤'\n      },{\n        value:1,\n        label:'小天鹅'\n      },{\n        value:2,\n        label:'鸟类1'\n      },{\n        value:3,\n        label:'鸟类2'\n      }],\n      showpoint: '0',\n      dataList: [], // 数据列表\n      page: 'list', // 当前页面（list 或 edit）\n      currentPoint: {\n        name: '',\n        time: ''\n      }, // 当前编辑的点信息\n      fileList: [], // 上传的文件列表\n      pointerImg: pointerImg, // 指针图片\n      drawing: false, // 是否正在绘制\n      navdrawing: false,\n      keyWord: '', // 搜索关键字\n      nameList:[],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      startPlace:{ //出发点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      endPlace:{ //终点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      //导航样式\n      navstyle: 0,\n      navOptions:[{\n        value:0,\n        label:'最快路线'\n      },{\n        value:1,\n        label:'最短路线'\n      },{\n        value:2,\n        label:'避开高速'\n      },{\n        value:3,\n        label:'步行'\n      }]\n    }\n  },\n  watch: {  \n    clusterStyle(newVal) {  \n      if (newVal) { // 确保有值被选中  \n        this.pattern = 3 // 设置为聚合  \n        // 如果需要，可以在这里添加逻辑来禁用或隐藏其他选项，但Element UI的el-radio不支持直接禁用  \n        // 一种方法是使用额外的数据属性来控制显示  \n      }else{\n        this.pattern = 2\n      }  \n    }  \n  },\n  mounted() {\n    // 初始化 drawPoi 和 PathLayer\n    this.$nextTick(() => {\n      drawNewPoi = new DrawNewPoi(this)\n      drawPoi = new DrawPoi(this)\n      PathLayer.init()\n    })\n    // 加载数据\n    this.loadData()\n    this.clusterDataOptions.forEach(item=>{\n      if(item.label=='灰鹤'){\n        this.greyCrane = this.loadCSV('灰鹤')\n      }else if(item.label=='小天鹅'){\n        this.cygnet = this.loadCSV('小天鹅')\n      }else if(item.label=='鸟类1'){\n        this.birdOne = this.loadCSV('鸟类1')\n      }else{\n        this.birdTwo = this.loadCSV('鸟类2')\n      }\n    })\n  },\n  beforeDestroy() {\n    // 清除绘制\n    drawNewPoi.clear()\n    drawNewPoi.drawCancel()\n  },\n  methods: {\n    clusave(){\n      // const clusterLayer = L.markerClusterGroup({\n      // showCoverageOnHover: false,\n      // // zoomToBoundsOnClick: false,\n      // // spiderfyOnMaxZoom: false,\n      // // removeOutsideVisibleBounds: false,\n      // // spiderLegPolylineOptions: {}\n      // // 自定义聚合样式\n      // // iconCreateFunction: function (cluster) {\n      // // return L.divIcon({html: '<b class=\"bg-#[f40]\">' + cluster.getChildCount() + '</b>'});\n      // // }\n      // });\n      // this.cludata.forEach(item =>{\n      //   if (item.lat != null && item.lng != null) {\n      //     const marker = L.marker([item.lng, item.lat], {  // 去掉多余的方括号\n      //       title: `点 ${item.time}`,\n      //       icon: L.icon({\n      //         iconUrl: cluPointImg,\n      //         iconSize: [12, 12],\n      //         iconAnchor: [0, 0]\n      //       })\n      //     });\n\n      //     marker.on('click', function (event) {\n      //       console.log('marker ====', event.latlng);\n      //     });\n\n      //     marker.on('clusterclick', function (a) {\n      //       console.log('cluster ' + a.layer.getAllChildMarkers().length);\n      //     });\n\n      //     clusterLayer.addLayer(marker);\n      //   } else {\n      //     console.warn(`Invalid lat/lng for item:`, item);\n      //   }\n      // })\n      // map.addLayer(clusterLayer);\n      // 清除先前的图层\n      previousLayers.forEach(layer => {\n          map.removeLayer(layer)\n      });\n      previousLayers = []\n      const markersCanvas = new L.MarkersCanvas()\n      markersCanvas.addTo(map)\n      previousLayers.push(markersCanvas)\n      var icon = L.icon({\n        iconUrl:cluPointImg,\n        iconSize:[12,12],\n        iconAnchor:[6,6]\n      })\n      const markers = []\n      if(this.selectcludata == '灰鹤'){\n        if(this.clusterStyle.length == 0){\n          if(this.pattern == '2'){\n             // 最原始点的展示\n            if(this.geometricType == '1'){\n              this.greyCrane.then(greyCraneArr=>{\n                var latlngs = []\n                greyCraneArr.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`时间:${item.time}<p>经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n                // L.polyline(latlngs,{color: 'red',weight: 3,offset: '0%'}).addTo(map);\n              })\n            }else if(this.geometricType == '2'){\n             // 点+线的展示\n             this.greyCrane.then(greyCraneArr=>{\n                var latlngs = []\n                greyCraneArr.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`时间:${item.time}<p>经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n                // L.polyline(latlngs,{color: 'red',weight: 3,offset: '0%'}).addTo(map);\n                var polyline = L.polyline(latlngs,{color: 'red',weight: 3}).addTo(map);\n                var decorator = L.polylineDecorator(polyline, {\n                    patterns: [\n                        // defines a pattern of 10px-wide dashes, repeated every 20px on the line\n                        {offset: 0, repeat: 35, symbol: L.Symbol.arrowHead({\n                         pixelSize: 5,  // 箭头大小\n                         headAngle : 75,  // 角度\n                         polygon: false,\n                         pathOptions: {stroke: true, weight: 2, color: 'blue'}\n                     })}\n                    ]\n                }).addTo(map);\n                previousLayers.push(decorator)\n                previousLayers.push(polyline)\n              })\n            }\n          }else{\n            // 简化点 使用道格拉斯滤波算法排除点\n            // 只有点\n            if(this.geometricType == '1'){\n              this.greyCrane.then(greyCraneArr => {\n                  var latlngs = [];\n                  greyCraneArr = douglasPeucker(greyCraneArr, 25000);\n                  greyCraneArr.forEach(item => {\n                      if (item[0] != null && item[1] != null) {\n                          const marker = L.marker([item[1], item[0]], { icon }).bindPopup(`时间:${item[2]}<p>经度:${item[1]}<p>纬度:${item[0]}`).on({\n                              mouseover(e) {\n                                  this.openPopup();\n                              },\n                              mouseout(e) {\n                                  this.closePopup();\n                              }\n                          });\n                          markers.push(marker);\n                          latlngs.push([item[1], item[0]]);\n                      }\n                  });\n\n                  markersCanvas.addMarkers(markers);\n                  previousLayers = previousLayers.concat(markers);\n              });\n            }else if(this.geometricType == '2'){this.greyCrane.then(greyCraneArr=>{\n                var latlngs = []\n                greyCraneArr = douglasPeucker(greyCraneArr, 25000)\n                greyCraneArr.forEach(item => {\n                    if (item[0] != null && item[1] != null) {\n                        const marker = L.marker([item[1], item[0]], { icon }).bindPopup(`时间:${item[2]}<p>经度:${item[1]}<p>纬度:${item[0]}`).on({\n                            mouseover(e) {\n                                this.openPopup();\n                            },\n                            mouseout(e) {\n                                this.closePopup();\n                            }\n                        });\n                        markers.push(marker);\n                        latlngs.push([item[1], item[0]]);\n                    }\n                });\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n                // L.polyline(latlngs,{color: 'red',weight: 3,offset: '0%'}).addTo(map);\n                var polyline = L.polyline(latlngs,{color: 'red',weight: 3}).addTo(map);\n                var decorator = L.polylineDecorator(polyline, {\n                    patterns: [\n                        // defines a pattern of 10px-wide dashes, repeated every 20px on the line\n                        {offset: 0, repeat: 35, symbol: L.Symbol.arrowHead({\n                         pixelSize: 5,  // 箭头大小\n                         headAngle : 75,  // 角度\n                         polygon: false,\n                         pathOptions: {stroke: true, weight: 2, color: 'blue'}\n                     })}\n                    ]\n                }).addTo(map);\n                previousLayers.push(decorator)\n                previousLayers.push(polyline)\n              })\n            }\n          }\n        }else{\n          if(this.clusterStyle == 1){ //CLARANS\n            this.greyCrane.then(greyCraneArr=>{\n              const clusterCenters = clarans(greyCraneArr,20,5,100)\n              var latlngs = []\n              clusterCenters.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n            })\n          }else if(this.clusterStyle == 2){ //K-Means\n            this.greyCrane.then(greyCraneArr=>{\n              const clusterCenters = kMeans(greyCraneArr,20)\n              var latlngs = []\n              clusterCenters.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n            })\n          }else if(this.clusterStyle == 3){ //DBSCAN\n            this.greyCrane.then(greyCraneArr=>{\n              // var tempArr = []\n              // for(var i = 0;i<4000;i++)tempArr.push(greyCraneArr[i])\n              const clusterCenters = dbscan(greyCraneArr,25,70)\n              var latlngs = []\n              clusterCenters.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n            })\n          }else if(this.clusterStyle == 4){ // OPTICS\n            this.greyCrane.then(greyCraneArr=>{\n              const clusterCenters = optics(greyCraneArr,25,70)\n              var latlngs = []\n              clusterCenters.forEach(item=>{\n                  if (item.lat != null && item.lng != null) {\n                    const marker = L.marker([item.lng, item.lat],{icon}).bindPopup(`经度:${item.lat}<p>纬度:${item.lng}`).on({\n                      mouseover(e){\n                        this.openPopup()\n                      },\n                      mouseout(e){\n                        this.closePopup()\n                      }\n                    })\n                    markers.push(marker)\n                    latlngs.push([item.lng,item.lat])\n                  }\n                })\n                markersCanvas.addMarkers(markers)\n                previousLayers = previousLayers.concat(markers)\n            })\n          }else if(this.clusterStyle == 5){ // T-DBSCAN\n            this.greyCrane.then(greyCraneArr => {\n                var temparr = [];\n                greyCraneArr.forEach(item => {\n                    temparr.push([item.lat, item.lng, convertDateStringToUnix(item.time)])\n                })\n                const clusterCenters = tdbscan(25, 3, 130, temparr);\n                console.log(clusterCenters)\n            })\n\n          }\n        }  \n      }\n     \n    },\n    \n    // 读取csv文件\n    async loadCSV(data) {  \n      const csvUrl = `../resource/${data}.csv`;  \n      try {  \n        const response = await fetch(csvUrl);  \n        if (!response.ok) throw new Error('Network response was not ok');  \n        const csv = await response.text();  \n        const results = Papa.parse(csv, { header: true }); \n        // this.cludata = results.data; // 将解析后的数据赋值给datalist  \n        return results.data\n      } catch (error) {  \n        console.error('Error loading CSV:', error);  \n        // 可以在这里处理错误，比如显示一个错误消息给用户  \n      }  \n    },\n    //根据地名查找经纬度\n    searchLngByName(options){\n      //湖南省环球信士公司\n      //请求： http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"北京市延庆区延庆镇莲花池村前街50夕阳红养老院\"}&tk=您的密钥\n      axios.get('http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"' + options.name + '\"}&tk=89dea3eab561f0dfb9867e531415e015').then(res => {\n        options.lng=res.data.location.lon\n        options.lat=res.data.location.lat\n      }).catch(err => {\n        console.error('Error fetching route:', err)\n      }) \n    },\n    //点击节点\n    handleNodeClick(data){\n      console.log('节点数据',data)\n      console.log('节点ID',data.$treeNodeId)\n    },\n    //导航\n    navigation(){\n      this.page='navigation' //跳转到导航界面\n      this.navdrawing = true\n      drawPoi.draw()\n    },\n    //绘制导航路线\n    searchRoute(){\n      this.showPath(this.startPlace,this.endPlace,this.navstyle)\n    },\n    //查询地名\n    searchByName(keyWord){\n      const list = []\n      FileSave.getList().then(res => {\n        const temp = res\n        if(temp){\n          temp.forEach(item =>{\n            if(item.name.includes(keyWord)){\n              list.push(item)\n            }\n          })\n        }\n      })\n      this.dataList = list\n    },\n    // 加载数据\n    loadData() {\n      FileSave.getList().then(res => {\n        console.log('res', res)\n        const list = res\n        if (res) {\n          // 处理图片\n          list.forEach(item => {\n            if (item.photos) {\n              const arr = item.photos.split('#')\n              if (arr.length > 0) {\n                item['photo0'] = arr[0]\n                item['photoArr'] = arr\n              }\n            }\n          })\n          this.dataList = list\n        } else {\n          this.dataList = []\n        }\n        const nameList = []\n        list.forEach(item =>{\n          if(item.name){\n              const [province,place] = item.name.split('-')\n              const provinces = nameList // 省份层级是树的根\n              const provinceNode = findOrCreateParent(provinces, province)\n              const places = provinceNode.children\n              findOrCreateParent(places, place) // 城市作为省份的子节点\n            }\n          }\n        )\n        this.nameList=nameList\n      })\n    },\n    // 聚合分析\n    clusterAnalysis(){\n      this.page = 'cluster'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n    },\n    // 开始绘制\n    startDraw() {\n      this.drawing = true\n      this.fileList = []\n      drawNewPoi.draw()\n    },\n    // 取消绘制\n    cancelDraw() {\n      drawNewPoi.drawCancel()\n      this.drawing = false\n    },\n    // 返回列表页面\n    backToList() {\n      this.page = 'list'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n      this.navdrawing = false\n      if(this.startPlace!=''){\n        this.startPlace.name=''\n        this.startPlace.lng=''\n        this.startPlace.lat=''\n        this.endPlace.name=''\n        this.endPlace.lng=''\n        this.endPlace.lat=''\n\n      }\n      this.$refs.poiForm.resetFields()\n    },\n    // 保存数据\n    save() {\n      this.$refs.poiForm.validate(valid => {\n        if (!valid) {\n          return\n        }\n        const currentPoint = this.currentPoint\n\n        const param = {\n          name: currentPoint.name,\n          time: currentPoint.time,\n          longitude: currentPoint.lng,\n          latitude: currentPoint.lat,\n          altitude: currentPoint.altitude || 0,\n          photos: '',\n          address: '',\n          desc: currentPoint.desc || ''\n        }\n        const photos = []\n        if (this.fileList.length > 0) {\n          this.fileList.forEach(f => {\n            photos.push(f.name)\n          })\n        }\n        if (photos.length > 0) {\n          param.photos = photos.join('#')\n        }\n\n        if (currentPoint.id) {\n          const item = this.dataList.find(d => d.id === currentPoint.id)\n          if (item) {\n            item.name = currentPoint.name || ''\n            item.time = currentPoint.time || ''\n            item.longitude = currentPoint.lng\n            item.latitude = currentPoint.lat\n            item.altitude = currentPoint.altitude || 0\n            item.photos = param.photos\n            item.address = param.address\n            item.desc = currentPoint.desc || ''\n            FileSave.create(this.dataList).then(res => {\n              this.$messageSuccess()\n              this.backToList()\n            })\n          }\n        } else {\n          param['id'] = getUuid()\n          this.dataList.push(param)\n          FileSave.create(this.dataList).then(res => {\n            this.$messageSuccess()\n            this.backToList()\n          })\n        }\n        this.loadData()\n      })\n    },\n    // 飞到指定点\n    flyTo(item) {\n      drawNewPoi.flyTo(item)\n    },\n    // 编辑指定点\n    edit(item) {\n      this.fileList = []\n      const photos = item.photos\n      if (photos) {\n        const arr = photos.split('#')\n        arr.forEach(url => {\n          this.fileList.push({\n            status: 'done',\n            url: url,\n            name: url,\n            uid: getUuid()\n          })\n        })\n      }\n      drawNewPoi.edit(item)\n    },\n    // 删除指定点\n    deleteClick(item) {\n      const idx = this.dataList.findIndex(d => d.id === item.id)\n      this.dataList.splice(idx, 1)\n      FileSave.create(this.dataList).then(res => {\n        this.$messageSuccess()\n        this.loadData()\n        drawNewPoi.clearById(item.id)\n      })\n    },\n    // 文件列表变化\n    listChange(list) {\n      this.fileList = list\n    },\n    // 经纬度变化\n    latLngChange(v) {\n      if (this.currentPoint.lat && this.currentPoint.lng) {\n        drawNewPoi.setLatLng(this.currentPoint.lat, this.currentPoint.lng)\n      }\n    },\n    // 显示路径\n    showPath(start,end,style) {\n      PathLayer.path(start,end,style)\n    }\n  }\n}\n// 辅助函数：在树中查找或添加父节点\nfunction findOrCreateParent(parents, parentName) {\n  let parent = parents.find(p => p.label === parentName);\n  if (!parent) {\n    parent = { label: parentName, children: [] };\n    parents.push(parent);\n  }\n  return parent;\n}\n\n</script>\n\n<style scoped>\n.poiImg {\n  width: 40px;\n  height: 40px;\n  border-radius: 5px;\n}\n</style>\n"]}]}