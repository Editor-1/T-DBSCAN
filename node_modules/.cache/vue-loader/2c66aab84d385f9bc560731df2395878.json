{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue","mtime":1721039174916},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\vue-loader\\lib\\index.js","mtime":1720856215506}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGaW5kIGZyb20gICcuLi9jb21tL25ldHdvcmsyJwppbXBvcnQgRHJhd1BvaSBmcm9tICcuL0RyYXdQb2knCmltcG9ydCAqIGFzIFBhdGhMYXllciBmcm9tICcuLi9jb21tL1BhdGhMYXllcicKY29uc3QgcG9pbnRlckltZyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9sb2NhdGlvbjY0LnBuZycpCmltcG9ydCAqIGFzIEZpbGVTYXZlIGZyb20gJy4vRmlsZVNhdmUnCmltcG9ydCB7IGdldFV1aWQgfSBmcm9tICcuLi9iaXovY29tbW9uJwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnCi8vIOWumuS5iSBkcmF3UG9pIOWPmOmHjwpsZXQgZHJhd1BvaQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQb2lQYW5lbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFMaXN0OiBbXSwgLy8g5pWw5o2u5YiX6KGoCiAgICAgIHBhZ2U6ICdsaXN0JywgLy8g5b2T5YmN6aG16Z2i77yIbGlzdCDmiJYgZWRpdO+8iQogICAgICBjdXJyZW50UG9pbnQ6IHsKICAgICAgICBuYW1lOiAnJywKICAgICAgICB0aW1lOiAnJwogICAgICB9LCAvLyDlvZPliY3nvJbovpHnmoTngrnkv6Hmga8KICAgICAgZmlsZUxpc3Q6IFtdLCAvLyDkuIrkvKDnmoTmlofku7bliJfooagKICAgICAgcG9pbnRlckltZzogcG9pbnRlckltZywgLy8g5oyH6ZKI5Zu+54mHCiAgICAgIGRyYXdpbmc6IGZhbHNlLCAvLyDmmK/lkKbmraPlnKjnu5jliLYKICAgICAga2V5V29yZDogJycsIC8vIOaQnOe0ouWFs+mUruWtlwogICAgICBuYW1lTGlzdDpbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgbGFiZWw6ICdsYWJlbCcKICAgICAgfSwKICAgICAgc3RhcnRQbGFjZTp7IC8v5Ye65Y+R54K5CiAgICAgICAgbmFtZTonJywKICAgICAgICBsbmc6ICcnLAogICAgICAgIGxhdDogJycKICAgICAgfSwKICAgICAgZW5kUGxhY2U6eyAvL+e7iOeCuQogICAgICAgIG5hbWU6JycsCiAgICAgICAgbG5nOiAnJywKICAgICAgICBsYXQ6ICcnCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDliJ3lp4vljJYgZHJhd1BvaSDlkowgUGF0aExheWVyCiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGRyYXdQb2kgPSBuZXcgRHJhd1BvaSh0aGlzKQogICAgICBQYXRoTGF5ZXIuaW5pdCgpCiAgICB9KQogICAgLy8g5Yqg6L295pWw5o2uCiAgICB0aGlzLmxvYWREYXRhKCkKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyDmuIXpmaTnu5jliLYKICAgIGRyYXdQb2kuY2xlYXIoKQogICAgZHJhd1BvaS5kcmF3Q2FuY2VsKCkKICB9LAogIG1ldGhvZHM6IHsKCiAgICAvL+WvvOiIqgogICAgbmF2aWdhdGlvbigpewogICAgICB0aGlzLnBhZ2U9J25hdmlnYXRpb24nIC8v6Lez6L2s5Yiw5a+86Iiq55WM6Z2iCiAgICB9LAogICAgc2VhcmNoUm91dGUoKXsKICAgICAgRmluZC5maW5kUm91dGUoKQogICAgfSwKICAgIC8v5p+l6K+i5Zyw5ZCNCiAgICBzZWFyY2hCeU5hbWUoa2V5V29yZCl7CiAgICAgIGNvbnN0IGxpc3QgPSBbXQogICAgICBGaWxlU2F2ZS5nZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IHRlbXAgPSByZXMKICAgICAgICBpZih0ZW1wKXsKICAgICAgICAgIHRlbXAuZm9yRWFjaChpdGVtID0+ewogICAgICAgICAgICBpZihpdGVtLm5hbWUuaW5jbHVkZXMoa2V5V29yZCkpewogICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5kYXRhTGlzdCA9IGxpc3QKICAgIH0sCiAgICAvLyDliqDovb3mlbDmja4KICAgIGxvYWREYXRhKCkgewogICAgICBGaWxlU2F2ZS5nZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpCiAgICAgICAgY29uc3QgbGlzdCA9IHJlcwogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIC8vIOWkhOeQhuWbvueJhwogICAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS5waG90b3MpIHsKICAgICAgICAgICAgICBjb25zdCBhcnIgPSBpdGVtLnBob3Rvcy5zcGxpdCgnIycpCiAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBpdGVtWydwaG90bzAnXSA9IGFyclswXQogICAgICAgICAgICAgICAgaXRlbVsncGhvdG9BcnInXSA9IGFycgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBsaXN0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXQogICAgICAgIH0KICAgICAgICBjb25zdCBuYW1lTGlzdCA9IFtdCiAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT57CiAgICAgICAgICBpZihpdGVtLm5hbWUpewogICAgICAgICAgICAgIGNvbnN0IFtwcm92aW5jZSxwbGFjZV0gPSBpdGVtLm5hbWUuc3BsaXQoJy0nKQogICAgICAgICAgICAgIGNvbnN0IHByb3ZpbmNlcyA9IG5hbWVMaXN0IC8vIOecgeS7veWxgue6p+aYr+agkeeahOaguQogICAgICAgICAgICAgIGNvbnN0IHByb3ZpbmNlTm9kZSA9IGZpbmRPckNyZWF0ZVBhcmVudChwcm92aW5jZXMsIHByb3ZpbmNlKQogICAgICAgICAgICAgIGNvbnN0IHBsYWNlcyA9IHByb3ZpbmNlTm9kZS5jaGlsZHJlbgogICAgICAgICAgICAgIGZpbmRPckNyZWF0ZVBhcmVudChwbGFjZXMsIHBsYWNlKSAvLyDln47luILkvZzkuLrnnIHku73nmoTlrZDoioLngrkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgICB0aGlzLm5hbWVMaXN0PW5hbWVMaXN0CiAgICAgIH0pCiAgICB9LAogICAgLy8g5byA5aeL57uY5Yi2CiAgICBzdGFydERyYXcoKSB7CiAgICAgIHRoaXMuZHJhd2luZyA9IHRydWUKICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgIGRyYXdQb2kuZHJhdygpCiAgICAgIHRoaXMuc2hvd0FsbExvY2F0aW9ucygpCiAgICB9LAogICAgLy8g5Y+W5raI57uY5Yi2CiAgICBjYW5jZWxEcmF3KCkgewogICAgICBkcmF3UG9pLmRyYXdDYW5jZWwoKQogICAgICB0aGlzLmRyYXdpbmcgPSBmYWxzZQogICAgfSwKICAgIC8vIOi/lOWbnuWIl+ihqOmhtemdogogICAgYmFja1RvTGlzdCgpIHsKICAgICAgdGhpcy5wYWdlID0gJ2xpc3QnCiAgICAgIGRyYXdQb2kuY2xlYXIoKQogICAgICB0aGlzLiRyZWZzLnBvaUZvcm0ucmVzZXRGaWVsZHMoKQogICAgfSwKICAgIC8vIOS/neWtmOaVsOaNrgogICAgc2F2ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5wb2lGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgY29uc3QgY3VycmVudFBvaW50ID0gdGhpcy5jdXJyZW50UG9pbnQKCiAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICBuYW1lOiBjdXJyZW50UG9pbnQubmFtZSwKICAgICAgICAgIHRpbWU6IGN1cnJlbnRQb2ludC50aW1lLAogICAgICAgICAgbG9uZ2l0dWRlOiBjdXJyZW50UG9pbnQubG5nLAogICAgICAgICAgbGF0aXR1ZGU6IGN1cnJlbnRQb2ludC5sYXQsCiAgICAgICAgICBhbHRpdHVkZTogY3VycmVudFBvaW50LmFsdGl0dWRlIHx8IDAsCiAgICAgICAgICBwaG90b3M6ICcnLAogICAgICAgICAgYWRkcmVzczogJycsCiAgICAgICAgICBkZXNjOiBjdXJyZW50UG9pbnQuZGVzYyB8fCAnJwogICAgICAgIH0KICAgICAgICBjb25zdCBwaG90b3MgPSBbXQogICAgICAgIGNvbnNvbGUubG9nKCd0aGlzLmZpbGVMaXN0JywgdGhpcy5maWxlTGlzdCkKICAgICAgICBpZiAodGhpcy5maWxlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmZpbGVMaXN0LmZvckVhY2goZiA9PiB7CiAgICAgICAgICAgIHBob3Rvcy5wdXNoKGYubmFtZSkKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIGlmIChwaG90b3MubGVuZ3RoID4gMCkgewogICAgICAgICAgcGFyYW0ucGhvdG9zID0gcGhvdG9zLmpvaW4oJyMnKQogICAgICAgIH0KCiAgICAgICAgaWYgKGN1cnJlbnRQb2ludC5pZCkgewogICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YUxpc3QuZmluZChkID0+IGQuaWQgPT09IGN1cnJlbnRQb2ludC5pZCkKICAgICAgICAgIGlmIChpdGVtKSB7CiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGN1cnJlbnRQb2ludC5uYW1lIHx8ICcnCiAgICAgICAgICAgIGl0ZW0udGltZSA9IGN1cnJlbnRQb2ludC50aW1lIHx8ICcnCiAgICAgICAgICAgIGl0ZW0ubG9uZ2l0dWRlID0gY3VycmVudFBvaW50LmxuZwogICAgICAgICAgICBpdGVtLmxhdGl0dWRlID0gY3VycmVudFBvaW50LmxhdAogICAgICAgICAgICBpdGVtLmFsdGl0dWRlID0gY3VycmVudFBvaW50LmFsdGl0dWRlIHx8IDAKICAgICAgICAgICAgaXRlbS5waG90b3MgPSBwYXJhbS5waG90b3MKICAgICAgICAgICAgaXRlbS5hZGRyZXNzID0gcGFyYW0uYWRkcmVzcwogICAgICAgICAgICBpdGVtLmRlc2MgPSBjdXJyZW50UG9pbnQuZGVzYyB8fCAnJwogICAgICAgICAgICBGaWxlU2F2ZS5jcmVhdGUodGhpcy5kYXRhTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICAgICAgICB0aGlzLmJhY2tUb0xpc3QoKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBwYXJhbVsnaWQnXSA9IGdldFV1aWQoKQogICAgICAgICAgdGhpcy5kYXRhTGlzdC5wdXNoKHBhcmFtKQogICAgICAgICAgRmlsZVNhdmUuY3JlYXRlKHRoaXMuZGF0YUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZVN1Y2Nlc3MoKQogICAgICAgICAgICB0aGlzLmJhY2tUb0xpc3QoKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgLy8g6aOe5Yiw5oyH5a6a54K5CiAgICBmbHlUbyhpdGVtKSB7CiAgICAgIGRyYXdQb2kuZmx5VG8oaXRlbSkKICAgIH0sCiAgICAvLyDnvJbovpHmjIflrprngrkKICAgIGVkaXQoaXRlbSkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gW10KICAgICAgY29uc3QgcGhvdG9zID0gaXRlbS5waG90b3MKICAgICAgaWYgKHBob3RvcykgewogICAgICAgIGNvbnN0IGFyciA9IHBob3Rvcy5zcGxpdCgnIycpCiAgICAgICAgYXJyLmZvckVhY2godXJsID0+IHsKICAgICAgICAgIHRoaXMuZmlsZUxpc3QucHVzaCh7CiAgICAgICAgICAgIHN0YXR1czogJ2RvbmUnLAogICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgbmFtZTogdXJsLAogICAgICAgICAgICB1aWQ6IGdldFV1aWQoKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICB9CiAgICAgIGRyYXdQb2kuZWRpdChpdGVtKQogICAgfSwKICAgIC8vIOWIoOmZpOaMh+WumueCuQogICAgZGVsZXRlQ2xpY2soaXRlbSkgewogICAgICBjb25zdCBpZHggPSB0aGlzLmRhdGFMaXN0LmZpbmRJbmRleChkID0+IGQuaWQgPT09IGl0ZW0uaWQpCiAgICAgIHRoaXMuZGF0YUxpc3Quc3BsaWNlKGlkeCwgMSkKICAgICAgRmlsZVNhdmUuY3JlYXRlKHRoaXMuZGF0YUxpc3QpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlU3VjY2VzcygpCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpCiAgICAgICAgZHJhd1BvaS5jbGVhckJ5SWQoaXRlbS5pZCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDmlofku7bliJfooajlj5jljJYKICAgIGxpc3RDaGFuZ2UobGlzdCkgewogICAgICB0aGlzLmZpbGVMaXN0ID0gbGlzdAogICAgfSwKICAgIC8vIOe7j+e6rOW6puWPmOWMlgogICAgbGF0TG5nQ2hhbmdlKHYpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudFBvaW50LmxhdCAmJiB0aGlzLmN1cnJlbnRQb2ludC5sbmcpIHsKICAgICAgICBkcmF3UG9pLnNldExhdExuZyh0aGlzLmN1cnJlbnRQb2ludC5sYXQsIHRoaXMuY3VycmVudFBvaW50LmxuZykKICAgICAgfQogICAgfSwKICAgIC8vIOWIh+aNouaYvuekuuaJgOacieWFtOi2o+eCuQogICAgcG9pU3dpdGNoKGUpIHsKICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHsKICAgICAgICBzYXZlUmVjb3JkKCflnLDlm77kuK3mn6XnnIvmiYDmnInlhbTotqPngrnliIbluIMnLCAnMTEnLCAnMScpCiAgICAgICAgUG9pQ29udGV4dC5nZXRMYXllcigpLnNob3coKQogICAgICAgIHRoaXMuc2hvd0FsbExvY2F0aW9ucygpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgUG9pQ29udGV4dC5nZXRMYXllcigpLmhpZGUoKQogICAgICB9CiAgICB9LAogICAgLy8g5pi+56S66Lev5b6ECiAgICBzaG93UGF0aChpdGVtKSB7CiAgICAgIFBhdGhMYXllci5wYXRoKCkKICAgIH0sCiAgICAvLyDmmL7npLrmiYDmnInkvY3nva4KICAgIHNob3dBbGxMb2NhdGlvbnMoKSB7CiAgICAgIHRoaXMuZGF0YUxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBkcmF3UG9pLnNob3dMb2NhdGlvbihpdGVtKQogICAgICB9KQogICAgfQogIH0KfQovLyDovoXliqnlh73mlbDvvJrlnKjmoJHkuK3mn6Xmib7miJbmt7vliqDniLboioLngrkKZnVuY3Rpb24gZmluZE9yQ3JlYXRlUGFyZW50KHBhcmVudHMsIHBhcmVudE5hbWUpIHsKICBsZXQgcGFyZW50ID0gcGFyZW50cy5maW5kKHAgPT4gcC5sYWJlbCA9PT0gcGFyZW50TmFtZSk7CiAgaWYgKCFwYXJlbnQpIHsKICAgIHBhcmVudCA9IHsgbGFiZWw6IHBhcmVudE5hbWUsIGNoaWxkcmVuOiBbXSB9OwogICAgcGFyZW50cy5wdXNoKHBhcmVudCk7CiAgfQogIHJldHVybiBwYXJlbnQ7Cn0K"},{"version":3,"sources":["PoiPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PoiPanel.vue","sourceRoot":"src/views/AMyWork/tools/poi","sourcesContent":["<template>\n  <div style=\"overflow: auto;width: 260px;background: white;\">\n    <!-- 列表页面 -->\n    <div v-show=\"page == 'list'\" class=\"poiPage\" style=\"margin-top: 10px;\">\n      <section style=\"margin: 0 20px;color:black;\">\n        <!-- 全选按钮和标绘按钮 -->\n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <el-checkbox style=\"line-height: 30px;\" @change=\"poiSwitch\">\n            全部\n          </el-checkbox>\n          <div v-show=\"dataList.length>0\" style=\"float: right;\">\n            <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\">\n              <i class=\"iconfont icon-jia-line\" /> 标绘\n            </el-button>\n            <el-button v-if=\"drawing\" type=\"link\" @click=\"cancelDraw\">\n              取消\n            </el-button>\n          </div>\n        </div>\n        <!-- 搜索框 -->\n        <div style=\"clear: right;\">\n          <el-input\n            v-model=\"keyWord\"\n            placeholder=\"请输入你要查找的地名\"\n            style=\"width:220px;margin-top: 10px;\"\n            allow-clear\n            enter-button\n            @pressEnter=\"loadData\"\n            @search=\"loadData\"\n          />\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchByName(keyWord)\">搜索</el-button>\n          <el-button type=\"primary\" icon=\"el-icon-position\" @click=\"navigation()\">导航</el-button>\n        </div>\n      </section>\n      <section style=\"margin: 20px;color:black;\">\n        <!-- 无数据时的占位符 -->\n        <el-empty v-show=\"dataList.length<1\" style=\"color: #606266;margin-top: 20px;padding-top: 120px;height:calc(100vh - 100px)\">\n          <span slot=\"description\"> 无数据 </span>\n          <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\">\n            <i class=\"iconfont icon-jia-line\" /> 标绘\n          </el-button>\n          <el-button v-if=\"drawing\" type=\"primary\" @click=\"cancelDraw\">\n            取消\n          </el-button>\n        </el-empty>\n        <!-- 数据列表 -->\n        <div v-show=\"dataList.length > 0\" item-layout=\"horizontal\" :data-source=\"dataList\" :style=\"{ height: 'calc(100vh - 240px)',overflow: 'auto' }\">\n          <el-tree :data=\"nameList\" :props=\"defaultProps\"></el-tree>\n          <div v-for=\"item in dataList\" :key=\"item.id\">\n            <div style=\"line-height: 36px;border-bottom: 1px solid #d3e1f5;\">\n              <div style=\"display: inline-block;\" @click=\"showPath(item)\">{{ item.name }}</div>\n              <div style=\"float: right;\">\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link\" ghost @click=\"edit(item)\">编辑</el-button>\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link hover-red\" ghost @click=\"deleteClick(item)\">删除</el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n    <!-- 编辑页面 -->\n    <div v-show=\"page == 'edit'\">\n      <div style=\"padding: 20px;max-height: calc(100vh - 130px);overflow: auto;\">\n        <el-form ref=\"poiForm\" :model=\"currentPoint\" size=\"small\">\n          <el-form-item prop=\"name\" label=\"名称\">\n            <el-input v-model=\"currentPoint.name\" allow-clear />\n          </el-form-item>\n          <el-form-item prop=\"name\" label=\"时间\">\n            <el-input v-model=\"currentPoint.time\" allow-clear />\n          </el-form-item>\n          <el-form-item label=\"x\">\n            <el-input v-model=\"currentPoint.lng\" :min=\"-180\" :max=\"180\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"y\">\n            <el-input v-model=\"currentPoint.lat\" :min=\"-90\" :max=\"90\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"描述\" style=\"margin-bottom: 0;\">\n            <el-input v-model=\"currentPoint.desc\" type=\"textarea\" />\n          </el-form-item>\n          <el-form-item label=\"图片\" style=\"margin-top: 10px;\">\n            <image-upload :fileList=\"fileList\" type=\"poi\" @listChange=\"listChange\" />\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"save\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 导航页面  -->\n    <div v-show=\"page == 'navigation'\">\n      <div style=\"padding: 20px;max-height: calc(100vh - 130px);overflow: auto;\">\n        <el-form size=\"small\" >\n          <el-form-item prop=\"startPlace\" label=\"输入起点\">\n            <el-input v-model=\"startPlace.name\" allow-clear/>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLng\" label=\"起点经度\">\n            <el-input v-model=\"startPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLat\" label=\"起点维度\">\n            <el-input v-model=\"startPlace.lat\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlace\" label=\"输入终点\">\n            <el-input v-model=\"endPlace.name\" allow-clear/>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLng\" label=\"终点经度\">\n            <el-input v-model=\"endPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLat\" label=\"终点维度\">\n            <el-input v-model=\"endPlace.lat\"/>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"searchRoute()\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Find from  '../comm/network2'\nimport DrawPoi from './DrawPoi'\nimport * as PathLayer from '../comm/PathLayer'\nconst pointerImg = require('@/assets/images/location64.png')\nimport * as FileSave from './FileSave'\nimport { getUuid } from '../biz/common'\nimport axios from 'axios'\n// 定义 drawPoi 变量\nlet drawPoi\n\nexport default {\n  name: 'PoiPanel',\n  data() {\n    return {\n      dataList: [], // 数据列表\n      page: 'list', // 当前页面（list 或 edit）\n      currentPoint: {\n        name: '',\n        time: ''\n      }, // 当前编辑的点信息\n      fileList: [], // 上传的文件列表\n      pointerImg: pointerImg, // 指针图片\n      drawing: false, // 是否正在绘制\n      keyWord: '', // 搜索关键字\n      nameList:[],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      startPlace:{ //出发点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      endPlace:{ //终点\n        name:'',\n        lng: '',\n        lat: ''\n      }\n    }\n  },\n  mounted() {\n    // 初始化 drawPoi 和 PathLayer\n    this.$nextTick(() => {\n      drawPoi = new DrawPoi(this)\n      PathLayer.init()\n    })\n    // 加载数据\n    this.loadData()\n  },\n  beforeDestroy() {\n    // 清除绘制\n    drawPoi.clear()\n    drawPoi.drawCancel()\n  },\n  methods: {\n\n    //导航\n    navigation(){\n      this.page='navigation' //跳转到导航界面\n    },\n    searchRoute(){\n      Find.findRoute()\n    },\n    //查询地名\n    searchByName(keyWord){\n      const list = []\n      FileSave.getList().then(res => {\n        const temp = res\n        if(temp){\n          temp.forEach(item =>{\n            if(item.name.includes(keyWord)){\n              list.push(item)\n            }\n          })\n        }\n      })\n      this.dataList = list\n    },\n    // 加载数据\n    loadData() {\n      FileSave.getList().then(res => {\n        console.log('res', res)\n        const list = res\n        if (res) {\n          // 处理图片\n          list.forEach(item => {\n            if (item.photos) {\n              const arr = item.photos.split('#')\n              if (arr.length > 0) {\n                item['photo0'] = arr[0]\n                item['photoArr'] = arr\n              }\n            }\n          })\n          this.dataList = list\n        } else {\n          this.dataList = []\n        }\n        const nameList = []\n        list.forEach(item =>{\n          if(item.name){\n              const [province,place] = item.name.split('-')\n              const provinces = nameList // 省份层级是树的根\n              const provinceNode = findOrCreateParent(provinces, province)\n              const places = provinceNode.children\n              findOrCreateParent(places, place) // 城市作为省份的子节点\n            }\n          }\n        )\n        this.nameList=nameList\n      })\n    },\n    // 开始绘制\n    startDraw() {\n      this.drawing = true\n      this.fileList = []\n      drawPoi.draw()\n      this.showAllLocations()\n    },\n    // 取消绘制\n    cancelDraw() {\n      drawPoi.drawCancel()\n      this.drawing = false\n    },\n    // 返回列表页面\n    backToList() {\n      this.page = 'list'\n      drawPoi.clear()\n      this.$refs.poiForm.resetFields()\n    },\n    // 保存数据\n    save() {\n      this.$refs.poiForm.validate(valid => {\n        if (!valid) {\n          return\n        }\n        const currentPoint = this.currentPoint\n\n        const param = {\n          name: currentPoint.name,\n          time: currentPoint.time,\n          longitude: currentPoint.lng,\n          latitude: currentPoint.lat,\n          altitude: currentPoint.altitude || 0,\n          photos: '',\n          address: '',\n          desc: currentPoint.desc || ''\n        }\n        const photos = []\n        console.log('this.fileList', this.fileList)\n        if (this.fileList.length > 0) {\n          this.fileList.forEach(f => {\n            photos.push(f.name)\n          })\n        }\n        if (photos.length > 0) {\n          param.photos = photos.join('#')\n        }\n\n        if (currentPoint.id) {\n          const item = this.dataList.find(d => d.id === currentPoint.id)\n          if (item) {\n            item.name = currentPoint.name || ''\n            item.time = currentPoint.time || ''\n            item.longitude = currentPoint.lng\n            item.latitude = currentPoint.lat\n            item.altitude = currentPoint.altitude || 0\n            item.photos = param.photos\n            item.address = param.address\n            item.desc = currentPoint.desc || ''\n            FileSave.create(this.dataList).then(res => {\n              this.$messageSuccess()\n              this.backToList()\n            })\n          }\n        } else {\n          param['id'] = getUuid()\n          this.dataList.push(param)\n          FileSave.create(this.dataList).then(res => {\n            this.$messageSuccess()\n            this.backToList()\n          })\n        }\n      })\n    },\n    // 飞到指定点\n    flyTo(item) {\n      drawPoi.flyTo(item)\n    },\n    // 编辑指定点\n    edit(item) {\n      this.fileList = []\n      const photos = item.photos\n      if (photos) {\n        const arr = photos.split('#')\n        arr.forEach(url => {\n          this.fileList.push({\n            status: 'done',\n            url: url,\n            name: url,\n            uid: getUuid()\n          })\n        })\n      }\n      drawPoi.edit(item)\n    },\n    // 删除指定点\n    deleteClick(item) {\n      const idx = this.dataList.findIndex(d => d.id === item.id)\n      this.dataList.splice(idx, 1)\n      FileSave.create(this.dataList).then(res => {\n        this.$messageSuccess()\n        this.loadData()\n        drawPoi.clearById(item.id)\n      })\n    },\n    // 文件列表变化\n    listChange(list) {\n      this.fileList = list\n    },\n    // 经纬度变化\n    latLngChange(v) {\n      if (this.currentPoint.lat && this.currentPoint.lng) {\n        drawPoi.setLatLng(this.currentPoint.lat, this.currentPoint.lng)\n      }\n    },\n    // 切换显示所有兴趣点\n    poiSwitch(e) {\n      if (e.target.checked) {\n        saveRecord('地图中查看所有兴趣点分布', '11', '1')\n        PoiContext.getLayer().show()\n        this.showAllLocations()\n      } else {\n        PoiContext.getLayer().hide()\n      }\n    },\n    // 显示路径\n    showPath(item) {\n      PathLayer.path()\n    },\n    // 显示所有位置\n    showAllLocations() {\n      this.dataList.forEach(item => {\n        drawPoi.showLocation(item)\n      })\n    }\n  }\n}\n// 辅助函数：在树中查找或添加父节点\nfunction findOrCreateParent(parents, parentName) {\n  let parent = parents.find(p => p.label === parentName);\n  if (!parent) {\n    parent = { label: parentName, children: [] };\n    parents.push(parent);\n  }\n  return parent;\n}\n</script>\n\n<style scoped>\n.poiImg {\n  width: 40px;\n  height: 40px;\n  border-radius: 5px;\n}\n</style>\n"]}]}