{"remainingRequest":"E:\\GitProject\\T-DBSCAN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\GitProject\\T-DBSCAN\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\GitProject\\T-DBSCAN\\src\\views\\AMyWork\\tools\\poi\\PoiPanel.vue","mtime":1729002832321},{"path":"E:\\GitProject\\T-DBSCAN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitProject\\T-DBSCAN\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\GitProject\\T-DBSCAN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\GitProject\\T-DBSCAN\\node_modules\\vue-loader\\lib\\index.js","mtime":1720856215506}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnICAvLyDlvJXlhaVMZWFmbGV05bqTCmltcG9ydCAnbGVhZmxldC1tYXJrZXJzLWNhbnZhcycKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9sZWFmbGV0Lm1hcmtlcmNsdXN0ZXInOwppbXBvcnQgJ2xlYWZsZXQubWFya2VyY2x1c3Rlci9kaXN0L01hcmtlckNsdXN0ZXIuY3NzJzsKaW1wb3J0ICdsZWFmbGV0Lm1hcmtlcmNsdXN0ZXIvZGlzdC9NYXJrZXJDbHVzdGVyLkRlZmF1bHQuY3NzJzsKaW1wb3J0ICJsZWFmbGV0LWNhbnZhcy1tYXJrZXIiCmltcG9ydCBQYXBhIGZyb20gJ3BhcGFwYXJzZScKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgRHJhd1BvaSBmcm9tICcuL0RyYXdQb2knCmltcG9ydCBEcmF3TmV3UG9pIGZyb20gJy4vRHJhd05ld1BvaScKaW1wb3J0ICogYXMgRmlsZVNhdmUgZnJvbSAnLi9GaWxlU2F2ZScKaW1wb3J0IHsgZ2V0VXVpZCB9IGZyb20gJy4uL2Jpei9jb21tb24nCmltcG9ydCBJY29uc0RpYWxvZyBmcm9tICcuLi8uLi8uLi90b29sL2J1aWxkL0ljb25zRGlhbG9nLnZ1ZScKaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnCmltcG9ydCB7IGRvdWdsYXNQZXVja2VyIH0gZnJvbSAnLi4vYWxnby9Eb3VnbGFzUGV1a2VyJwppbXBvcnQgeyBrTWVhbnMgfSBmcm9tICcuLi9hbGdvL2ttZWFucycgCmltcG9ydCB7IGNsYXJhbnMgfSBmcm9tICcuLi9hbGdvL2NsYXJhbnMnIAppbXBvcnQgeyBkYnNjYW4gfSBmcm9tICcuLi9hbGdvL2Ric2NhbicgCmltcG9ydCB7IG9wdGljcyB9IGZyb20gJy4uL2FsZ28vb3B0aWNzJyAKaW1wb3J0IHtFbGVQb2ludCwgUmVnaW9uLCBRdWFkVHJlZU5vZGV9IGZyb20gJy4uL2FsZ28vcHViTWV0aG9kcycKaW1wb3J0IHtjb252ZXJ0RGF0ZVN0cmluZ1RvVW5peCxpbnNlcnRFbGUscXVlcnlFbGUsCiAgICAgIGNvbnZlcnRVbml4VG9EYXRlU3RyaW5nLGdldENlbnRlclBvaW50LGlzVmFsaWRMYXRMbmd9IGZyb20gJy4uL2FsZ28vcHViTWV0aG9kcycKaW1wb3J0IHsgdGRic2NhbiB9IGZyb20gJy4uL2FsZ28vdGRic2NhbicgCmltcG9ydCAqIGFzIFBhdGhMYXllciBmcm9tICcuLi9jb21tL1BhdGhMYXllcicKY29uc3QgcG9pbnRlckltZyA9IHJlcXVpcmUoJ0AvYXNzZXRzL2ltYWdlcy9sb2NhdGlvbjY0LnBuZycpCmNvbnN0IGNsdVBvaW50SW1nID0gcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL3BvaW50LnBuZycpCmNvbnN0IGNsdUNlbnRlclBvaW50SW1nID0gcmVxdWlyZSgnQC9hc3NldHMvaW1hZ2VzL2NlbnRlclBvaW50LnBuZycpCmxldCBkcmF3TmV3UG9pCmxldCBkcmF3UG9pCmxldCBwcmV2aW91c0xheWVycyA9IFtdCmxldCBtYXJrZXJzTGlzdCA9IFtdCmxldCBtYXJrZXJzQ2FudmFzCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEljb25zRGlhbG9nIH0sCiAgbmFtZTogJ1BvaVBhbmVsJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VsZWN0Y2x1ZGF0YTogJycsCiAgICAgIC8v54Gw6bmkCiAgICAgIGdyZXlDcmFuZTpbXSwKICAgICAgLy/lsI/lpKnpuYUKICAgICAgY3lnbmU6W10sCiAgICAgIC8vIOm4n+exuzEKICAgICAgYmlyZE9uZTpbXSwKICAgICAgLy8g6bif57G7MgogICAgICBiaXJkVHdvOltdLAogICAgICAvLyDmlbDmja7mqKHlvI8KICAgICAgcGF0dGVybjoyLAogICAgICAvLyDlh6DkvZXnsbvlnosKICAgICAgZ2VvbWV0cmljVHlwZToxLAogICAgICAvLyDogZrlkIjnrpfms5UKICAgICAgY2x1c3RlclN0eWxlOicnLAogICAgICAvL+acgOWkp+WBnOeVmeaXtumVvwogICAgICBtYXhzdGF5VGltZTonJywKICAgICAgLy/mnIDnn63lgZznlZnml7bplb8KICAgICAgbWluc3RheVRpbWU6JycsCiAgICAgIC8v6IGa5ZCI5pa55byPCiAgICAgIGNsdXN0ZXJTdHlsZU9wdGlvbnM6W3sKICAgICAgICB2YWx1ZToxLAogICAgICAgIGxhYmVsOidDTEFSQU5TJwogICAgICB9LHsKICAgICAgICB2YWx1ZToyLAogICAgICAgIGxhYmVsOidLLU1lYW5zJwogICAgICB9LHsKICAgICAgICB2YWx1ZTozLAogICAgICAgIGxhYmVsOidEQlNDQU4nCiAgICAgIH0sewogICAgICAgIHZhbHVlOjQsCiAgICAgICAgbGFiZWw6J09QVElDUycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6NSwKICAgICAgICBsYWJlbDonVC1EQlNDQU4nCiAgICAgIH1dLAogICAgICAvLyDogZrlkIjmlbDmja4KICAgICAgY2x1c3RlckRhdGFPcHRpb25zOlt7CiAgICAgICAgdmFsdWU6MCwKICAgICAgICBsYWJlbDon54Gw6bmkJwogICAgICB9LHsKICAgICAgICB2YWx1ZToxLAogICAgICAgIGxhYmVsOiflsI/lpKnpuYUnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjIsCiAgICAgICAgbGFiZWw6J+m4n+exuzEnCiAgICAgIH0sewogICAgICAgIHZhbHVlOjMsCiAgICAgICAgbGFiZWw6J+m4n+exuzInCiAgICAgIH1dLAogICAgICBzaG93cG9pbnQ6ICcwJywKICAgICAgZGF0YUxpc3Q6IFtdLCAvLyDmlbDmja7liJfooagKICAgICAgcGFnZTogJ2xpc3QnLCAvLyDlvZPliY3pobXpnaLvvIhsaXN0IOaIliBlZGl077yJCiAgICAgIGN1cnJlbnRQb2ludDogewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHRpbWU6ICcnCiAgICAgIH0sIC8vIOW9k+WJjee8lui+keeahOeCueS/oeaBrwogICAgICBmaWxlTGlzdDogW10sIC8vIOS4iuS8oOeahOaWh+S7tuWIl+ihqAogICAgICBwb2ludGVySW1nOiBwb2ludGVySW1nLCAvLyDmjIfpkojlm77niYcKICAgICAgZHJhd2luZzogZmFsc2UsIC8vIOaYr+WQpuato+WcqOe7mOWItgogICAgICBuYXZkcmF3aW5nOiBmYWxzZSwKICAgICAga2V5V29yZDogJycsIC8vIOaQnOe0ouWFs+mUruWtlwogICAgICBuYW1lTGlzdDpbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgbGFiZWw6ICdsYWJlbCcKICAgICAgfSwKICAgICAgc3RhcnRQbGFjZTp7IC8v5Ye65Y+R54K5CiAgICAgICAgbmFtZTonJywKICAgICAgICBsbmc6ICcnLAogICAgICAgIGxhdDogJycKICAgICAgfSwKICAgICAgZW5kUGxhY2U6eyAvL+e7iOeCuQogICAgICAgIG5hbWU6JycsCiAgICAgICAgbG5nOiAnJywKICAgICAgICBsYXQ6ICcnCiAgICAgIH0sCiAgICAgIC8v5a+86Iiq5qC35byPCiAgICAgIG5hdnN0eWxlOiAwLAogICAgICBuYXZPcHRpb25zOlt7CiAgICAgICAgdmFsdWU6MCwKICAgICAgICBsYWJlbDon5pyA5b+r6Lev57q/JwogICAgICB9LHsKICAgICAgICB2YWx1ZToxLAogICAgICAgIGxhYmVsOifmnIDnn63ot6/nur8nCiAgICAgIH0sewogICAgICAgIHZhbHVlOjIsCiAgICAgICAgbGFiZWw6J+mBv+W8gOmrmOmAnycKICAgICAgfSx7CiAgICAgICAgdmFsdWU6MywKICAgICAgICBsYWJlbDon5q2l6KGMJwogICAgICB9XQogICAgfQogIH0sCiAgd2F0Y2g6IHsgIAogICAgY2x1c3RlclN0eWxlKG5ld1ZhbCkgeyAgCiAgICAgIGlmIChuZXdWYWwpIHsgLy8g56Gu5L+d5pyJ5YC86KKr6YCJ5LitICAKICAgICAgICB0aGlzLnBhdHRlcm4gPSAzIC8vIOiuvue9ruS4uuiBmuWQiCAgCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMucGF0dGVybiA9IDIKICAgICAgfSAgCiAgICB9LAogICAgcGF0dGVybihuZXdWYWwpewogICAgICBpZihuZXdWYWwgIT09IDMpewogICAgICAgIHRoaXMuY2x1c3RlclN0eWxlID0gJycKICAgICAgfQogICAgfSAgCiAgfSwKICBtb3VudGVkKCkgewogICAgLy8g5Yid5aeL5YyWIGRyYXdQb2kg5ZKMIFBhdGhMYXllcgogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBkcmF3TmV3UG9pID0gbmV3IERyYXdOZXdQb2kodGhpcykKICAgICAgZHJhd1BvaSA9IG5ldyBEcmF3UG9pKHRoaXMpCiAgICAgIFBhdGhMYXllci5pbml0KCkKICAgIH0pCiAgICAvLyDliqDovb3mlbDmja4KICAgIHRoaXMubG9hZERhdGEoKQogICAgdGhpcy5ncmV5Q3JhbmUgPSB0aGlzLmxvYWRDU1YoJ+eBsOm5pDguMS0xMS4zMOi9qOi/ueeCuScpCiAgICAvLyB0aGlzLmdyZXlDcmFuZSA9IHRoaXMubG9hZENTVign54Gw6bmkOC4xLTExLjMw6L2o6L+554K5JykKICAgIHRoaXMuY3lnbmUgPSB0aGlzLmxvYWRDU1YoJ+Wwj+Wkqem5hScpCiAgICB0aGlzLmJpcmRPbmUgPSB0aGlzLmxvYWRDU1YoJ+m4n+exuzEnKQogICAgdGhpcy5iaXJkVHdvID0gdGhpcy5sb2FkQ1NWKCfpuJ/nsbsyJykKICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyDmuIXpmaTnu5jliLYKICAgIGRyYXdOZXdQb2kuY2xlYXIoKQogICAgZHJhd05ld1BvaS5kcmF3Q2FuY2VsKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGNsdXNhdmUoKSB7CiAgICAgIGlmKG1hcmtlcnNDYW52YXMpewogICAgICAgIG1hcmtlcnNDYW52YXMucmVtb3ZlTWFya2VycyhtYXJrZXJzTGlzdCkKICAgICAgICBtYXJrZXJzQ2FudmFzLmNsZWFyKCkKICAgICAgICBtYXJrZXJzTGlzdCA9IFtdOwogICAgICB9CiAgICAgIC8vIOa4heeQhuWFiOWJjeWbvuWxggogICAgICBwcmV2aW91c0xheWVycy5mb3JFYWNoKGxheWVyID0+IHsKICAgICAgICBtYXAucmVtb3ZlTGF5ZXIobGF5ZXIpOwogICAgICB9KTsKICAgICAgcHJldmlvdXNMYXllcnMgPSBbXTsKICAgICAgLy8g5re75Yqg5paw55qETWFya2Vyc0NhbnZhcwogICAgICBtYXJrZXJzQ2FudmFzID0gbmV3IEwuTWFya2Vyc0NhbnZhcygpOwogICAgICBtYXJrZXJzQ2FudmFzLmFkZFRvKG1hcCk7CiAgICAgIHByZXZpb3VzTGF5ZXJzLnB1c2gobWFya2Vyc0NhbnZhcykKICAgICAgCiAgICAgIC8vIOWumuS5iemAmueUqOWbvuaghwogICAgICBjb25zdCBpY29uID0gTC5pY29uKHsKICAgICAgICBpY29uVXJsOiBjbHVQb2ludEltZywKICAgICAgICBpY29uU2l6ZTogWzEyLCAxMl0sCiAgICAgICAgaWNvbkFuY2hvcjogWzYsIDZdCiAgICAgIH0pOwogICAgICAvLyDlrprkuYnmoJbmga/lnLDlm77moIcKICAgICAgY29uc3QgaWNvbkNlbnRlciA9IEwuaWNvbih7CiAgICAgICAgaWNvblVybDogY2x1Q2VudGVyUG9pbnRJbWcsCiAgICAgICAgaWNvblNpemU6IFsxNSwgMTVdLAogICAgICAgIGljb25BbmNob3I6IFs2LCA2XQogICAgICB9KTsKCiAgICAgIC8vIOagueaNrum4n+exu+mAieaLqeaVsOaNrgogICAgICBsZXQgdGVtcF9iaXJkX2RhdGEgPSB0aGlzLmdldFNlbGVjdGVkQmlyZERhdGEoKTsKCiAgICAgIC8vIOayoeaciemAieaLqeiBmuexu+aWueW8j+aXtgogICAgICBpZiAodGhpcy5jbHVzdGVyU3R5bGUubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5kaXNwbGF5V2l0aG91dENsdXN0ZXJpbmcodGVtcF9iaXJkX2RhdGEsIG1hcmtlcnNDYW52YXMsIGljb24sdGhpcy5wYXR0ZXJuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpc3BsYXlXaXRoQ2x1c3RlcmluZyh0ZW1wX2JpcmRfZGF0YSwgbWFya2Vyc0NhbnZhcywgaWNvbkNlbnRlcik7CiAgICAgIH0KCiAgICAgIC8vIOW8ueeql+aPkOekuuW3sue7j+iBmuexu+e7k+adnwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOifogZrnsbvlrozmiJAnLAogICAgICAgIHR5cGU6J3N1Y2Nlc3MnCiAgICAgIH0pCgogICAgfSwKCiAgICAvLyDmoLnmja7pgInmi6nnmoTpuJ/nsbvov5Tlm57lr7nlupTmlbDmja4KICAgIGdldFNlbGVjdGVkQmlyZERhdGEoKSB7CiAgICAgIHN3aXRjaCh0aGlzLnNlbGVjdGNsdWRhdGEpIHsKICAgICAgICBjYXNlICfngbDpuaQnOgogICAgICAgICAgcmV0dXJuIHRoaXMuZ3JleUNyYW5lOwogICAgICAgIGNhc2UgJ+Wwj+Wkqem5hSc6CiAgICAgICAgICByZXR1cm4gdGhpcy5jeWduZTsKICAgICAgICBjYXNlICfpuJ/nsbsxJzoKICAgICAgICAgIHJldHVybiB0aGlzLmJpcmRPbmU7CiAgICAgICAgY2FzZSAn6bif57G7Mic6CiAgICAgICAgICByZXR1cm4gdGhpcy5iaXJkVHdvOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCgogICAgLy8g5LiN6IGa57G75pe255qE5bGV56S66YC76L6RCiAgICBkaXNwbGF5V2l0aG91dENsdXN0ZXJpbmcodGVtcF9iaXJkX2RhdGEsIG1hcmtlcnNDYW52YXMsIGljb24scGF0dGVybikgewogICAgICBpZihwYXR0ZXJuID09ICcxJyl7IC8v566A5YyW54mI5pys77yM6LCD55So5LqG5ruk5rOi566X5rOVCiAgICAgICAgdGVtcF9iaXJkX2RhdGEudGhlbihiaXJkQXJyID0+IHsKICAgICAgICAgIGxldCBsYXRsbmdzID0gW107CiAgICAgICAgICBiaXJkQXJyID0gZG91Z2xhc1BldWNrZXIoYmlyZEFyciwyNTAwMCkKICAgICAgICAgIGJpcmRBcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGlzVmFsaWRMYXRMbmcoaXRlbSkpIHsKICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSB0aGlzLmNyZWF0ZU1hcmtlcihpdGVtLCBpY29uKTsKICAgICAgICAgICAgICBtYXJrZXJzQ2FudmFzLmFkZE1hcmtlcihtYXJrZXIpOwogICAgICAgICAgICAgIG1hcmtlcnNMaXN0LnB1c2gobWFya2VyKTsKICAgICAgICAgICAgICBsYXRsbmdzLnB1c2goW2l0ZW0ubGF0LCBpdGVtLmxuZ10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaGFuZGxlR2VvbWV0cmljVHlwZShsYXRsbmdzLCBtYXJrZXJzQ2FudmFzKTsKICAgICAgICB9KTsKICAgICAgfWVsc2V7CiAgICAgICAgLy/mnIDljp/lp4vnmoTngrkKICAgICAgICB0ZW1wX2JpcmRfZGF0YS50aGVuKGJpcmRBcnIgPT4gewogICAgICAgICAgbGV0IGxhdGxuZ3MgPSBbXTsKICAgICAgICAgIGJpcmRBcnIuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICAgICAgaWYgKGlzVmFsaWRMYXRMbmcoaXRlbSkpIHsKICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSB0aGlzLmNyZWF0ZU1hcmtlcihpdGVtLCBpY29uKTsKICAgICAgICAgICAgICBtYXJrZXJzTGlzdC5wdXNoKG1hcmtlcik7CiAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXIobWFya2VyKTsKICAgICAgICAgICAgICBsYXRsbmdzLnB1c2goW2l0ZW0ubGF0LCBpdGVtLmxuZ10pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaGFuZGxlR2VvbWV0cmljVHlwZShsYXRsbmdzLCBtYXJrZXJzQ2FudmFzKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICAvLyDogZrnsbvlkI7nmoTlsZXnpLrpgLvovpEKICAgIGRpc3BsYXlXaXRoQ2x1c3RlcmluZyh0ZW1wX2JpcmRfZGF0YSwgbWFya2Vyc0NhbnZhcywgaWNvbikgewogICAgICB0ZW1wX2JpcmRfZGF0YS50aGVuKGJpcmRBcnIgPT4gewogICAgICAgIGxldCBjbHVzdGVyQ2VudGVycyA9IFtdOwogICAgICAgIGxldCBsYXRsbmdzID0gW107CiAgICAgICAgLy8g5bu656uL5Zub5Y+J5qCR57Si5byV5pa55L6/5ZCO57ut55qE5p+l6K+i5pON5L2cCiAgICAgICAgY29uc3Qgcm9vdFJlZ2lvbiA9IG5ldyBSZWdpb24oLTkwLCA5MCwgLTE4MCwgMTgwKTsKICAgICAgICBjb25zdCByb290ID0gbmV3IFF1YWRUcmVlTm9kZSgxLCByb290UmVnaW9uKTsKICAgICAgICB2YXIgcG9pbnRzID0gYmlyZEFycgogICAgICAgIHBvaW50cy5mb3JFYWNoKChwLCBpbmRleCkgPT4gewogICAgICAgICAgICBwLmluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgIGluc2VydEVsZShyb290LCBwKTsKICAgICAgICB9KTsKICAgICAgICBzd2l0Y2godGhpcy5jbHVzdGVyU3R5bGUpIHsKICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgY2x1c3RlckNlbnRlcnMgPSBjbGFyYW5zKHBvaW50cywgMjAsIDUsIDEwMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBjbHVzdGVyQ2VudGVycyA9IGtNZWFucyhwb2ludHMsIDIwKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNsdXN0ZXJDZW50ZXJzID0gZGJzY2FuKHBvaW50cywgMjUsIDcwKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNsdXN0ZXJDZW50ZXJzID0gIG9wdGljcyhwb2ludHMsNiwyMCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBpZih0aGlzLm1heHN0YXlUaW1lID09ICcnKXsKICAgICAgICAgICAgICB0aGlzLm1heHN0YXlUaW1lID0gMwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRoaXMubWluc3RheVRpbWUgPT0gJycpewogICAgICAgICAgICAgIHRoaXMubWluc3RheVRpbWUgPSAzCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZ3BzUG9pbnRzID0gW10KICAgICAgICAgICAgYmlyZEFyci5mb3JFYWNoKGl0ZW09PnsKICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gbmV3IEVsZVBvaW50KHBhcnNlRmxvYXQoaXRlbS5sYXQpLCBwYXJzZUZsb2F0KGl0ZW0ubG5nKSwgY29udmVydERhdGVTdHJpbmdUb1VuaXgoaXRlbS50aW1lKSwgZ3BzUG9pbnRzLmxlbmd0aCk7CiAgICAgICAgICAgICAgZ3BzUG9pbnRzLnB1c2godGVtcCk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB7Y2x1c3RlcnMsQ29yZVBvaW50c30gPSB0ZGJzY2FuKGdwc1BvaW50cywyNTAwMCwgdGhpcy5taW5zdGF5VGltZSwgdGhpcy5tYXhzdGF5VGltZSkKICAgICAgICAgICAgY29uc29sZS5sb2coY2x1c3RlcnMpCiAgICAgICAgICAgIGZvcihjb25zdCBwIG9mIENvcmVQb2ludHMpewogICAgICAgICAgICAgICAgdmFyIG1heHN0YXlUaW1lID0gMAogICAgICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBiaXJkQXJyW3AuaW5kZXhdCiAgICAgICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBwb2ludC50aW1lCiAgICAgICAgICAgICAgICB2YXIgZW5kVGltZSA9IHBvaW50LnRpbWUKICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVQID0gY29udmVydERhdGVTdHJpbmdUb1VuaXgocG9pbnQudGltZSkKICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7aTxjbHVzdGVycy5sZW5ndGg7aSsrKXsKICAgICAgICAgICAgICAgICAgaWYoY2x1c3RlcnNbcC5pbmRleF0gPT0gY2x1c3RlcnNbaV0pewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVRID0gY29udmVydERhdGVTdHJpbmdUb1VuaXgoYmlyZEFycltpXS50aW1lKQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc1RpbWUgPSBNYXRoLmFicyh0aW1lUCAtIHRpbWVRKS8oNjAqNjAqMjQpCiAgICAgICAgICAgICAgICAgICAgaWYoZGlzVGltZT49bWF4c3RheVRpbWUpewogICAgICAgICAgICAgICAgICAgICAgbWF4c3RheVRpbWUgPSBkaXNUaW1lCiAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gYmlyZEFycltpXS50aW1lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjbHVzdGVyQ2VudGVycy5wdXNoKHttYXhzdGF5VGltZTptYXhzdGF5VGltZSxzdGFydFRpbWVTdHI6c3RhcnRUaW1lLAogICAgICAgICAgICAgICAgICBlbmRUaW1lU3RyOmVuZFRpbWUsY2VudGVyUG9pbnQ6cG9pbnQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIC8vIGlmKGNsdXN0ZXJDZW50ZXJzLmxlbmd0aD49MTUpewogICAgICAgIC8vICAgY2x1c3RlckNlbnRlcnMgPSBkb3VnbGFzUGV1Y2tlcihjbHVzdGVyQ2VudGVycyw1MDAwKQogICAgICAgIC8vIH0KICAgICAgICBpZih0aGlzLmNsdXN0ZXJTdHlsZSA9PSA1IHx8IHRoaXMuY2x1c3RlclN0eWxlID09IDQpewogICAgICAgICAgY2x1c3RlckNlbnRlcnMuZm9yRWFjaChpdGVtID0+ewogICAgICAgICAgICBjb25zdCBjZW50ZXJQb2ludCA9IGl0ZW0uY2VudGVyUG9pbnQKICAgICAgICAgICAgY29uc3QgbWF4c3RheVRpbWUgPSBpdGVtLm1heHN0YXlUaW1lCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZVN0ciA9IGl0ZW0uc3RhcnRUaW1lU3RyCiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWVTdHIgPSBpdGVtLmVuZFRpbWVTdHIKICAgICAgICAgICAgY29uc3QgbWFya2VyID0gdGhpcy5jcmVhdGVDZW50ZXJNYXJrZXIoe2NlbnRlclBvaW50LG1heHN0YXlUaW1lLHN0YXJ0VGltZVN0cixlbmRUaW1lU3RyfSwgaWNvbik7CiAgICAgICAgICAgIG1hcmtlcnNDYW52YXMuYWRkTWFya2VyKG1hcmtlcik7CiAgICAgICAgICAgIHByZXZpb3VzTGF5ZXJzLnB1c2gobWFya2VyKQogICAgICAgICAgICBtYXJrZXJzTGlzdC5wdXNoKG1hcmtlcikKICAgICAgICAgICAgbGF0bG5ncy5wdXNoKFtjZW50ZXJQb2ludC5sYXQsIGNlbnRlclBvaW50LmxuZ10pOwogICAgICAgICAgfSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIC8vIOiuoeeul+WBnOath+aXtumXtCDlgZrliIbnuqfmuLLmn5MKICAgICAgICAgIGNsdXN0ZXJDZW50ZXJzLmZvckVhY2goaXRlbSA9PnsKICAgICAgICAgICAgY29uc3QgcG9pbnQgID0gbmV3IEVsZVBvaW50KGl0ZW0ubGF0LGl0ZW0ubG5nLGNvbnZlcnREYXRlU3RyaW5nVG9Vbml4KGl0ZW0udGltZSksaXRlbS5pbmRleCkKICAgICAgICAgICAgY29uc3QgRXBzUmVzdWx0cyA9IFtdCiAgICAgICAgICAgIHF1ZXJ5RWxlKHJvb3QscG9pbnQsRXBzUmVzdWx0cywyNTAwMCkKICAgICAgICAgICAgY29uc3QgY2VudGVyUG9pbnQgPSBnZXRDZW50ZXJQb2ludChFcHNSZXN1bHRzKQogICAgICAgICAgICBjb25zdCB0aW1lcyA9IEVwc1Jlc3VsdHMubWFwKHBvaW50ID0+IGNvbnZlcnREYXRlU3RyaW5nVG9Vbml4KHBvaW50LnRpbWUpKQogICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBuZXcgRGF0ZShNYXRoLm1pbiguLi50aW1lcykpCiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZShNYXRoLm1heCguLi50aW1lcykpCiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZVN0ciA9IGNvbnZlcnRVbml4VG9EYXRlU3RyaW5nKHN0YXJ0VGltZSkKICAgICAgICAgICAgY29uc3QgZW5kVGltZVN0ciA9IGNvbnZlcnRVbml4VG9EYXRlU3RyaW5nKGVuZFRpbWUpCiAgICAgICAgICAgIGNvbnN0IG1heHN0YXlUaW1lID0gKE1hdGgubWF4KC4uLnRpbWVzKSAtIE1hdGgubWluKC4uLnRpbWVzKSkvKDYwKjYwKjI0KQogICAgICAgICAgICBpZihpc1ZhbGlkTGF0TG5nKGNlbnRlclBvaW50KSl7CiAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gdGhpcy5jcmVhdGVDZW50ZXJNYXJrZXIoe2NlbnRlclBvaW50LG1heHN0YXlUaW1lLHN0YXJ0VGltZVN0cixlbmRUaW1lU3RyfSwgaWNvbik7CiAgICAgICAgICAgICAgbWFya2Vyc0NhbnZhcy5hZGRNYXJrZXIobWFya2VyKTsKICAgICAgICAgICAgICBwcmV2aW91c0xheWVycy5wdXNoKG1hcmtlcikKICAgICAgICAgICAgICBtYXJrZXJzTGlzdC5wdXNoKG1hcmtlcikKICAgICAgICAgICAgICBsYXRsbmdzLnB1c2goW2NlbnRlclBvaW50LmxhdCwgY2VudGVyUG9pbnQubG5nXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMuaGFuZGxlR2VvbWV0cmljVHlwZShsYXRsbmdzLCBtYXJrZXJzQ2FudmFzKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Yib5bu65qCW5oGv5Zyw54K55L2N77yM5pe26Ze06LaK6ZW/77yMaWNvbueahHNpemXlsIbkvJrpmo/nnYDosIPmlbQKICAgIGNyZWF0ZUNlbnRlck1hcmtlcihpdGVtLGljb24pewogICAgICAgcmV0dXJuIEwubWFya2VyKFtpdGVtLmNlbnRlclBvaW50LmxhdCwgaXRlbS5jZW50ZXJQb2ludC5sbmddLCB7IGljb24gfSkKICAgICAgICAuYmluZFBvcHVwKGDlgZznlZnml7bpl7Q6JHtpdGVtLm1heHN0YXlUaW1lLnRvRml4ZWQoMil95aSpPHA+CiAgICAgICAgICDlvIDlp4vml7bpl7Q6JHtpdGVtLnN0YXJ0VGltZVN0cn08cD4KICAgICAgICAgIOe7k+adn+aXtumXtDoke2l0ZW0uZW5kVGltZVN0cn08cD4KICAgICAgICAgIOe7j+W6pjoke3BhcnNlRmxvYXQoaXRlbS5jZW50ZXJQb2ludC5sbmcpLnRvRml4ZWQoNSl9PHA+57qs5bqmOiR7cGFyc2VGbG9hdChpdGVtLmNlbnRlclBvaW50LmxhdCkudG9GaXhlZCg1KX1gKQogICAgICAgIC5vbih7CiAgICAgICAgICBtb3VzZW92ZXIoZSkgeyB0aGlzLm9wZW5Qb3B1cCgpOyB9LAogICAgICAgICAgbW91c2VvdXQoZSkgeyB0aGlzLmNsb3NlUG9wdXAoKTsgfQogICAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIm+W7uuaZrumAmueCueagh+iusAogICAgY3JlYXRlTWFya2VyKGl0ZW0sIGljb24pIHsKICAgICAgcmV0dXJuIEwubWFya2VyKFtpdGVtLmxhdCwgaXRlbS5sbmddLCB7IGljb24gfSkKICAgICAgICAuYmluZFBvcHVwKGDml7bpl7Q6JHtpdGVtLnRpbWV9PHA+57uP5bqmOiR7cGFyc2VGbG9hdChpdGVtLmxuZykudG9GaXhlZCg1KX08cD7nuqzluqY6JHtwYXJzZUZsb2F0KGl0ZW0ubGF0KS50b0ZpeGVkKDUpfWApCiAgICAgICAgLm9uKHsKICAgICAgICAgIG1vdXNlb3ZlcihlKSB7IHRoaXMub3BlblBvcHVwKCk7IH0sCiAgICAgICAgICBtb3VzZW91dChlKSB7IHRoaXMuY2xvc2VQb3B1cCgpOyB9CiAgICAgICAgfSk7CiAgICB9LAoKICAgIC8vIOagueaNruWHoOS9leexu+Wei+e7mOWItgogICAgaGFuZGxlR2VvbWV0cmljVHlwZShsYXRsbmdzLCBtYXJrZXJzQ2FudmFzKSB7CiAgICAgIGlmICh0aGlzLmdlb21ldHJpY1R5cGUgIT0gJzEnKSB7CiAgICAgICAgY29uc3QgcG9seWxpbmUgPSBMLnBvbHlsaW5lKGxhdGxuZ3MsIHsgY29sb3I6ICdyZWQnLCB3ZWlnaHQ6IDMgfSkuYWRkVG8obWFwKTsKICAgICAgICBjb25zdCBkZWNvcmF0b3IgPSBMLnBvbHlsaW5lRGVjb3JhdG9yKHBvbHlsaW5lLCB7CiAgICAgICAgICBwYXR0ZXJuczogWwogICAgICAgICAgICB7IG9mZnNldDogMCwgcmVwZWF0OiAzNSwgc3ltYm9sOiBMLlN5bWJvbC5hcnJvd0hlYWQoewogICAgICAgICAgICAgIHBpeGVsU2l6ZTogNSwKICAgICAgICAgICAgICBoZWFkQW5nbGU6IDc1LAogICAgICAgICAgICAgIHBvbHlnb246IGZhbHNlLAogICAgICAgICAgICAgIHBhdGhPcHRpb25zOiB7IHN0cm9rZTogdHJ1ZSwgd2VpZ2h0OiAyLCBjb2xvcjogJ2JsdWUnIH0KICAgICAgICAgICAgfSl9CiAgICAgICAgICBdCiAgICAgICAgfSkuYWRkVG8obWFwKTsKICAgICAgICBwcmV2aW91c0xheWVycy5wdXNoKGRlY29yYXRvcik7CiAgICAgICAgcHJldmlvdXNMYXllcnMucHVzaChwb2x5bGluZSk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDor7vlj5Zjc3bmlofku7YKICAgIGFzeW5jIGxvYWRDU1YoZGF0YSkgeyAgICAKICAgICAgY29uc3QgY3N2VXJsID0gYC4uL3Jlc291cmNlLyR7ZGF0YX0uY3N2YDsgICAgCiAgICAgIHRyeSB7ICAgIAogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY3N2VXJsKTsgICAgCiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgdGhyb3cgbmV3IEVycm9yKCdOZXR3b3JrIHJlc3BvbnNlIHdhcyBub3Qgb2snKTsgICAgCiAgICAgICAgY29uc3QgY3N2ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpOyAgICAKICAgICAgICBjb25zdCByZXN1bHRzID0gUGFwYS5wYXJzZShjc3YsIHsgIAogICAgICAgICAgaGVhZGVyOiB0cnVlLCAgCiAgICAgICAgICB0cmFuc2Zvcm06IGZ1bmN0aW9uKHZhbHVlLCBmaWVsZCkgeyAgCiAgICAgICAgICAgIGlmIChmaWVsZCA9PT0gJ2xuZycgfHwgZmllbGQgPT09ICdsYXQnKSB7ICAKICAgICAgICAgICAgICBjb25zdCBudW0gPSBwYXJzZUZsb2F0KHZhbHVlKTsgIAogICAgICAgICAgICAgIHJldHVybiBpc05hTihudW0pID8gdmFsdWUgOiBudW07ICAKICAgICAgICAgICAgfSAgCiAgICAgICAgICAgIHJldHVybiB2YWx1ZTsgIAogICAgICAgICAgfSAgCiAgICAgICAgfSk7ICAgCiAgICAgICAgCiAgICAgICAgLy8g5oyJ54Wn56ys5LiA5YiX5pe26Ze05a2X56ym5Liy5o6S5bqPCiAgICAgICAgY29uc3Qgc29ydGVkRGF0YSA9IHJlc3VsdHMuZGF0YS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICBjb25zdCB0aW1lQSA9IGNvbnZlcnREYXRlU3RyaW5nVG9Vbml4KGFbT2JqZWN0LmtleXMoYSlbMF1dKTsgLy8g56ys5LiA5YiX55qE5pe26Ze05YC8CiAgICAgICAgICBjb25zdCB0aW1lQiA9IGNvbnZlcnREYXRlU3RyaW5nVG9Vbml4KGJbT2JqZWN0LmtleXMoYilbMF1dKTsKICAgICAgICAgIHJldHVybiB0aW1lQSAtIHRpbWVCOyAvLyDljYfluo/mjpLliJcKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICByZXR1cm4gc29ydGVkRGF0YTsgICAgCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7ICAgIAogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgQ1NWOicsIGVycm9yKTsgICAgCiAgICAgICAgdGhyb3cgZXJyb3I7IAogICAgICB9ICAgIAogICAgfSwKICAgIC8v5qC55o2u5Zyw5ZCN5p+l5om+57uP57qs5bqmCiAgICBzZWFyY2hMbmdCeU5hbWUob3B0aW9ucyl7CiAgICAgIC8v5rmW5Y2X55yB546v55CD5L+h5aOr5YWs5Y+4CiAgICAgIC8v6K+35rGC77yaIGh0dHA6Ly9hcGkudGlhbmRpdHUuZ292LmNuL2dlb2NvZGVyP2RzPXsia2V5V29yZCI6IuWMl+S6rOW4guW7tuW6huWMuuW7tuW6humVh+iOsuiKseaxoOadkeWJjeihlzUw5aSV6Ziz57qi5YW76ICB6ZmiIn0mdGs95oKo55qE5a+G6ZKlCiAgICAgIGF4aW9zLmdldCgnaHR0cDovL2FwaS50aWFuZGl0dS5nb3YuY24vZ2VvY29kZXI/ZHM9eyJrZXlXb3JkIjoiJyArIG9wdGlvbnMubmFtZSArICcifSZ0az04OWRlYTNlYWI1NjFmMGRmYjk4NjdlNTMxNDE1ZTAxNScpLnRoZW4ocmVzID0+IHsKICAgICAgICBvcHRpb25zLmxuZz1yZXMuZGF0YS5sb2NhdGlvbi5sb24KICAgICAgICBvcHRpb25zLmxhdD1yZXMuZGF0YS5sb2NhdGlvbi5sYXQKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyByb3V0ZTonLCBlcnIpCiAgICAgIH0pIAogICAgfSwKICAgIC8v54K55Ye76IqC54K5CiAgICBoYW5kbGVOb2RlQ2xpY2soZGF0YSl7CiAgICAgIGNvbnNvbGUubG9nKCfoioLngrnmlbDmja4nLGRhdGEpCiAgICAgIGNvbnNvbGUubG9nKCfoioLngrlJRCcsZGF0YS4kdHJlZU5vZGVJZCkKICAgIH0sCiAgICAvL+WvvOiIqgogICAgbmF2aWdhdGlvbigpewogICAgICB0aGlzLnBhZ2U9J25hdmlnYXRpb24nIC8v6Lez6L2s5Yiw5a+86Iiq55WM6Z2iCiAgICAgIHRoaXMubmF2ZHJhd2luZyA9IHRydWUKICAgICAgZHJhd1BvaS5kcmF3KCkKICAgIH0sCiAgICAvL+e7mOWItuWvvOiIqui3r+e6vwogICAgc2VhcmNoUm91dGUoKXsKICAgICAgdGhpcy5zaG93UGF0aCh0aGlzLnN0YXJ0UGxhY2UsdGhpcy5lbmRQbGFjZSx0aGlzLm5hdnN0eWxlKQogICAgfSwKICAgIC8v5p+l6K+i5Zyw5ZCNCiAgICBzZWFyY2hCeU5hbWUoa2V5V29yZCl7CiAgICAgIGNvbnN0IGxpc3QgPSBbXQogICAgICBGaWxlU2F2ZS5nZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnN0IHRlbXAgPSByZXMKICAgICAgICBpZih0ZW1wKXsKICAgICAgICAgIHRlbXAuZm9yRWFjaChpdGVtID0+ewogICAgICAgICAgICBpZihpdGVtLm5hbWUuaW5jbHVkZXMoa2V5V29yZCkpewogICAgICAgICAgICAgIGxpc3QucHVzaChpdGVtKQogICAgICAgICAgICB9CiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5kYXRhTGlzdCA9IGxpc3QKICAgIH0sCiAgICAvLyDliqDovb3mlbDmja4KICAgIGxvYWREYXRhKCkgewogICAgICBGaWxlU2F2ZS5nZXRMaXN0KCkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpCiAgICAgICAgY29uc3QgbGlzdCA9IHJlcwogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIC8vIOWkhOeQhuWbvueJhwogICAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgICBpZiAoaXRlbS5waG90b3MpIHsKICAgICAgICAgICAgICBjb25zdCBhcnIgPSBpdGVtLnBob3Rvcy5zcGxpdCgnIycpCiAgICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBpdGVtWydwaG90bzAnXSA9IGFyclswXQogICAgICAgICAgICAgICAgaXRlbVsncGhvdG9BcnInXSA9IGFycgogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBsaXN0CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGF0YUxpc3QgPSBbXQogICAgICAgIH0KICAgICAgICBjb25zdCBuYW1lTGlzdCA9IFtdCiAgICAgICAgbGlzdC5mb3JFYWNoKGl0ZW0gPT57CiAgICAgICAgICBpZihpdGVtLm5hbWUpewogICAgICAgICAgICAgIGNvbnN0IFtwcm92aW5jZSxwbGFjZV0gPSBpdGVtLm5hbWUuc3BsaXQoJy0nKQogICAgICAgICAgICAgIGNvbnN0IHByb3ZpbmNlcyA9IG5hbWVMaXN0IC8vIOecgeS7veWxgue6p+aYr+agkeeahOaguQogICAgICAgICAgICAgIGNvbnN0IHByb3ZpbmNlTm9kZSA9IGZpbmRPckNyZWF0ZVBhcmVudChwcm92aW5jZXMsIHByb3ZpbmNlKQogICAgICAgICAgICAgIGNvbnN0IHBsYWNlcyA9IHByb3ZpbmNlTm9kZS5jaGlsZHJlbgogICAgICAgICAgICAgIGZpbmRPckNyZWF0ZVBhcmVudChwbGFjZXMsIHBsYWNlKSAvLyDln47luILkvZzkuLrnnIHku73nmoTlrZDoioLngrkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICkKICAgICAgICB0aGlzLm5hbWVMaXN0PW5hbWVMaXN0CiAgICAgIH0pCiAgICB9LAogICAgLy8g6IGa5ZCI5YiG5p6QCiAgICBjbHVzdGVyQW5hbHlzaXMoKXsKICAgICAgdGhpcy5wYWdlID0gJ2NsdXN0ZXInCiAgICAgIGRyYXdOZXdQb2kuY2xlYXIoKQogICAgICBkcmF3UG9pLmNsZWFyKCkKICAgICAgUGF0aExheWVyLmNsZWFyKCkKICAgIH0sCiAgICAvLyDlvIDlp4vnu5jliLYKICAgIHN0YXJ0RHJhdygpIHsKICAgICAgdGhpcy5kcmF3aW5nID0gdHJ1ZQogICAgICB0aGlzLmZpbGVMaXN0ID0gW10KICAgICAgZHJhd05ld1BvaS5kcmF3KCkKICAgIH0sCiAgICAvLyDlj5bmtojnu5jliLYKICAgIGNhbmNlbERyYXcoKSB7CiAgICAgIGRyYXdOZXdQb2kuZHJhd0NhbmNlbCgpCiAgICAgIHRoaXMuZHJhd2luZyA9IGZhbHNlCiAgICB9LAogICAgLy8g6L+U5Zue5YiX6KGo6aG16Z2iCiAgICBiYWNrVG9MaXN0KCkgewogICAgICB0aGlzLnBhZ2UgPSAnbGlzdCcKICAgICAgZHJhd05ld1BvaS5jbGVhcigpCiAgICAgIGRyYXdQb2kuY2xlYXIoKQogICAgICBQYXRoTGF5ZXIuY2xlYXIoKQogICAgICB0aGlzLm5hdmRyYXdpbmcgPSBmYWxzZQogICAgICBpZih0aGlzLnN0YXJ0UGxhY2UhPScnKXsKICAgICAgICB0aGlzLnN0YXJ0UGxhY2UubmFtZT0nJwogICAgICAgIHRoaXMuc3RhcnRQbGFjZS5sbmc9JycKICAgICAgICB0aGlzLnN0YXJ0UGxhY2UubGF0PScnCiAgICAgICAgdGhpcy5lbmRQbGFjZS5uYW1lPScnCiAgICAgICAgdGhpcy5lbmRQbGFjZS5sbmc9JycKICAgICAgICB0aGlzLmVuZFBsYWNlLmxhdD0nJwoKICAgICAgfQogICAgICB0aGlzLiRyZWZzLnBvaUZvcm0ucmVzZXRGaWVsZHMoKQogICAgfSwKICAgIC8vIOS/neWtmOaVsOaNrgogICAgc2F2ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5wb2lGb3JtLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgY29uc3QgY3VycmVudFBvaW50ID0gdGhpcy5jdXJyZW50UG9pbnQKCiAgICAgICAgY29uc3QgcGFyYW0gPSB7CiAgICAgICAgICBuYW1lOiBjdXJyZW50UG9pbnQubmFtZSwKICAgICAgICAgIHRpbWU6IGN1cnJlbnRQb2ludC50aW1lLAogICAgICAgICAgbG9uZ2l0dWRlOiBjdXJyZW50UG9pbnQubG5nLAogICAgICAgICAgbGF0aXR1ZGU6IGN1cnJlbnRQb2ludC5sYXQsCiAgICAgICAgICBhbHRpdHVkZTogY3VycmVudFBvaW50LmFsdGl0dWRlIHx8IDAsCiAgICAgICAgICBwaG90b3M6ICcnLAogICAgICAgICAgYWRkcmVzczogJycsCiAgICAgICAgICBkZXNjOiBjdXJyZW50UG9pbnQuZGVzYyB8fCAnJwogICAgICAgIH0KICAgICAgICBjb25zdCBwaG90b3MgPSBbXQogICAgICAgIGlmICh0aGlzLmZpbGVMaXN0Lmxlbmd0aCA+IDApIHsKICAgICAgICAgIHRoaXMuZmlsZUxpc3QuZm9yRWFjaChmID0+IHsKICAgICAgICAgICAgcGhvdG9zLnB1c2goZi5uYW1lKQogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgICAgaWYgKHBob3Rvcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICBwYXJhbS5waG90b3MgPSBwaG90b3Muam9pbignIycpCiAgICAgICAgfQoKICAgICAgICBpZiAoY3VycmVudFBvaW50LmlkKSB7CiAgICAgICAgICBjb25zdCBpdGVtID0gdGhpcy5kYXRhTGlzdC5maW5kKGQgPT4gZC5pZCA9PT0gY3VycmVudFBvaW50LmlkKQogICAgICAgICAgaWYgKGl0ZW0pIHsKICAgICAgICAgICAgaXRlbS5uYW1lID0gY3VycmVudFBvaW50Lm5hbWUgfHwgJycKICAgICAgICAgICAgaXRlbS50aW1lID0gY3VycmVudFBvaW50LnRpbWUgfHwgJycKICAgICAgICAgICAgaXRlbS5sb25naXR1ZGUgPSBjdXJyZW50UG9pbnQubG5nCiAgICAgICAgICAgIGl0ZW0ubGF0aXR1ZGUgPSBjdXJyZW50UG9pbnQubGF0CiAgICAgICAgICAgIGl0ZW0uYWx0aXR1ZGUgPSBjdXJyZW50UG9pbnQuYWx0aXR1ZGUgfHwgMAogICAgICAgICAgICBpdGVtLnBob3RvcyA9IHBhcmFtLnBob3RvcwogICAgICAgICAgICBpdGVtLmFkZHJlc3MgPSBwYXJhbS5hZGRyZXNzCiAgICAgICAgICAgIGl0ZW0uZGVzYyA9IGN1cnJlbnRQb2ludC5kZXNjIHx8ICcnCiAgICAgICAgICAgIEZpbGVTYXZlLmNyZWF0ZSh0aGlzLmRhdGFMaXN0KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZVN1Y2Nlc3MoKQogICAgICAgICAgICAgIHRoaXMuYmFja1RvTGlzdCgpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHBhcmFtWydpZCddID0gZ2V0VXVpZCgpCiAgICAgICAgICB0aGlzLmRhdGFMaXN0LnB1c2gocGFyYW0pCiAgICAgICAgICBGaWxlU2F2ZS5jcmVhdGUodGhpcy5kYXRhTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlU3VjY2VzcygpCiAgICAgICAgICAgIHRoaXMuYmFja1RvTGlzdCgpCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB0aGlzLmxvYWREYXRhKCkKICAgICAgfSkKICAgIH0sCiAgICAvLyDpo57liLDmjIflrprngrkKICAgIGZseVRvKGl0ZW0pIHsKICAgICAgZHJhd05ld1BvaS5mbHlUbyhpdGVtKQogICAgfSwKICAgIC8vIOe8lui+keaMh+WumueCuQogICAgZWRpdChpdGVtKSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBbXQogICAgICBjb25zdCBwaG90b3MgPSBpdGVtLnBob3RvcwogICAgICBpZiAocGhvdG9zKSB7CiAgICAgICAgY29uc3QgYXJyID0gcGhvdG9zLnNwbGl0KCcjJykKICAgICAgICBhcnIuZm9yRWFjaCh1cmwgPT4gewogICAgICAgICAgdGhpcy5maWxlTGlzdC5wdXNoKHsKICAgICAgICAgICAgc3RhdHVzOiAnZG9uZScsCiAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICBuYW1lOiB1cmwsCiAgICAgICAgICAgIHVpZDogZ2V0VXVpZCgpCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0KICAgICAgZHJhd05ld1BvaS5lZGl0KGl0ZW0pCiAgICB9LAogICAgLy8g5Yig6Zmk5oyH5a6a54K5CiAgICBkZWxldGVDbGljayhpdGVtKSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuZGF0YUxpc3QuZmluZEluZGV4KGQgPT4gZC5pZCA9PT0gaXRlbS5pZCkKICAgICAgdGhpcy5kYXRhTGlzdC5zcGxpY2UoaWR4LCAxKQogICAgICBGaWxlU2F2ZS5jcmVhdGUodGhpcy5kYXRhTGlzdCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2VTdWNjZXNzKCkKICAgICAgICB0aGlzLmxvYWREYXRhKCkKICAgICAgICBkcmF3TmV3UG9pLmNsZWFyQnlJZChpdGVtLmlkKQogICAgICB9KQogICAgfSwKICAgIC8vIOaWh+S7tuWIl+ihqOWPmOWMlgogICAgbGlzdENoYW5nZShsaXN0KSB7CiAgICAgIHRoaXMuZmlsZUxpc3QgPSBsaXN0CiAgICB9LAogICAgLy8g57uP57qs5bqm5Y+Y5YyWCiAgICBsYXRMbmdDaGFuZ2UodikgewogICAgICBpZiAodGhpcy5jdXJyZW50UG9pbnQubGF0ICYmIHRoaXMuY3VycmVudFBvaW50LmxuZykgewogICAgICAgIGRyYXdOZXdQb2kuc2V0TGF0TG5nKHRoaXMuY3VycmVudFBvaW50LmxhdCwgdGhpcy5jdXJyZW50UG9pbnQubG5nKQogICAgICB9CiAgICB9LAogICAgLy8g5pi+56S66Lev5b6ECiAgICBzaG93UGF0aChzdGFydCxlbmQsc3R5bGUpIHsKICAgICAgUGF0aExheWVyLnBhdGgoc3RhcnQsZW5kLHN0eWxlKQogICAgfQogIH0KfQovLyDovoXliqnlh73mlbDvvJrlnKjmoJHkuK3mn6Xmib7miJbmt7vliqDniLboioLngrkKZnVuY3Rpb24gZmluZE9yQ3JlYXRlUGFyZW50KHBhcmVudHMsIHBhcmVudE5hbWUpIHsKICBsZXQgcGFyZW50ID0gcGFyZW50cy5maW5kKHAgPT4gcC5sYWJlbCA9PT0gcGFyZW50TmFtZSk7CiAgaWYgKCFwYXJlbnQpIHsKICAgIHBhcmVudCA9IHsgbGFiZWw6IHBhcmVudE5hbWUsIGNoaWxkcmVuOiBbXSB9OwogICAgcGFyZW50cy5wdXNoKHBhcmVudCk7CiAgfQogIHJldHVybiBwYXJlbnQ7Cn0KCg=="},{"version":3,"sources":["PoiPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PoiPanel.vue","sourceRoot":"src/views/AMyWork/tools/poi","sourcesContent":["<template>\n  <div style=\"overflow: auto;width: 260px;background: white;\">\n    <!-- 列表页面 -->\n    <div v-show=\"page == 'list'\" class=\"poiPage\" style=\"margin-top: 10px;\">\n      <section style=\"margin: 0 20px;color:black;\">\n        <!-- 全选按钮和标绘按钮 -->\n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\" icon=\"el-icon-map-location\">\n              <i class=\"iconfont icon-jia-line\" /> 新增地点\n            </el-button>\n            <el-button v-if=\"drawing\" type=\"link\" @click=\"cancelDraw\">\n              取消\n            </el-button>\n          </div>\n        </div>\n        \n        <div style=\"width: 100%;line-height:30px;color: #606266;\">\n          <div v-show=\"dataList.length>0\" style=\"float: left;\">\n            <el-button type=\"link\" @click=\"clusterAnalysis\" icon=\"el-icon-wind-power\">聚合分析</el-button>\n          </div>\n        </div>\n        <!-- 搜索框 -->\n        <div style=\"clear: right;\">\n          <el-input\n            v-model=\"keyWord\"\n            placeholder=\"请输入你要查找的地名\"\n            style=\"width:220px;margin-top: 10px;\"\n            allow-clear\n            enter-button\n            @pressEnter=\"loadData\"\n            @search=\"loadData\"\n          />\n          <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchByName(keyWord)\">搜索</el-button>\n          <el-button type=\"primary\" icon=\"el-icon-position\" @click=\"navigation()\">\n            导航\n          </el-button>\n        </div>\n      <!-- 没有数据时候的展示 -->\n      </section>\n        <section style=\"margin: 20px;color:black;\">\n        <!-- 无数据时的占位符 -->\n        <el-empty v-show=\"dataList.length<1\" style=\"color: #606266;margin-top: 20px;padding-top: 120px;height:calc(100vh - 100px)\">\n          <span slot=\"description\"> 无数据 </span>\n          <el-button v-if=\"!drawing\" type=\"link\" @click=\"startDraw\">\n            <i class=\"iconfont icon-jia-line\" /> 标绘\n          </el-button>\n          <el-button v-if=\"drawing\" type=\"primary\" @click=\"cancelDraw\">\n            取消\n          </el-button>\n        </el-empty>\n        <!-- 数据列表 -->\n        <div v-show=\"dataList.length > 0\" item-layout=\"horizontal\" :data-source=\"dataList\" :style=\"{ height: 'calc(100vh - 240px)',overflow: 'auto' }\">\n          <!-- 分组 -->\n          <el-tree :data=\"nameList\" :props=\"defaultProps\" @node-click=\"handleNodeClick\"></el-tree>\n          <!--  -->\n          <div v-for=\"item in dataList\" :key=\"item.id\">\n            <div style=\"line-height: 36px;border-bottom: 1px solid #d3e1f5;\" @dblclick=\"edit(item)\"> \n              <div style=\"display: inline-block;\">{{ item.name }}</div>\n              <div style=\"float: right;\">\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link\" ghost @click=\"edit(item)\">编辑</el-button>\n                <el-button slot=\"actions\" type=\"text\" class=\"btn-link hover-red\" ghost @click=\"deleteClick(item)\">删除</el-button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n    <!-- 编辑页面 -->\n    <div v-show=\"page == 'edit'\">\n      <div style=\"padding: 20px;max-height: calc(100vh - 130px);overflow: auto;\">\n        <el-form ref=\"poiForm\" :model=\"currentPoint\" size=\"small\">\n          <el-form-item prop=\"name\" label=\"名称\">\n            <el-input v-model=\"currentPoint.name\" allow-clear />\n          </el-form-item>\n          <el-form-item prop=\"name\" label=\"时间\">\n            <el-input v-model=\"currentPoint.time\" allow-clear />\n          </el-form-item>\n          <el-form-item label=\"x\">\n            <el-input v-model=\"currentPoint.lng\" :min=\"-180\" :max=\"180\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"y\">\n            <el-input v-model=\"currentPoint.lat\" :min=\"-90\" :max=\"90\" @change=\"latLngChange\" />\n          </el-form-item>\n          <el-form-item label=\"描述\" style=\"margin-bottom: 0;\">\n            <el-input v-model=\"currentPoint.desc\" type=\"textarea\" />\n          </el-form-item>\n          <el-form-item label=\"图片\" style=\"margin-top: 10px;\">\n            <image-upload :fileList=\"fileList\" type=\"poi\" @listChange=\"listChange\" />\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"save\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 导航页面  -->\n    <div v-show=\"page == 'navigation'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        <el-form size=\"small\" >\n          <el-form-item prop=\"startPlace\" label=\"输入起点\">\n            <el-input v-model=\"startPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(startPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLng\" label=\"起点经度\">\n            <el-input v-model=\"startPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"startPlaceLat\" label=\"起点维度\">\n            <el-input v-model=\"startPlace.lat\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlace\" label=\"输入终点\">\n            <el-input v-model=\"endPlace.name\" allow-clear/>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchLngByName(endPlace)\">搜索</el-button>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLng\" label=\"终点经度\">\n            <el-input v-model=\"endPlace.lng\"/>\n          </el-form-item>\n          <el-form-item prop=\"endPlaceLat\" label=\"终点维度\">\n            <el-input v-model=\"endPlace.lat\"/>\n          </el-form-item>\n          <el-form-item  label=\"请选择导航路线类型\">\n            <el-select v-model=\"navstyle\" clearable placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in navOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"searchRoute()\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 聚合分析页面 -->\n    <div v-show=\"page =='cluster'\">\n      <div style=\"padding: 20px;max-height: calc(200vh - 130px);overflow: auto;\">\n        \n        <el-form size=\"small\">\n          <el-form-item label=\"聚合方法\">\n            <el-select v-model=\"clusterStyle\" placeholder=\"请选择\" clearable>\n              <el-option\n                v-for=\"item in clusterStyleOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item> \n          <el-form-item label=\"聚合数据\">\n            <el-select v-model=\"selectcludata\" placeholder=\"请选择\">\n              <el-option\n                v-for=\"item in clusterDataOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.label\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"最小停留天数\" v-if=\"clusterStyle==5\">\n            <el-input v-model=\"minstayTime\" placeholder=\"3.0\"></el-input>\n          </el-form-item> \n          <el-form-item label=\"两个点最大间隔天数\" v-if=\"clusterStyle==5\">\n            <el-input v-model=\"maxstayTime\" placeholder=\"3.0\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"模式\">\n            <el-radio-group v-model=\"pattern\">\n              <el-radio :label=\"1\">简化</el-radio>\n              <el-radio :label=\"2\">初始</el-radio>\n              <el-radio :label=\"3\">聚合</el-radio>\n            </el-radio-group>\n          </el-form-item>\n          <el-form-item label=\"几何类型\">\n            <el-radio-group v-model=\"geometricType\">\n              <el-radio :label=\"1\">点</el-radio>\n              <el-radio :label=\"2\">点+线</el-radio>\n            </el-radio-group>\n          </el-form-item>\n        </el-form>\n        \n        <div style=\"width: 100%;\">\n          <el-button @click=\"backToList\">\n            返回\n          </el-button>\n          <div style=\"float: right;\">\n            <el-button style=\"margin-left: 10px;\" type=\"primary\" @click=\"clusave\">确定</el-button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport L from 'leaflet'  // 引入Leaflet库\nimport 'leaflet-markers-canvas'\nimport 'leaflet.markercluster/dist/leaflet.markercluster';\nimport 'leaflet.markercluster/dist/MarkerCluster.css';\nimport 'leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport \"leaflet-canvas-marker\"\nimport Papa from 'papaparse'\nimport axios from 'axios'\nimport DrawPoi from './DrawPoi'\nimport DrawNewPoi from './DrawNewPoi'\nimport * as FileSave from './FileSave'\nimport { getUuid } from '../biz/common'\nimport IconsDialog from '../../../tool/build/IconsDialog.vue'\nimport 'leaflet/dist/leaflet.css'\nimport { douglasPeucker } from '../algo/DouglasPeuker'\nimport { kMeans } from '../algo/kmeans' \nimport { clarans } from '../algo/clarans' \nimport { dbscan } from '../algo/dbscan' \nimport { optics } from '../algo/optics' \nimport {ElePoint, Region, QuadTreeNode} from '../algo/pubMethods'\nimport {convertDateStringToUnix,insertEle,queryEle,\n      convertUnixToDateString,getCenterPoint,isValidLatLng} from '../algo/pubMethods'\nimport { tdbscan } from '../algo/tdbscan' \nimport * as PathLayer from '../comm/PathLayer'\nconst pointerImg = require('@/assets/images/location64.png')\nconst cluPointImg = require('@/assets/images/point.png')\nconst cluCenterPointImg = require('@/assets/images/centerPoint.png')\nlet drawNewPoi\nlet drawPoi\nlet previousLayers = []\nlet markersList = []\nlet markersCanvas\nexport default {\n  components: { IconsDialog },\n  name: 'PoiPanel',\n  data() {\n    return {\n      selectcludata: '',\n      //灰鹤\n      greyCrane:[],\n      //小天鹅\n      cygne:[],\n      // 鸟类1\n      birdOne:[],\n      // 鸟类2\n      birdTwo:[],\n      // 数据模式\n      pattern:2,\n      // 几何类型\n      geometricType:1,\n      // 聚合算法\n      clusterStyle:'',\n      //最大停留时长\n      maxstayTime:'',\n      //最短停留时长\n      minstayTime:'',\n      //聚合方式\n      clusterStyleOptions:[{\n        value:1,\n        label:'CLARANS'\n      },{\n        value:2,\n        label:'K-Means'\n      },{\n        value:3,\n        label:'DBSCAN'\n      },{\n        value:4,\n        label:'OPTICS'\n      },{\n        value:5,\n        label:'T-DBSCAN'\n      }],\n      // 聚合数据\n      clusterDataOptions:[{\n        value:0,\n        label:'灰鹤'\n      },{\n        value:1,\n        label:'小天鹅'\n      },{\n        value:2,\n        label:'鸟类1'\n      },{\n        value:3,\n        label:'鸟类2'\n      }],\n      showpoint: '0',\n      dataList: [], // 数据列表\n      page: 'list', // 当前页面（list 或 edit）\n      currentPoint: {\n        name: '',\n        time: ''\n      }, // 当前编辑的点信息\n      fileList: [], // 上传的文件列表\n      pointerImg: pointerImg, // 指针图片\n      drawing: false, // 是否正在绘制\n      navdrawing: false,\n      keyWord: '', // 搜索关键字\n      nameList:[],\n      defaultProps: {\n        children: 'children',\n        label: 'label'\n      },\n      startPlace:{ //出发点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      endPlace:{ //终点\n        name:'',\n        lng: '',\n        lat: ''\n      },\n      //导航样式\n      navstyle: 0,\n      navOptions:[{\n        value:0,\n        label:'最快路线'\n      },{\n        value:1,\n        label:'最短路线'\n      },{\n        value:2,\n        label:'避开高速'\n      },{\n        value:3,\n        label:'步行'\n      }]\n    }\n  },\n  watch: {  \n    clusterStyle(newVal) {  \n      if (newVal) { // 确保有值被选中  \n        this.pattern = 3 // 设置为聚合  \n      }else{\n        this.pattern = 2\n      }  \n    },\n    pattern(newVal){\n      if(newVal !== 3){\n        this.clusterStyle = ''\n      }\n    }  \n  },\n  mounted() {\n    // 初始化 drawPoi 和 PathLayer\n    this.$nextTick(() => {\n      drawNewPoi = new DrawNewPoi(this)\n      drawPoi = new DrawPoi(this)\n      PathLayer.init()\n    })\n    // 加载数据\n    this.loadData()\n    this.greyCrane = this.loadCSV('灰鹤8.1-11.30轨迹点')\n    // this.greyCrane = this.loadCSV('灰鹤8.1-11.30轨迹点')\n    this.cygne = this.loadCSV('小天鹅')\n    this.birdOne = this.loadCSV('鸟类1')\n    this.birdTwo = this.loadCSV('鸟类2')\n  },\n  beforeDestroy() {\n    // 清除绘制\n    drawNewPoi.clear()\n    drawNewPoi.drawCancel()\n  },\n  methods: {\n    clusave() {\n      if(markersCanvas){\n        markersCanvas.removeMarkers(markersList)\n        markersCanvas.clear()\n        markersList = [];\n      }\n      // 清理先前图层\n      previousLayers.forEach(layer => {\n        map.removeLayer(layer);\n      });\n      previousLayers = [];\n      // 添加新的MarkersCanvas\n      markersCanvas = new L.MarkersCanvas();\n      markersCanvas.addTo(map);\n      previousLayers.push(markersCanvas)\n      \n      // 定义通用图标\n      const icon = L.icon({\n        iconUrl: cluPointImg,\n        iconSize: [12, 12],\n        iconAnchor: [6, 6]\n      });\n      // 定义栖息地图标\n      const iconCenter = L.icon({\n        iconUrl: cluCenterPointImg,\n        iconSize: [15, 15],\n        iconAnchor: [6, 6]\n      });\n\n      // 根据鸟类选择数据\n      let temp_bird_data = this.getSelectedBirdData();\n\n      // 没有选择聚类方式时\n      if (this.clusterStyle.length === 0) {\n        this.displayWithoutClustering(temp_bird_data, markersCanvas, icon,this.pattern);\n      } else {\n        this.displayWithClustering(temp_bird_data, markersCanvas, iconCenter);\n      }\n\n      // 弹窗提示已经聚类结束\n      this.$message({\n        message:'聚类完成',\n        type:'success'\n      })\n\n    },\n\n    // 根据选择的鸟类返回对应数据\n    getSelectedBirdData() {\n      switch(this.selectcludata) {\n        case '灰鹤':\n          return this.greyCrane;\n        case '小天鹅':\n          return this.cygne;\n        case '鸟类1':\n          return this.birdOne;\n        case '鸟类2':\n          return this.birdTwo;\n        default:\n          return [];\n      }\n    },\n\n    // 不聚类时的展示逻辑\n    displayWithoutClustering(temp_bird_data, markersCanvas, icon,pattern) {\n      if(pattern == '1'){ //简化版本，调用了滤波算法\n        temp_bird_data.then(birdArr => {\n          let latlngs = [];\n          birdArr = douglasPeucker(birdArr,25000)\n          birdArr.forEach(item => {\n            if (isValidLatLng(item)) {\n              const marker = this.createMarker(item, icon);\n              markersCanvas.addMarker(marker);\n              markersList.push(marker);\n              latlngs.push([item.lat, item.lng]);\n            }\n          });\n          this.handleGeometricType(latlngs, markersCanvas);\n        });\n      }else{\n        //最原始的点\n        temp_bird_data.then(birdArr => {\n          let latlngs = [];\n          birdArr.forEach(item => {\n            if (isValidLatLng(item)) {\n              const marker = this.createMarker(item, icon);\n              markersList.push(marker);\n              markersCanvas.addMarker(marker);\n              latlngs.push([item.lat, item.lng]);\n            }\n          });\n          this.handleGeometricType(latlngs, markersCanvas);\n        });\n      }\n    },\n\n    // 聚类后的展示逻辑\n    displayWithClustering(temp_bird_data, markersCanvas, icon) {\n      temp_bird_data.then(birdArr => {\n        let clusterCenters = [];\n        let latlngs = [];\n        // 建立四叉树索引方便后续的查询操作\n        const rootRegion = new Region(-90, 90, -180, 180);\n        const root = new QuadTreeNode(1, rootRegion);\n        var points = birdArr\n        points.forEach((p, index) => {\n            p.index = index;\n            insertEle(root, p);\n        });\n        switch(this.clusterStyle) {\n          case 1:\n            clusterCenters = clarans(points, 20, 5, 100);\n            break;\n          case 2:\n            clusterCenters = kMeans(points, 20);\n            break;\n          case 3:\n            clusterCenters = dbscan(points, 25, 70);\n            break;\n          case 4:\n            clusterCenters =  optics(points,6,20);\n            break;\n          case 5:\n            if(this.maxstayTime == ''){\n              this.maxstayTime = 3\n            }\n            if(this.minstayTime == ''){\n              this.minstayTime = 3\n            }\n            const gpsPoints = []\n            birdArr.forEach(item=>{\n              const temp = new ElePoint(parseFloat(item.lat), parseFloat(item.lng), convertDateStringToUnix(item.time), gpsPoints.length);\n              gpsPoints.push(temp);\n            })\n            \n            const {clusters,CorePoints} = tdbscan(gpsPoints,25000, this.minstayTime, this.maxstayTime)\n            console.log(clusters)\n            for(const p of CorePoints){\n                var maxstayTime = 0\n                const point = birdArr[p.index]\n                const startTime = point.time\n                var endTime = point.time\n                const timeP = convertDateStringToUnix(point.time)\n                for(let i = 0;i<clusters.length;i++){\n                  if(clusters[p.index] == clusters[i]){\n                    const timeQ = convertDateStringToUnix(birdArr[i].time)\n                    const disTime = Math.abs(timeP - timeQ)/(60*60*24)\n                    if(disTime>=maxstayTime){\n                      maxstayTime = disTime\n                      endTime = birdArr[i].time\n                    }\n                  }\n                }\n                clusterCenters.push({maxstayTime:maxstayTime,startTimeStr:startTime,\n                  endTimeStr:endTime,centerPoint:point\n                })\n            }\n            break;\n        }\n        // if(clusterCenters.length>=15){\n        //   clusterCenters = douglasPeucker(clusterCenters,5000)\n        // }\n        if(this.clusterStyle == 5 || this.clusterStyle == 4){\n          clusterCenters.forEach(item =>{\n            const centerPoint = item.centerPoint\n            const maxstayTime = item.maxstayTime\n            const startTimeStr = item.startTimeStr\n            const endTimeStr = item.endTimeStr\n            const marker = this.createCenterMarker({centerPoint,maxstayTime,startTimeStr,endTimeStr}, icon);\n            markersCanvas.addMarker(marker);\n            previousLayers.push(marker)\n            markersList.push(marker)\n            latlngs.push([centerPoint.lat, centerPoint.lng]);\n          })\n        }else{\n          // 计算停歇时间 做分级渲染\n          clusterCenters.forEach(item =>{\n            const point  = new ElePoint(item.lat,item.lng,convertDateStringToUnix(item.time),item.index)\n            const EpsResults = []\n            queryEle(root,point,EpsResults,25000)\n            const centerPoint = getCenterPoint(EpsResults)\n            const times = EpsResults.map(point => convertDateStringToUnix(point.time))\n            const startTime = new Date(Math.min(...times))\n            const endTime = new Date(Math.max(...times))\n            const startTimeStr = convertUnixToDateString(startTime)\n            const endTimeStr = convertUnixToDateString(endTime)\n            const maxstayTime = (Math.max(...times) - Math.min(...times))/(60*60*24)\n            if(isValidLatLng(centerPoint)){\n              const marker = this.createCenterMarker({centerPoint,maxstayTime,startTimeStr,endTimeStr}, icon);\n              markersCanvas.addMarker(marker);\n              previousLayers.push(marker)\n              markersList.push(marker)\n              latlngs.push([centerPoint.lat, centerPoint.lng]);\n            }\n          })\n        }\n        this.handleGeometricType(latlngs, markersCanvas);\n      });\n    },\n    // 创建栖息地点位，时间越长，icon的size将会随着调整\n    createCenterMarker(item,icon){\n       return L.marker([item.centerPoint.lat, item.centerPoint.lng], { icon })\n        .bindPopup(`停留时间:${item.maxstayTime.toFixed(2)}天<p>\n          开始时间:${item.startTimeStr}<p>\n          结束时间:${item.endTimeStr}<p>\n          经度:${parseFloat(item.centerPoint.lng).toFixed(5)}<p>纬度:${parseFloat(item.centerPoint.lat).toFixed(5)}`)\n        .on({\n          mouseover(e) { this.openPopup(); },\n          mouseout(e) { this.closePopup(); }\n        });\n    },\n    // 创建普通点标记\n    createMarker(item, icon) {\n      return L.marker([item.lat, item.lng], { icon })\n        .bindPopup(`时间:${item.time}<p>经度:${parseFloat(item.lng).toFixed(5)}<p>纬度:${parseFloat(item.lat).toFixed(5)}`)\n        .on({\n          mouseover(e) { this.openPopup(); },\n          mouseout(e) { this.closePopup(); }\n        });\n    },\n\n    // 根据几何类型绘制\n    handleGeometricType(latlngs, markersCanvas) {\n      if (this.geometricType != '1') {\n        const polyline = L.polyline(latlngs, { color: 'red', weight: 3 }).addTo(map);\n        const decorator = L.polylineDecorator(polyline, {\n          patterns: [\n            { offset: 0, repeat: 35, symbol: L.Symbol.arrowHead({\n              pixelSize: 5,\n              headAngle: 75,\n              polygon: false,\n              pathOptions: { stroke: true, weight: 2, color: 'blue' }\n            })}\n          ]\n        }).addTo(map);\n        previousLayers.push(decorator);\n        previousLayers.push(polyline);\n      }\n    },\n    // 读取csv文件\n    async loadCSV(data) {    \n      const csvUrl = `../resource/${data}.csv`;    \n      try {    \n        const response = await fetch(csvUrl);    \n        if (!response.ok) throw new Error('Network response was not ok');    \n        const csv = await response.text();    \n        const results = Papa.parse(csv, {  \n          header: true,  \n          transform: function(value, field) {  \n            if (field === 'lng' || field === 'lat') {  \n              const num = parseFloat(value);  \n              return isNaN(num) ? value : num;  \n            }  \n            return value;  \n          }  \n        });   \n        \n        // 按照第一列时间字符串排序\n        const sortedData = results.data.sort((a, b) => {\n          const timeA = convertDateStringToUnix(a[Object.keys(a)[0]]); // 第一列的时间值\n          const timeB = convertDateStringToUnix(b[Object.keys(b)[0]]);\n          return timeA - timeB; // 升序排列\n        });\n        \n        return sortedData;    \n      } catch (error) {    \n        console.error('Error loading CSV:', error);    \n        throw error; \n      }    \n    },\n    //根据地名查找经纬度\n    searchLngByName(options){\n      //湖南省环球信士公司\n      //请求： http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"北京市延庆区延庆镇莲花池村前街50夕阳红养老院\"}&tk=您的密钥\n      axios.get('http://api.tianditu.gov.cn/geocoder?ds={\"keyWord\":\"' + options.name + '\"}&tk=89dea3eab561f0dfb9867e531415e015').then(res => {\n        options.lng=res.data.location.lon\n        options.lat=res.data.location.lat\n      }).catch(err => {\n        console.error('Error fetching route:', err)\n      }) \n    },\n    //点击节点\n    handleNodeClick(data){\n      console.log('节点数据',data)\n      console.log('节点ID',data.$treeNodeId)\n    },\n    //导航\n    navigation(){\n      this.page='navigation' //跳转到导航界面\n      this.navdrawing = true\n      drawPoi.draw()\n    },\n    //绘制导航路线\n    searchRoute(){\n      this.showPath(this.startPlace,this.endPlace,this.navstyle)\n    },\n    //查询地名\n    searchByName(keyWord){\n      const list = []\n      FileSave.getList().then(res => {\n        const temp = res\n        if(temp){\n          temp.forEach(item =>{\n            if(item.name.includes(keyWord)){\n              list.push(item)\n            }\n          })\n        }\n      })\n      this.dataList = list\n    },\n    // 加载数据\n    loadData() {\n      FileSave.getList().then(res => {\n        console.log('res', res)\n        const list = res\n        if (res) {\n          // 处理图片\n          list.forEach(item => {\n            if (item.photos) {\n              const arr = item.photos.split('#')\n              if (arr.length > 0) {\n                item['photo0'] = arr[0]\n                item['photoArr'] = arr\n              }\n            }\n          })\n          this.dataList = list\n        } else {\n          this.dataList = []\n        }\n        const nameList = []\n        list.forEach(item =>{\n          if(item.name){\n              const [province,place] = item.name.split('-')\n              const provinces = nameList // 省份层级是树的根\n              const provinceNode = findOrCreateParent(provinces, province)\n              const places = provinceNode.children\n              findOrCreateParent(places, place) // 城市作为省份的子节点\n            }\n          }\n        )\n        this.nameList=nameList\n      })\n    },\n    // 聚合分析\n    clusterAnalysis(){\n      this.page = 'cluster'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n    },\n    // 开始绘制\n    startDraw() {\n      this.drawing = true\n      this.fileList = []\n      drawNewPoi.draw()\n    },\n    // 取消绘制\n    cancelDraw() {\n      drawNewPoi.drawCancel()\n      this.drawing = false\n    },\n    // 返回列表页面\n    backToList() {\n      this.page = 'list'\n      drawNewPoi.clear()\n      drawPoi.clear()\n      PathLayer.clear()\n      this.navdrawing = false\n      if(this.startPlace!=''){\n        this.startPlace.name=''\n        this.startPlace.lng=''\n        this.startPlace.lat=''\n        this.endPlace.name=''\n        this.endPlace.lng=''\n        this.endPlace.lat=''\n\n      }\n      this.$refs.poiForm.resetFields()\n    },\n    // 保存数据\n    save() {\n      this.$refs.poiForm.validate(valid => {\n        if (!valid) {\n          return\n        }\n        const currentPoint = this.currentPoint\n\n        const param = {\n          name: currentPoint.name,\n          time: currentPoint.time,\n          longitude: currentPoint.lng,\n          latitude: currentPoint.lat,\n          altitude: currentPoint.altitude || 0,\n          photos: '',\n          address: '',\n          desc: currentPoint.desc || ''\n        }\n        const photos = []\n        if (this.fileList.length > 0) {\n          this.fileList.forEach(f => {\n            photos.push(f.name)\n          })\n        }\n        if (photos.length > 0) {\n          param.photos = photos.join('#')\n        }\n\n        if (currentPoint.id) {\n          const item = this.dataList.find(d => d.id === currentPoint.id)\n          if (item) {\n            item.name = currentPoint.name || ''\n            item.time = currentPoint.time || ''\n            item.longitude = currentPoint.lng\n            item.latitude = currentPoint.lat\n            item.altitude = currentPoint.altitude || 0\n            item.photos = param.photos\n            item.address = param.address\n            item.desc = currentPoint.desc || ''\n            FileSave.create(this.dataList).then(res => {\n              this.$messageSuccess()\n              this.backToList()\n            })\n          }\n        } else {\n          param['id'] = getUuid()\n          this.dataList.push(param)\n          FileSave.create(this.dataList).then(res => {\n            this.$messageSuccess()\n            this.backToList()\n          })\n        }\n        this.loadData()\n      })\n    },\n    // 飞到指定点\n    flyTo(item) {\n      drawNewPoi.flyTo(item)\n    },\n    // 编辑指定点\n    edit(item) {\n      this.fileList = []\n      const photos = item.photos\n      if (photos) {\n        const arr = photos.split('#')\n        arr.forEach(url => {\n          this.fileList.push({\n            status: 'done',\n            url: url,\n            name: url,\n            uid: getUuid()\n          })\n        })\n      }\n      drawNewPoi.edit(item)\n    },\n    // 删除指定点\n    deleteClick(item) {\n      const idx = this.dataList.findIndex(d => d.id === item.id)\n      this.dataList.splice(idx, 1)\n      FileSave.create(this.dataList).then(res => {\n        this.$messageSuccess()\n        this.loadData()\n        drawNewPoi.clearById(item.id)\n      })\n    },\n    // 文件列表变化\n    listChange(list) {\n      this.fileList = list\n    },\n    // 经纬度变化\n    latLngChange(v) {\n      if (this.currentPoint.lat && this.currentPoint.lng) {\n        drawNewPoi.setLatLng(this.currentPoint.lat, this.currentPoint.lng)\n      }\n    },\n    // 显示路径\n    showPath(start,end,style) {\n      PathLayer.path(start,end,style)\n    }\n  }\n}\n// 辅助函数：在树中查找或添加父节点\nfunction findOrCreateParent(parents, parentName) {\n  let parent = parents.find(p => p.label === parentName);\n  if (!parent) {\n    parent = { label: parentName, children: [] };\n    parents.push(parent);\n  }\n  return parent;\n}\n\n</script>\n\n<style scoped>\n.poiImg {\n  width: 40px;\n  height: 40px;\n  border-radius: 5px;\n}\n</style>\n"]}]}