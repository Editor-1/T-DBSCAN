{"remainingRequest":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\poi\\DrawPoi.js","dependencies":[{"path":"D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\poi\\DrawPoi.js","mtime":1719892161674},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyIpOwp2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoIkQ6L3dvcmsvd29ya3NwYWNlX3dtL3dlYi11aS10cmF2ZWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZV93bS93ZWItdWktdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIikpOwp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovd29yay93b3Jrc3BhY2Vfd20vd2ViLXVpLXRyYXZlbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIpKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiKTsKdmFyIF9sZWFmbGV0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsZWFmbGV0IikpOwp2YXIgX2xvY2F0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvbG9jYXRpb24ucG5nIikpOwp2YXIgX1BvaW50RW50aXR5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL1BvaW50RW50aXR5IikpOwp2YXIgX0xvbmdpdHVkZSA9IHJlcXVpcmUoIi4vTG9uZ2l0dWRlMTgwIik7CnZhciBfY29tbW9uID0gcmVxdWlyZSgiLi4vYml6L2NvbW1vbiIpOwp2YXIgRmx5X0xldmVsID0gMTA7CnZhciBkcmF3UG9pT2JqOwpmdW5jdGlvbiBjbGlja0V2ZW50KGV2dCkgewogIHZhciBsYXRsbmcgPSBldnQubGF0bG5nOwogIGRyYXdQb2lPYmoubWFwLl9jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJyc7CiAgZHJhd1BvaU9iai5jcmVhdGVNYXJrZXJFZGl0KHsKICAgIGxhdGxuZzogbGF0bG5nLAogICAgbmFtZTogJycKICB9KTsKICBkcmF3UG9pT2JqLnZtLnBhZ2UgPSAnZWRpdCc7CiAgdmFyIHBvaW50RW50aXR5ID0gZHJhd1BvaU9iai5jcmVhdGVFbnRpdHkoe30pOwogIGRyYXdQb2lPYmoudm0uY3VycmVudFBvaW50ID0gcG9pbnRFbnRpdHk7CiAgZHJhd1BvaU9iai51cGRhdGVMYXRsbmcoZXZ0KTsKICBkcmF3UG9pT2JqLm1hcC5vZmYoJ2NsaWNrJywgY2xpY2tFdmVudCwgZHJhd1BvaU9iai5jbGlja0NvbnRleHQpOwogIGRyYXdQb2lPYmoudm0uZHJhd2luZyA9IGZhbHNlOwogIGRyYXdQb2lPYmouc2V0TW91c2VTdGF0dXModHJ1ZSk7Cn0KdmFyIERyYXdQb2kgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERyYXdQb2kocGFyZW50KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBEcmF3UG9pKTsKICAgIHRoaXMubWFwID0gd2luZG93Lm1hcDsKICAgIHRoaXMudm0gPSBwYXJlbnQ7CiAgICB0aGlzLmxheWVyR3JvdXAgPSBfbGVhZmxldC5kZWZhdWx0LmxheWVyR3JvdXAoKS5hZGRUbyh0aGlzLm1hcCk7CiAgICB0aGlzLm1hcmtlciA9IG51bGw7CiAgICB0aGlzLm1hcmtlckVkaXQgPSBudWxsOwogICAgdGhpcy5jbGlja0NvbnRleHQgPSAnRHJhd1BvaUNvbnRleHQnOwogICAgZHJhd1BvaU9iaiA9IHRoaXM7CiAgfQogICgwLCBfY3JlYXRlQ2xhc3MyLmRlZmF1bHQpKERyYXdQb2ksIFt7CiAgICBrZXk6ICJjcmVhdGVNYXJrZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1hcmtlcihwYXJhbSkgewogICAgICB2YXIgaWNvbiA9IF9sZWFmbGV0LmRlZmF1bHQuaWNvbih7CiAgICAgICAgaWNvblVybDogX2xvY2F0aW9uLmRlZmF1bHQsCiAgICAgICAgaWNvblNpemU6IFszMiwgMzJdLAogICAgICAgIGljb25BbmNob3I6IFsxNiwgMzJdCiAgICAgIH0pOwogICAgICB2YXIgbWFya2VyID0gX2xlYWZsZXQuZGVmYXVsdC5tYXJrZXIocGFyYW0ubGF0bG5nLCB7CiAgICAgICAgaWNvbjogaWNvbiwKICAgICAgICBpdGVtOiBwYXJhbS5pdGVtCiAgICAgIH0pOwogICAgICB0aGlzLmxheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyKTsKICAgICAgaWYgKHBhcmFtLm5hbWUpIHsKICAgICAgICB2YXIgb2Zmc2V0ID0gewogICAgICAgICAgb2Zmc2V0OiBuZXcgX2xlYWZsZXQuZGVmYXVsdC5Qb2ludCgwLCAtMjApCiAgICAgICAgfTsKICAgICAgICBtYXJrZXIuYmluZFBvcHVwKHBhcmFtLm5hbWUgKyAnPGJyPicgKyBwYXJhbS5kZXNjLCBvZmZzZXQpLm9wZW5Qb3B1cCgpOwogICAgICB9CiAgICAgIHRoaXMubWFya2VyID0gbWFya2VyOwogICAgICByZXR1cm4gbWFya2VyOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZU1hcmtlckVkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZU1hcmtlckVkaXQocGFyYW0pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIGxhdGxuZyA9IHBhcmFtLmxhdGxuZzsKICAgICAgdmFyIGljb24gPSBfbGVhZmxldC5kZWZhdWx0LmRpdkljb24oewogICAgICAgIGNsYXNzTmFtZTogJ2xlYWZsZXQtaWNvbi1wb2ktZWRpdCcsCiAgICAgICAgaWNvblNpemU6IFsxMiwgMTJdLAogICAgICAgIGljb25BbmNob3I6IFs2LCAwXQogICAgICB9KTsKICAgICAgLy8g56e75Yqo5L2TCiAgICAgIHZhciBtYXJrZXJFZGl0ID0gX2xlYWZsZXQuZGVmYXVsdC5tYXJrZXIobGF0bG5nLCB7CiAgICAgICAgaWNvbjogaWNvbiwKICAgICAgICBkcmFnZ2FibGU6IHRydWUKICAgICAgfSk7CiAgICAgIG1hcmtlckVkaXQub24oJ2RyYWcnLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgX3RoaXMudXBkYXRlTGF0bG5nKGV2dCk7CiAgICAgIH0pOwogICAgICB0aGlzLmxheWVyR3JvdXAuYWRkTGF5ZXIobWFya2VyRWRpdCk7CiAgICAgIHRoaXMubWFya2VyRWRpdCA9IG1hcmtlckVkaXQ7CgogICAgICAvLyDmnKzkvZMKICAgICAgdGhpcy5jcmVhdGVNYXJrZXIoewogICAgICAgIGxhdGxuZzogbGF0bG5nLAogICAgICAgIG5hbWU6IHBhcmFtLm5hbWUsCiAgICAgICAgZGVzYzogcGFyYW0uZGVzYwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVFbnRpdHkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUVudGl0eShvcHRpb25zKSB7CiAgICAgIHZhciBwb2ludEVudGl0eSA9IG5ldyBfUG9pbnRFbnRpdHkuZGVmYXVsdChvcHRpb25zKTsKICAgICAgcmV0dXJuIHBvaW50RW50aXR5OwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZUxhdGxuZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlTGF0bG5nKGV2dCkgewogICAgICB2YXIgbGF0ID0gKDAsIF9jb21tb24udG9GaXhlZCkoZXZ0LmxhdGxuZy5sYXQpOwogICAgICB0aGlzLnZtLmN1cnJlbnRQb2ludC5sYXQgPSBsYXQ7CiAgICAgIHRoaXMudm0uY3VycmVudFBvaW50LmxuZyA9ICgwLCBfTG9uZ2l0dWRlLmdldExuZykoZXZ0LmxhdGxuZy5sbmcpOwogICAgICB0aGlzLm1hcmtlci5zZXRMYXRMbmcoZXZ0LmxhdGxuZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TGF0TG5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRMYXRMbmcobGF0LCBsbmcpIHsKICAgICAgaWYgKGxhdCA8IC05MCB8fCBsYXQgPiA5MCB8fCBsbmcgPiAxODAgfHwgbG5nIDwgLTE4MCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB2YXIgbGF0bG5nID0gX2xlYWZsZXQuZGVmYXVsdC5sYXRMbmcobGF0LCBsbmcpOwogICAgICB0aGlzLm1hcC5mbHlUbyhsYXRsbmcsIEZseV9MZXZlbCwgewogICAgICAgIGFuaW1hdGU6IGZhbHNlCiAgICAgIH0pOwogICAgICBpZiAodGhpcy5tYXJrZXIpIHsKICAgICAgICB0aGlzLm1hcmtlci5zZXRMYXRMbmcobGF0bG5nKTsKICAgICAgfQogICAgICBpZiAodGhpcy5tYXJrZXJFZGl0KSB7CiAgICAgICAgdGhpcy5tYXJrZXJFZGl0LnNldExhdExuZyhsYXRsbmcpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHsKICAgICAgdGhpcy5jbGVhcigpOwogICAgICB0aGlzLnNldE1vdXNlU3RhdHVzKGZhbHNlKTsKICAgICAgdGhpcy5tYXAub24oJ2NsaWNrJywgY2xpY2tFdmVudCwgdGhpcy5jbGlja0NvbnRleHQpOwogICAgfQogIH0sIHsKICAgIGtleTogImRyYXdDYW5jZWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXdDYW5jZWwoKSB7CiAgICAgIHRoaXMubWFwLm9mZignY2xpY2snLCBjbGlja0V2ZW50LCB0aGlzLmNsaWNrQ29udGV4dCk7CiAgICAgIHRoaXMuc2V0TW91c2VTdGF0dXModHJ1ZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmx5VG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZseVRvKGl0ZW0pIHsKICAgICAgdGhpcy5jbGVhcigpOwogICAgICB2YXIgbGF0bG5nID0gW2l0ZW0uTGF0aXR1ZGUsIGl0ZW0uTG9uZ2l0dWRlXTsKICAgICAgdGhpcy5jcmVhdGVNYXJrZXIoewogICAgICAgIGxhdGxuZzogbGF0bG5nLAogICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICBkZXNjOiBpdGVtLmRlc2NyaXB0aW9uLAogICAgICAgIGl0ZW06IGl0ZW0KICAgICAgfSk7CiAgICAgIHRoaXMubWFwLmZseVRvKGxhdGxuZywgRmx5X0xldmVsLCB7CiAgICAgICAgYW5pbWF0ZTogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZmx5VG9FZGl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmbHlUb0VkaXQoaXRlbSkgewogICAgICB2YXIgbGF0bG5nID0gW2l0ZW0uTGF0aXR1ZGUsIGl0ZW0uTG9uZ2l0dWRlXTsKICAgICAgdGhpcy5tYXAuZmx5VG8obGF0bG5nLCBGbHlfTGV2ZWwsIHsKICAgICAgICBhbmltYXRlOiBmYWxzZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlZGl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBlZGl0KGl0ZW0pIHsKICAgICAgdGhpcy5jbGVhcigpOwoKICAgICAgLy8gdGhpcy5mbHlUb0VkaXQoaXRlbSkKICAgICAgdmFyIHBvaW50RW50aXR5ID0gdGhpcy5jcmVhdGVFbnRpdHkoewogICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgIG5hbWU6IGl0ZW0ubmFtZSwKICAgICAgICBhbHRpdHVkZTogaXRlbS5hbHRpdHVkZSwKICAgICAgICBkZXNjOiBpdGVtLmRlc2NyaXB0aW9uLAogICAgICAgIGxhdDogaXRlbS5sYXRpdHVkZSwKICAgICAgICBsbmc6IGl0ZW0ubG9uZ2l0dWRlLAogICAgICAgIHBob3RvczogaXRlbS5waG90b3MsCiAgICAgICAgdGFyZ2V0OiBpdGVtLnRhcmdldAogICAgICB9KTsKICAgICAgdGhpcy52bS5jdXJyZW50UG9pbnQgPSBwb2ludEVudGl0eTsKICAgICAgdGhpcy52bS5wYWdlID0gJ2VkaXQnOwogICAgICB0aGlzLmNyZWF0ZU1hcmtlckVkaXQoewogICAgICAgIGxhdGxuZzogcG9pbnRFbnRpdHkuZ2V0TGF0bG5nKCksCiAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgIGRlc2M6IGl0ZW0uZGVzY3JpcHRpb24KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5sYXllckdyb3VwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICBsYXllci5yZW1vdmVGcm9tKF90aGlzMi5sYXllckdyb3VwKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2xlYXJCeUlkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhckJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGlmICghaWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5sYXllckdyb3VwLmVhY2hMYXllcihmdW5jdGlvbiAobGF5ZXIpIHsKICAgICAgICBpZiAobGF5ZXIub3B0aW9ucyAmJiBsYXllci5vcHRpb25zLml0ZW0gJiYgbGF5ZXIub3B0aW9ucy5pdGVtLklkID09PSBpZCkgewogICAgICAgICAgbGF5ZXIucmVtb3ZlRnJvbShfdGhpczMubGF5ZXJHcm91cCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRNb3VzZVN0YXR1cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TW91c2VTdGF0dXMoKSB7CiAgICAgIHZhciBkZiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdHJ1ZTsKICAgICAgaWYgKGRmKSB7CiAgICAgICAgX2xlYWZsZXQuZGVmYXVsdC5Eb21VdGlsLnJlbW92ZUNsYXNzKHRoaXMubWFwLl9jb250YWluZXIsICdsZWFmbGV0LWN1cnNvci1jcm9zc2hhaXInKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfbGVhZmxldC5kZWZhdWx0LkRvbVV0aWwuYWRkQ2xhc3ModGhpcy5tYXAuX2NvbnRhaW5lciwgJ2xlYWZsZXQtY3Vyc29yLWNyb3NzaGFpcicpOwogICAgICB9CiAgICB9CiAgfV0pOwogIHJldHVybiBEcmF3UG9pOwp9KCk7CmV4cG9ydHMuZGVmYXVsdCA9IERyYXdQb2k7"},{"version":3,"names":["_leaflet","_interopRequireDefault","require","_location","_PointEntity","_Longitude","_common","Fly_Level","drawPoiObj","clickEvent","evt","latlng","map","_container","style","cursor","createMarkerEdit","name","vm","page","pointEntity","createEntity","currentPoint","updateLatlng","off","clickContext","drawing","setMouseStatus","DrawPoi","parent","_classCallCheck2","default","window","layerGroup","L","addTo","marker","markerEdit","_createClass2","key","value","createMarker","param","icon","iconUrl","locationPng","iconSize","iconAnchor","item","addLayer","offset","Point","bindPopup","desc","openPopup","_this","divIcon","className","draggable","on","options","PointEntity","lat","toFixed","lng","getLng","setLatLng","latLng","flyTo","animate","draw","clear","drawCancel","Latitude","Longitude","description","flyToEdit","edit","id","altitude","latitude","longitude","photos","target","getLatlng","_this2","eachLayer","layer","removeFrom","clearById","_this3","Id","df","arguments","length","undefined","DomUtil","removeClass","addClass","exports"],"sources":["D:/work/workspace_wm/web-ui-travel/src/views/biz/tools/poi/DrawPoi.js"],"sourcesContent":["import L from 'leaflet'\nimport locationPng from '@/assets/images/location.png'\nimport PointEntity from './PointEntity'\nimport { getLng } from './Longitude180'\nimport { toFixed } from '../biz/common'\n\nconst Fly_Level = 10\nlet drawPoiObj\n\nfunction clickEvent(evt) {\n  const latlng = evt.latlng\n  drawPoiObj.map._container.style.cursor = ''\n\n  drawPoiObj.createMarkerEdit({\n    latlng: latlng,\n    name: ''\n  })\n\n  drawPoiObj.vm.page = 'edit'\n  const pointEntity = drawPoiObj.createEntity({})\n  drawPoiObj.vm.currentPoint = pointEntity\n\n  drawPoiObj.updateLatlng(evt)\n\n  drawPoiObj.map.off('click', clickEvent, drawPoiObj.clickContext)\n  drawPoiObj.vm.drawing = false\n  drawPoiObj.setMouseStatus(true)\n}\n\nexport default class DrawPoi {\n  constructor(parent) {\n    this.map = window.map\n    this.vm = parent\n    this.layerGroup = L.layerGroup().addTo(this.map)\n\n    this.marker = null\n    this.markerEdit = null\n    this.clickContext = 'DrawPoiContext'\n    drawPoiObj = this\n  }\n  createMarker(param) {\n    const icon = L.icon({\n      iconUrl: locationPng,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    })\n    const marker = L.marker(param.latlng, {\n      icon: icon,\n      item: param.item\n    })\n    this.layerGroup.addLayer(marker)\n\n    if (param.name) {\n      const offset = {\n        offset: new L.Point(0, -20)\n      }\n      marker.bindPopup(param.name + '<br>' + param.desc, offset).openPopup()\n    }\n    this.marker = marker\n    return marker\n  }\n  createMarkerEdit(param) {\n    const latlng = param.latlng\n    const icon = L.divIcon({\n      className: 'leaflet-icon-poi-edit',\n      iconSize: [12, 12],\n      iconAnchor: [6, 0]\n    })\n    // 移动体\n    const markerEdit = L.marker(latlng, {\n      icon: icon,\n      draggable: true\n    })\n    markerEdit.on('drag', evt => {\n      this.updateLatlng(evt)\n    })\n    this.layerGroup.addLayer(markerEdit)\n    this.markerEdit = markerEdit\n\n    // 本体\n    this.createMarker({\n      latlng: latlng,\n      name: param.name,\n      desc: param.desc\n    })\n  }\n  createEntity(options) {\n    const pointEntity = new PointEntity(options)\n    return pointEntity\n  }\n  updateLatlng(evt) {\n    const lat = toFixed(evt.latlng.lat)\n    this.vm.currentPoint.lat = lat\n    this.vm.currentPoint.lng = getLng(evt.latlng.lng)\n\n    this.marker.setLatLng(evt.latlng)\n  }\n  setLatLng(lat, lng) {\n    if (lat < -90 || lat > 90 || lng > 180 || lng < -180) {\n      return\n    }\n    const latlng = L.latLng(lat, lng)\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n    if (this.marker) {\n      this.marker.setLatLng(latlng)\n    }\n    if (this.markerEdit) {\n      this.markerEdit.setLatLng(latlng)\n    }\n  }\n  draw() {\n    this.clear()\n    this.setMouseStatus(false)\n    this.map.on('click', clickEvent, this.clickContext)\n  }\n  drawCancel() {\n    this.map.off('click', clickEvent, this.clickContext)\n    this.setMouseStatus(true)\n  }\n  flyTo(item) {\n    this.clear()\n    const latlng = [item.Latitude, item.Longitude]\n    this.createMarker({\n      latlng: latlng,\n      name: item.name,\n      desc: item.description,\n      item: item\n    })\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  flyToEdit(item) {\n    const latlng = [item.Latitude, item.Longitude]\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  edit(item) {\n    this.clear()\n\n    // this.flyToEdit(item)\n    const pointEntity = this.createEntity({\n      id: item.id,\n      name: item.name,\n      altitude: item.altitude,\n      desc: item.description,\n      lat: item.latitude,\n      lng: item.longitude,\n      photos: item.photos,\n      target: item.target\n    })\n    this.vm.currentPoint = pointEntity\n    this.vm.page = 'edit'\n    this.createMarkerEdit({\n      latlng: pointEntity.getLatlng(),\n      name: item.name,\n      desc: item.description\n    })\n  }\n  clear() {\n    this.layerGroup.eachLayer(layer => {\n      layer.removeFrom(this.layerGroup)\n    })\n  }\n  clearById(id) {\n    if (!id) {\n      return\n    }\n    this.layerGroup.eachLayer(layer => {\n      if (layer.options && layer.options.item && layer.options.item.Id === id) {\n        layer.removeFrom(this.layerGroup)\n      }\n    })\n  }\n  setMouseStatus(df = true) {\n    if (df) {\n      L.DomUtil.removeClass(this.map._container, 'leaflet-cursor-crosshair')\n    } else {\n      L.DomUtil.addClass(this.map._container, 'leaflet-cursor-crosshair')\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,SAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,UAAA,GAAAH,OAAA;AACA,IAAAI,OAAA,GAAAJ,OAAA;AAEA,IAAMK,SAAS,GAAG,EAAE;AACpB,IAAIC,UAAU;AAEd,SAASC,UAAUA,CAACC,GAAG,EAAE;EACvB,IAAMC,MAAM,GAAGD,GAAG,CAACC,MAAM;EACzBH,UAAU,CAACI,GAAG,CAACC,UAAU,CAACC,KAAK,CAACC,MAAM,GAAG,EAAE;EAE3CP,UAAU,CAACQ,gBAAgB,CAAC;IAC1BL,MAAM,EAAEA,MAAM;IACdM,IAAI,EAAE;EACR,CAAC,CAAC;EAEFT,UAAU,CAACU,EAAE,CAACC,IAAI,GAAG,MAAM;EAC3B,IAAMC,WAAW,GAAGZ,UAAU,CAACa,YAAY,CAAC,CAAC,CAAC,CAAC;EAC/Cb,UAAU,CAACU,EAAE,CAACI,YAAY,GAAGF,WAAW;EAExCZ,UAAU,CAACe,YAAY,CAACb,GAAG,CAAC;EAE5BF,UAAU,CAACI,GAAG,CAACY,GAAG,CAAC,OAAO,EAAEf,UAAU,EAAED,UAAU,CAACiB,YAAY,CAAC;EAChEjB,UAAU,CAACU,EAAE,CAACQ,OAAO,GAAG,KAAK;EAC7BlB,UAAU,CAACmB,cAAc,CAAC,IAAI,CAAC;AACjC;AAAC,IAEoBC,OAAO;EAC1B,SAAAA,QAAYC,MAAM,EAAE;IAAA,IAAAC,gBAAA,CAAAC,OAAA,QAAAH,OAAA;IAClB,IAAI,CAAChB,GAAG,GAAGoB,MAAM,CAACpB,GAAG;IACrB,IAAI,CAACM,EAAE,GAAGW,MAAM;IAChB,IAAI,CAACI,UAAU,GAAGC,gBAAC,CAACD,UAAU,EAAE,CAACE,KAAK,CAAC,IAAI,CAACvB,GAAG,CAAC;IAEhD,IAAI,CAACwB,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACZ,YAAY,GAAG,gBAAgB;IACpCjB,UAAU,GAAG,IAAI;EACnB;EAAC,IAAA8B,aAAA,CAAAP,OAAA,EAAAH,OAAA;IAAAW,GAAA;IAAAC,KAAA,EACD,SAAAC,aAAaC,KAAK,EAAE;MAClB,IAAMC,IAAI,GAAGT,gBAAC,CAACS,IAAI,CAAC;QAClBC,OAAO,EAAEC,iBAAW;QACpBC,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;QAClBC,UAAU,EAAE,CAAC,EAAE,EAAE,EAAE;MACrB,CAAC,CAAC;MACF,IAAMX,MAAM,GAAGF,gBAAC,CAACE,MAAM,CAACM,KAAK,CAAC/B,MAAM,EAAE;QACpCgC,IAAI,EAAEA,IAAI;QACVK,IAAI,EAAEN,KAAK,CAACM;MACd,CAAC,CAAC;MACF,IAAI,CAACf,UAAU,CAACgB,QAAQ,CAACb,MAAM,CAAC;MAEhC,IAAIM,KAAK,CAACzB,IAAI,EAAE;QACd,IAAMiC,MAAM,GAAG;UACbA,MAAM,EAAE,IAAIhB,gBAAC,CAACiB,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE;QAC5B,CAAC;QACDf,MAAM,CAACgB,SAAS,CAACV,KAAK,CAACzB,IAAI,GAAG,MAAM,GAAGyB,KAAK,CAACW,IAAI,EAAEH,MAAM,CAAC,CAACI,SAAS,EAAE;MACxE;MACA,IAAI,CAAClB,MAAM,GAAGA,MAAM;MACpB,OAAOA,MAAM;IACf;EAAC;IAAAG,GAAA;IAAAC,KAAA,EACD,SAAAxB,iBAAiB0B,KAAK,EAAE;MAAA,IAAAa,KAAA;MACtB,IAAM5C,MAAM,GAAG+B,KAAK,CAAC/B,MAAM;MAC3B,IAAMgC,IAAI,GAAGT,gBAAC,CAACsB,OAAO,CAAC;QACrBC,SAAS,EAAE,uBAAuB;QAClCX,QAAQ,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;QAClBC,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC;MACnB,CAAC,CAAC;MACF;MACA,IAAMV,UAAU,GAAGH,gBAAC,CAACE,MAAM,CAACzB,MAAM,EAAE;QAClCgC,IAAI,EAAEA,IAAI;QACVe,SAAS,EAAE;MACb,CAAC,CAAC;MACFrB,UAAU,CAACsB,EAAE,CAAC,MAAM,EAAE,UAAAjD,GAAG,EAAI;QAC3B6C,KAAI,CAAChC,YAAY,CAACb,GAAG,CAAC;MACxB,CAAC,CAAC;MACF,IAAI,CAACuB,UAAU,CAACgB,QAAQ,CAACZ,UAAU,CAAC;MACpC,IAAI,CAACA,UAAU,GAAGA,UAAU;;MAE5B;MACA,IAAI,CAACI,YAAY,CAAC;QAChB9B,MAAM,EAAEA,MAAM;QACdM,IAAI,EAAEyB,KAAK,CAACzB,IAAI;QAChBoC,IAAI,EAAEX,KAAK,CAACW;MACd,CAAC,CAAC;IACJ;EAAC;IAAAd,GAAA;IAAAC,KAAA,EACD,SAAAnB,aAAauC,OAAO,EAAE;MACpB,IAAMxC,WAAW,GAAG,IAAIyC,oBAAW,CAACD,OAAO,CAAC;MAC5C,OAAOxC,WAAW;IACpB;EAAC;IAAAmB,GAAA;IAAAC,KAAA,EACD,SAAAjB,aAAab,GAAG,EAAE;MAChB,IAAMoD,GAAG,GAAG,IAAAC,eAAO,EAACrD,GAAG,CAACC,MAAM,CAACmD,GAAG,CAAC;MACnC,IAAI,CAAC5C,EAAE,CAACI,YAAY,CAACwC,GAAG,GAAGA,GAAG;MAC9B,IAAI,CAAC5C,EAAE,CAACI,YAAY,CAAC0C,GAAG,GAAG,IAAAC,iBAAM,EAACvD,GAAG,CAACC,MAAM,CAACqD,GAAG,CAAC;MAEjD,IAAI,CAAC5B,MAAM,CAAC8B,SAAS,CAACxD,GAAG,CAACC,MAAM,CAAC;IACnC;EAAC;IAAA4B,GAAA;IAAAC,KAAA,EACD,SAAA0B,UAAUJ,GAAG,EAAEE,GAAG,EAAE;MAClB,IAAIF,GAAG,GAAG,CAAC,EAAE,IAAIA,GAAG,GAAG,EAAE,IAAIE,GAAG,GAAG,GAAG,IAAIA,GAAG,GAAG,CAAC,GAAG,EAAE;QACpD;MACF;MACA,IAAMrD,MAAM,GAAGuB,gBAAC,CAACiC,MAAM,CAACL,GAAG,EAAEE,GAAG,CAAC;MACjC,IAAI,CAACpD,GAAG,CAACwD,KAAK,CAACzD,MAAM,EAAEJ,SAAS,EAAE;QAAE8D,OAAO,EAAE;MAAM,CAAC,CAAC;MACrD,IAAI,IAAI,CAACjC,MAAM,EAAE;QACf,IAAI,CAACA,MAAM,CAAC8B,SAAS,CAACvD,MAAM,CAAC;MAC/B;MACA,IAAI,IAAI,CAAC0B,UAAU,EAAE;QACnB,IAAI,CAACA,UAAU,CAAC6B,SAAS,CAACvD,MAAM,CAAC;MACnC;IACF;EAAC;IAAA4B,GAAA;IAAAC,KAAA,EACD,SAAA8B,KAAA,EAAO;MACL,IAAI,CAACC,KAAK,EAAE;MACZ,IAAI,CAAC5C,cAAc,CAAC,KAAK,CAAC;MAC1B,IAAI,CAACf,GAAG,CAAC+C,EAAE,CAAC,OAAO,EAAElD,UAAU,EAAE,IAAI,CAACgB,YAAY,CAAC;IACrD;EAAC;IAAAc,GAAA;IAAAC,KAAA,EACD,SAAAgC,WAAA,EAAa;MACX,IAAI,CAAC5D,GAAG,CAACY,GAAG,CAAC,OAAO,EAAEf,UAAU,EAAE,IAAI,CAACgB,YAAY,CAAC;MACpD,IAAI,CAACE,cAAc,CAAC,IAAI,CAAC;IAC3B;EAAC;IAAAY,GAAA;IAAAC,KAAA,EACD,SAAA4B,MAAMpB,IAAI,EAAE;MACV,IAAI,CAACuB,KAAK,EAAE;MACZ,IAAM5D,MAAM,GAAG,CAACqC,IAAI,CAACyB,QAAQ,EAAEzB,IAAI,CAAC0B,SAAS,CAAC;MAC9C,IAAI,CAACjC,YAAY,CAAC;QAChB9B,MAAM,EAAEA,MAAM;QACdM,IAAI,EAAE+B,IAAI,CAAC/B,IAAI;QACfoC,IAAI,EAAEL,IAAI,CAAC2B,WAAW;QACtB3B,IAAI,EAAEA;MACR,CAAC,CAAC;MACF,IAAI,CAACpC,GAAG,CAACwD,KAAK,CAACzD,MAAM,EAAEJ,SAAS,EAAE;QAAE8D,OAAO,EAAE;MAAM,CAAC,CAAC;IACvD;EAAC;IAAA9B,GAAA;IAAAC,KAAA,EACD,SAAAoC,UAAU5B,IAAI,EAAE;MACd,IAAMrC,MAAM,GAAG,CAACqC,IAAI,CAACyB,QAAQ,EAAEzB,IAAI,CAAC0B,SAAS,CAAC;MAC9C,IAAI,CAAC9D,GAAG,CAACwD,KAAK,CAACzD,MAAM,EAAEJ,SAAS,EAAE;QAAE8D,OAAO,EAAE;MAAM,CAAC,CAAC;IACvD;EAAC;IAAA9B,GAAA;IAAAC,KAAA,EACD,SAAAqC,KAAK7B,IAAI,EAAE;MACT,IAAI,CAACuB,KAAK,EAAE;;MAEZ;MACA,IAAMnD,WAAW,GAAG,IAAI,CAACC,YAAY,CAAC;QACpCyD,EAAE,EAAE9B,IAAI,CAAC8B,EAAE;QACX7D,IAAI,EAAE+B,IAAI,CAAC/B,IAAI;QACf8D,QAAQ,EAAE/B,IAAI,CAAC+B,QAAQ;QACvB1B,IAAI,EAAEL,IAAI,CAAC2B,WAAW;QACtBb,GAAG,EAAEd,IAAI,CAACgC,QAAQ;QAClBhB,GAAG,EAAEhB,IAAI,CAACiC,SAAS;QACnBC,MAAM,EAAElC,IAAI,CAACkC,MAAM;QACnBC,MAAM,EAAEnC,IAAI,CAACmC;MACf,CAAC,CAAC;MACF,IAAI,CAACjE,EAAE,CAACI,YAAY,GAAGF,WAAW;MAClC,IAAI,CAACF,EAAE,CAACC,IAAI,GAAG,MAAM;MACrB,IAAI,CAACH,gBAAgB,CAAC;QACpBL,MAAM,EAAES,WAAW,CAACgE,SAAS,EAAE;QAC/BnE,IAAI,EAAE+B,IAAI,CAAC/B,IAAI;QACfoC,IAAI,EAAEL,IAAI,CAAC2B;MACb,CAAC,CAAC;IACJ;EAAC;IAAApC,GAAA;IAAAC,KAAA,EACD,SAAA+B,MAAA,EAAQ;MAAA,IAAAc,MAAA;MACN,IAAI,CAACpD,UAAU,CAACqD,SAAS,CAAC,UAAAC,KAAK,EAAI;QACjCA,KAAK,CAACC,UAAU,CAACH,MAAI,CAACpD,UAAU,CAAC;MACnC,CAAC,CAAC;IACJ;EAAC;IAAAM,GAAA;IAAAC,KAAA,EACD,SAAAiD,UAAUX,EAAE,EAAE;MAAA,IAAAY,MAAA;MACZ,IAAI,CAACZ,EAAE,EAAE;QACP;MACF;MACA,IAAI,CAAC7C,UAAU,CAACqD,SAAS,CAAC,UAAAC,KAAK,EAAI;QACjC,IAAIA,KAAK,CAAC3B,OAAO,IAAI2B,KAAK,CAAC3B,OAAO,CAACZ,IAAI,IAAIuC,KAAK,CAAC3B,OAAO,CAACZ,IAAI,CAAC2C,EAAE,KAAKb,EAAE,EAAE;UACvES,KAAK,CAACC,UAAU,CAACE,MAAI,CAACzD,UAAU,CAAC;QACnC;MACF,CAAC,CAAC;IACJ;EAAC;IAAAM,GAAA;IAAAC,KAAA,EACD,SAAAb,eAAA,EAA0B;MAAA,IAAXiE,EAAE,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;MACtB,IAAID,EAAE,EAAE;QACN1D,gBAAC,CAAC8D,OAAO,CAACC,WAAW,CAAC,IAAI,CAACrF,GAAG,CAACC,UAAU,EAAE,0BAA0B,CAAC;MACxE,CAAC,MAAM;QACLqB,gBAAC,CAAC8D,OAAO,CAACE,QAAQ,CAAC,IAAI,CAACtF,GAAG,CAACC,UAAU,EAAE,0BAA0B,CAAC;MACrE;IACF;EAAC;EAAA,OAAAe,OAAA;AAAA;AAAAuE,OAAA,CAAApE,OAAA,GAAAH,OAAA"}]}