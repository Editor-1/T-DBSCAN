{"remainingRequest":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\ruoyi-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace\\ruoyi-ui\\src\\plugins\\shpwrite\\src\\dbfJS.js","dependencies":[{"path":"D:\\work\\workspace\\ruoyi-ui\\src\\plugins\\shpwrite\\src\\dbfJS.js","mtime":1714355784900},{"path":"D:\\work\\workspace\\ruoyi-ui\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy90eXBlb2YuanMiKS5kZWZhdWx0OwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwp2YXIgYWNjZXNzb3IgPSByZXF1aXJlKCdkYmYtanMnKTsKCi8qKgogKgogKiBAcGFyYW0gZGF0YTpBcnJheQogKiBAcGFyYW0gbWV0YTpBcnJheQogKi8KbW9kdWxlLmV4cG9ydHMuc3RydWN0dXJlID0gZnVuY3Rpb24gKGRhdGEsIGZpbGVOYW1lKSB7CiAgdmFyIGZpZWxkX21ldGEgPSBtdWx0aShkYXRhKTsKICB2YXIgdmFsQm9keSA9IFtdOwogIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocm93LCBudW0pIHsKICAgIHZhciB2YWwgPSB7fTsKICAgIGZpZWxkX21ldGEuZm9yRWFjaChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgdmFsW2ZpZWxkLm5hbWVdID0gcm93W2ZpZWxkLm5hbWVdOwogICAgfSk7CiAgICB2YWxCb2R5LnB1c2godmFsKTsKICB9KTsKICByZXR1cm4gYWNjZXNzb3Iud3JpdGUoZmllbGRfbWV0YSwgdmFsQm9keSwgZmlsZU5hbWUsICd1dGY4Jyk7IC8vIHV0ZjggYnkgd20gMjAyNC40LjI0Cn07Cgp2YXIgZmllbGRTaXplID0gewogIC8vIHN0cmluZwogIEM6IDI1NCwKICAvLyBib29sZWFuCiAgTDogMSwKICAvLyBkYXRlCiAgRDogOCwKICAvLyBudW1iZXIKICBOOiAxOCwKICAvLyBudW1iZXIKICBNOiAxOCwKICAvLyBudW1iZXIsIGZsb2F0CiAgRjogMTgsCiAgLy8gbnVtYmVyCiAgQjogOAp9OwpmdW5jdGlvbiBtdWx0aShmZWF0dXJlcykgewogIHZhciBmaWVsZHMgPSB7fTsKICBmZWF0dXJlcy5mb3JFYWNoKGNvbGxlY3QpOwogIGZ1bmN0aW9uIGNvbGxlY3QoZikgewogICAgaW5oZXJpdChmaWVsZHMsIGYpOwogIH0KICByZXR1cm4gb2JqKGZpZWxkcyk7Cn0KZnVuY3Rpb24gaW5oZXJpdChhLCBiKSB7CiAgZm9yICh2YXIgaSBpbiBiKSB7CiAgICB2YXIgaXNEZWYgPSB0eXBlb2YgYltpXSAhPT0gJ3VuZGVmaW5lZCcgJiYgYltpXSAhPT0gbnVsbDsKICAgIGlmICh0eXBlb2YgYVtpXSA9PT0gJ3VuZGVmaW5lZCcgfHwgaXNEZWYpIHsKICAgICAgYVtpXSA9IGJbaV07CiAgICB9CiAgfQogIHJldHVybiBhOwp9CmZ1bmN0aW9uIG9iaihfKSB7CiAgdmFyIGZpZWxkcyA9IHt9LAogICAgbyA9IFtdOwogIHZhciB0eXBlcyA9IHsKICAgIHN0cmluZzogJ0MnLAogICAgbnVtYmVyOiAnTicsCiAgICBib29sZWFuOiAnTCcsCiAgICAvLyB0eXBlIHRvIHVzZSBpZiBhbGwgdmFsdWVzIG9mIGEgZmllbGQgYXJlIG51bGwKICAgIG51bGw6ICdDJwogIH07CiAgZm9yICh2YXIgcCBpbiBfKSBmaWVsZHNbcF0gPSBfW3BdID09PSBudWxsID8gJ251bGwnIDogX3R5cGVvZihfW3BdKTsKICBmb3IgKHZhciBuIGluIGZpZWxkcykgewogICAgdmFyIHQgPSB0eXBlc1tmaWVsZHNbbl1dOwogICAgaWYgKHQpIHsKICAgICAgby5wdXNoKHsKICAgICAgICBuYW1lOiBuLAogICAgICAgIHR5cGU6IHQsCiAgICAgICAgc2l6ZTogZmllbGRTaXplW3RdCiAgICAgIH0pOwogICAgfQogIH0KICByZXR1cm4gbzsKfQ=="},{"version":3,"names":["accessor","require","module","exports","structure","data","fileName","field_meta","multi","valBody","forEach","row","num","val","field","name","push","write","fieldSize","C","L","D","N","M","F","B","features","fields","collect","f","inherit","obj","a","b","i","isDef","_","o","types","string","number","boolean","null","p","_typeof","n","t","type","size"],"sources":["D:/work/workspace/ruoyi-ui/src/plugins/shpwrite/src/dbfJS.js"],"sourcesContent":["const accessor = require('dbf-js')\n\n/**\n *\n * @param data:Array\n * @param meta:Array\n */\nmodule.exports.structure = function(data, fileName) {\n  let field_meta = multi(data)\n  let valBody = []\n  data.forEach(function(row, num) {\n    let val = {}\n    field_meta.forEach(field => {\n      val[field.name] = row[field.name]\n    })\n    valBody.push(val)\n  })\n\n  return accessor.write(field_meta, valBody, fileName, 'utf8') // utf8 by wm 2024.4.24\n}\n\nconst fieldSize = {\n  // string\n  C: 254,\n  // boolean\n  L: 1,\n  // date\n  D: 8,\n  // number\n  N: 18,\n  // number\n  M: 18,\n  // number, float\n  F: 18,\n  // number\n  B: 8\n}\n\n\n\nfunction multi(features) {\n  var fields = {}\n  features.forEach(collect)\n\n  function collect(f) {\n    inherit(fields, f)\n  }\n\n  return obj(fields)\n}\n\nfunction inherit(a, b) {\n  for (var i in b) {\n    var isDef = typeof b[i] !== 'undefined' && b[i] !== null\n    if (typeof a[i] === 'undefined' || isDef) {\n      a[i] = b[i]\n    }\n  }\n  return a\n}\n\nfunction obj(_) {\n  var fields = {}, o = []\n  var types = {\n    string: 'C',\n    number: 'N',\n    boolean: 'L',\n    // type to use if all values of a field are null\n    null: 'C'\n  };\n  for (var p in _) fields[p] = _[p] === null ? 'null' : typeof _[p]\n  for (var n in fields) {\n    var t = types[fields[n]]\n    if (t) {\n      o.push({\n        name: n,\n        type: t,\n        size: fieldSize[t]\n      })\n    }\n  }\n  return o\n}\n"],"mappings":";;;;;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,QAAQ,CAAC;;AAElC;AACA;AACA;AACA;AACA;AACAC,MAAM,CAACC,OAAO,CAACC,SAAS,GAAG,UAASC,IAAI,EAAEC,QAAQ,EAAE;EAClD,IAAIC,UAAU,GAAGC,KAAK,CAACH,IAAI,CAAC;EAC5B,IAAII,OAAO,GAAG,EAAE;EAChBJ,IAAI,CAACK,OAAO,CAAC,UAASC,GAAG,EAAEC,GAAG,EAAE;IAC9B,IAAIC,GAAG,GAAG,CAAC,CAAC;IACZN,UAAU,CAACG,OAAO,CAAC,UAAAI,KAAK,EAAI;MAC1BD,GAAG,CAACC,KAAK,CAACC,IAAI,CAAC,GAAGJ,GAAG,CAACG,KAAK,CAACC,IAAI,CAAC;IACnC,CAAC,CAAC;IACFN,OAAO,CAACO,IAAI,CAACH,GAAG,CAAC;EACnB,CAAC,CAAC;EAEF,OAAOb,QAAQ,CAACiB,KAAK,CAACV,UAAU,EAAEE,OAAO,EAAEH,QAAQ,EAAE,MAAM,CAAC,EAAC;AAC/D,CAAC;;AAED,IAAMY,SAAS,GAAG;EAChB;EACAC,CAAC,EAAE,GAAG;EACN;EACAC,CAAC,EAAE,CAAC;EACJ;EACAC,CAAC,EAAE,CAAC;EACJ;EACAC,CAAC,EAAE,EAAE;EACL;EACAC,CAAC,EAAE,EAAE;EACL;EACAC,CAAC,EAAE,EAAE;EACL;EACAC,CAAC,EAAE;AACL,CAAC;AAID,SAASjB,KAAKA,CAACkB,QAAQ,EAAE;EACvB,IAAIC,MAAM,GAAG,CAAC,CAAC;EACfD,QAAQ,CAAChB,OAAO,CAACkB,OAAO,CAAC;EAEzB,SAASA,OAAOA,CAACC,CAAC,EAAE;IAClBC,OAAO,CAACH,MAAM,EAAEE,CAAC,CAAC;EACpB;EAEA,OAAOE,GAAG,CAACJ,MAAM,CAAC;AACpB;AAEA,SAASG,OAAOA,CAACE,CAAC,EAAEC,CAAC,EAAE;EACrB,KAAK,IAAIC,CAAC,IAAID,CAAC,EAAE;IACf,IAAIE,KAAK,GAAG,OAAOF,CAAC,CAACC,CAAC,CAAC,KAAK,WAAW,IAAID,CAAC,CAACC,CAAC,CAAC,KAAK,IAAI;IACxD,IAAI,OAAOF,CAAC,CAACE,CAAC,CAAC,KAAK,WAAW,IAAIC,KAAK,EAAE;MACxCH,CAAC,CAACE,CAAC,CAAC,GAAGD,CAAC,CAACC,CAAC,CAAC;IACb;EACF;EACA,OAAOF,CAAC;AACV;AAEA,SAASD,GAAGA,CAACK,CAAC,EAAE;EACd,IAAIT,MAAM,GAAG,CAAC,CAAC;IAAEU,CAAC,GAAG,EAAE;EACvB,IAAIC,KAAK,GAAG;IACVC,MAAM,EAAE,GAAG;IACXC,MAAM,EAAE,GAAG;IACXC,OAAO,EAAE,GAAG;IACZ;IACAC,IAAI,EAAE;EACR,CAAC;EACD,KAAK,IAAIC,CAAC,IAAIP,CAAC,EAAET,MAAM,CAACgB,CAAC,CAAC,GAAGP,CAAC,CAACO,CAAC,CAAC,KAAK,IAAI,GAAG,MAAM,GAAAC,OAAA,CAAUR,CAAC,CAACO,CAAC,CAAC;EACjE,KAAK,IAAIE,CAAC,IAAIlB,MAAM,EAAE;IACpB,IAAImB,CAAC,GAAGR,KAAK,CAACX,MAAM,CAACkB,CAAC,CAAC,CAAC;IACxB,IAAIC,CAAC,EAAE;MACLT,CAAC,CAACrB,IAAI,CAAC;QACLD,IAAI,EAAE8B,CAAC;QACPE,IAAI,EAAED,CAAC;QACPE,IAAI,EAAE9B,SAAS,CAAC4B,CAAC;MACnB,CAAC,CAAC;IACJ;EACF;EACA,OAAOT,CAAC;AACV"}]}