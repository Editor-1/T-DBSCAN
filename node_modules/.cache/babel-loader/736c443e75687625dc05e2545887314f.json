{"remainingRequest":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\comm\\network2.js","dependencies":[{"path":"D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\comm\\network2.js","mtime":1720085310813},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZV93bS93ZWItdWktdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwp2YXIgX2F4aW9zID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJheGlvcyIpKTsKdmFyIF9sZWFmbGV0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsZWFmbGV0IikpOwp2YXIgbmV0d29ya0xheWVyOwpmdW5jdGlvbiBwYXJzZVhNTCh4bWxTdHJpbmcpIHsKICB2YXIgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogIHZhciB4bWxEb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHhtbFN0cmluZywgJ3RleHQveG1sJyk7CiAgY29uc29sZS5sb2coeG1sRG9jKTsKICB2YXIgcm91dGVsYXRsb24gPSB4bWxEb2MuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3JvdXRlbGF0bG9uJyk7CiAgaWYgKHJvdXRlbGF0bG9uKSB7CiAgICB2YXIgcG9pbnRzU3RyID0gcm91dGVsYXRsb25bMF0uaW5uZXJIVE1MOwogICAgY29uc29sZS5sb2cocG9pbnRzU3RyKTsKICAgIHZhciBsYXRMbmdzID0gW107CiAgICB2YXIgYXJyID0gcG9pbnRzU3RyLnNwbGl0KCc7Jyk7CiAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICB2YXIgeHkgPSBpdGVtLnNwbGl0KCcsJyk7CiAgICAgIGlmICh4eS5sZW5ndGggPT09IDIpIHsKICAgICAgICBsYXRMbmdzLnB1c2goX2xlYWZsZXQuZGVmYXVsdC5sYXRMbmcoeHlbMV0sIHh5WzBdKSk7CiAgICAgIH0KICAgIH0pOwogICAgdmFyIGxheWVyID0gZHJhd1BhdGhMaW5lKGxhdExuZ3MpOwogICAgd2luZG93LlRLTWFwLmZpdEJvdW5kcyhsYXllci5nZXRCb3VuZHMoKSk7CiAgfQogIGNvbnNvbGUubG9nKHJvdXRlbGF0bG9uKTsKICByZXR1cm4geG1sRG9jOwp9CmZ1bmN0aW9uIGZpbmRSb3V0ZShvcHRpb25zKSB7CiAgLy8ge3g6IDEyMS40NzEwMDIxMDE4OTgyLDMxLjY4OTgyNzQ0MjE2OTE5fQogIC8vIHt4OiAxMjEuNDgyMzMxNzUyNzc3MSwzMS42ODIxODg1MTA4OTQ3NzV9CgogIC8vIHt4OiAxMjEuNDcxOTY3Njk3MTQzNTUsIDMxLjY4MDUzNjI3MDE0MTZ9CiAgLy8ge3g6IDEyMS40ODIxODE1NDkwNzIyNywgMzEuNjg1MzIxMzMxMDI0MTd9CgogIF9heGlvcy5kZWZhdWx0LmdldCgnaHR0cDovL2FwaS50aWFuZGl0dS5nb3YuY24vZHJpdmU/cG9zdFN0cj17Im9yaWciOiIxMjEuNDcxOTY3Njk3MTQzNTUsIDMxLjY4MDUzNjI3MDE0MTYiLCJkZXN0IjoiMTIxLjQ4MjE4MTU0OTA3MjI3LCAzMS42ODUzMjEzMzEwMjQxNyIsInN0eWxlIjoiMCJ9JnR5cGU9c2VhcmNoJnRrPTg5ZGVhM2VhYjU2MWYwZGZiOTg2N2U1MzE0MTVlMDE1JykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTsKICAgIHZhciBkYXRhID0gcmVzLmRhdGE7CiAgICBwYXJzZVhNTChkYXRhKTsKICB9KTsKfQpmdW5jdGlvbiBmaW5kUm91dGUyKG9wdGlvbnMpIHsKICBjbGVhcigpOwogIHZhciBzdGFydCA9IG9wdGlvbnMuc3RhcnQ7CiAgdmFyIGVuZCA9IG9wdGlvbnMuZW5kOwogIHZhciBvcmlnID0gJyInICsgc3RhcnQueCArICcsICcgKyBzdGFydC55ICsgJyInOwogIHZhciBkZXN0ID0gJyInICsgZW5kLnggKyAnLCAnICsgZW5kLnkgKyAnIic7CiAgY29uc29sZS5sb2coJ29yaWcnLCBvcmlnLCBkZXN0KTsKICBfYXhpb3MuZGVmYXVsdC5nZXQoJ2h0dHA6Ly9hcGkudGlhbmRpdHUuZ292LmNuL2RyaXZlP3Bvc3RTdHI9eyJvcmlnIjonICsgb3JpZyArICcsImRlc3QiOicgKyBkZXN0ICsgJywic3R5bGUiOiIwIn0mdHlwZT1zZWFyY2gmdGs9ODlkZWEzZWFiNTYxZjBkZmI5ODY3ZTUzMTQxNWUwMTUnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpOwogICAgdmFyIGRhdGEgPSByZXMuZGF0YTsKICAgIHBhcnNlWE1MKGRhdGEpOwogIH0pOwp9CgovKioKICogQGFwaUdyb3VwIOe9kee7nOWIhuaekAogKiBAYXBpIGNsZWFyIOa4hemZpOe9kee7nOWIhuaekOi3r+W+hOe6vwogKiBAYXBpUGFyYW1FeGFtcGxlIOekuuS+iwogICBOZXR3b3JrLmNsZWFyKCkKICovCmZ1bmN0aW9uIGNsZWFyKCkgewogIGlmIChuZXR3b3JrTGF5ZXIpIHsKICAgIG5ldHdvcmtMYXllci5jbGVhckxheWVycygpOwogIH0KfQoKLyoqCiAqIEBhcGlHcm91cCDnvZHnu5zliIbmnpAKICogQGFwaSBpbXBvcnQg5qih5Z2X5byV5YWlCiAqIEBhcGlEZXNjcmlwdGlvbiDpnIDopoHohb7nkKjot6/lvoTliIbmnpDlkI7lj7DmnI3liqHvvIwvbmEvZmluZFJvdXRlVmlhLCAvbmEvZmluZFJvdXRlCiAqIEBhcGlQYXJhbUV4YW1wbGUg56S65L6LCiAgICBpbXBvcnQgeyBOZXR3b3JrIH0gZnJvbSDigJh0a2xldG1hcOKAmAogKi8KdmFyIF9kZWZhdWx0ID0gewogIGZpbmRSb3V0ZTogZmluZFJvdXRlLAogIGZpbmRSb3V0ZTI6IGZpbmRSb3V0ZTIsCiAgY2xlYXI6IGNsZWFyCn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"names":["_axios","_interopRequireDefault","require","_leaflet","networkLayer","parseXML","xmlString","parser","DOMParser","xmlDoc","parseFromString","console","log","routelatlon","getElementsByTagName","pointsStr","innerHTML","latLngs","arr","split","forEach","item","xy","length","push","L","latLng","layer","drawPathLine","window","TKMap","fitBounds","getBounds","findRoute","options","axios","get","then","res","data","findRoute2","clear","start","end","orig","x","y","dest","clearLayers","_default","exports","default"],"sources":["D:/work/workspace_wm/web-ui-travel/src/views/biz/tools/comm/network2.js"],"sourcesContent":["import axios from 'axios'\nimport L from 'leaflet'\n\nlet networkLayer\nfunction parseXML(xmlString) {\n  var parser = new DOMParser()\n  var xmlDoc = parser.parseFromString(xmlString, 'text/xml')\n  console.log(xmlDoc)\n  const routelatlon = xmlDoc.getElementsByTagName('routelatlon')\n  if (routelatlon) {\n    const pointsStr = routelatlon[0].innerHTML\n    console.log(pointsStr)\n    const latLngs = []\n    const arr = pointsStr.split(';')\n    arr.forEach(item => {\n      const xy = item.split(',')\n      if (xy.length === 2) {\n        latLngs.push(L.latLng(xy[1], xy[0]))\n      }\n    })\n    const layer = drawPathLine(latLngs)\n    window.TKMap.fitBounds(layer.getBounds())\n  }\n  console.log(routelatlon)\n\n  return xmlDoc\n}\nfunction findRoute(options) {\n  // {x: 121.4710021018982,31.68982744216919}\n  // {x: 121.4823317527771,31.682188510894775}\n\n  // {x: 121.47196769714355, 31.6805362701416}\n  // {x: 121.48218154907227, 31.68532133102417}\n\n  axios.get('http://api.tianditu.gov.cn/drive?postStr={\"orig\":\"121.47196769714355, 31.6805362701416\",\"dest\":\"121.48218154907227, 31.68532133102417\",\"style\":\"0\"}&type=search&tk=89dea3eab561f0dfb9867e531415e015').then(res => {\n    console.log('res', res)\n    const data = res.data\n    parseXML(data)\n  })\n}\nfunction findRoute2(options) {\n  clear()\n  const start = options.start\n  const end = options.end\n  const orig = '\"' + start.x + ', ' + start.y + '\"'\n  const dest = '\"' + end.x + ', ' + end.y + '\"'\n\n  console.log('orig', orig, dest)\n  axios.get('http://api.tianditu.gov.cn/drive?postStr={\"orig\":' + orig + ',\"dest\":' + dest + ',\"style\":\"0\"}&type=search&tk=89dea3eab561f0dfb9867e531415e015').then(res => {\n    console.log('res', res)\n    const data = res.data\n    parseXML(data)\n  })\n}\n\n/**\n * @apiGroup 网络分析\n * @api clear 清除网络分析路径线\n * @apiParamExample 示例\n   Network.clear()\n */\nfunction clear() {\n  if (networkLayer) {\n    networkLayer.clearLayers()\n  }\n}\n\n/**\n * @apiGroup 网络分析\n * @api import 模块引入\n * @apiDescription 需要腾琨路径分析后台服务，/na/findRouteVia, /na/findRoute\n * @apiParamExample 示例\n    import { Network } from ‘tkletmap‘\n */\nexport default {\n  findRoute,\n  findRoute2,\n  clear\n}\n\n"],"mappings":"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"}]}