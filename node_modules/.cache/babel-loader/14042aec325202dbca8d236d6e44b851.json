{"remainingRequest":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace\\ruoyi-ui\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace\\ruoyi-ui\\src\\plugins\\shpwrite\\src\\zip.js","dependencies":[{"path":"D:\\work\\workspace\\ruoyi-ui\\src\\plugins\\shpwrite\\src\\zip.js","mtime":1713921359920},{"path":"D:\\work\\workspace\\ruoyi-ui\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace\\ruoyi-ui\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZS9ydW95aS11aS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyLmpzIikuZGVmYXVsdDsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKdmFyIHdyaXRlID0gcmVxdWlyZSgiLi93cml0ZSIpOwp2YXIgZ2VvanNvbiA9IHJlcXVpcmUoIi4vZ2VvanNvbiIpOwp2YXIgZGVmYXVsdFByaiA9IHJlcXVpcmUoJy4vcHJqJyk7CnZhciBKU1ppcCA9IHJlcXVpcmUoImpzemlwIik7Cm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGdqLCBvcHRpb25zKSB7CiAgdmFyIHN0cmVhbSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogZmFsc2U7CiAgdmFyIHppcCA9IG5ldyBKU1ppcCgpOwogIHZhciB6aXBUYXJnZXQgPSB6aXA7CiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5mb2xkZXIpIHsKICAgIHppcFRhcmdldCA9IHppcC5mb2xkZXIob3B0aW9ucy5mb2xkZXIpOwogIH0KICB2YXIgcHJqID0gb3B0aW9ucyAmJiBvcHRpb25zLnByaiA/IG9wdGlvbnMucHJqIDogZGVmYXVsdFByajsKICBbZ2VvanNvbi5wb2ludChnaiksIGdlb2pzb24ubGluZShnaiksIGdlb2pzb24ucG9seWdvbihnaiksIGdlb2pzb24ubXVsdGlwb2x5Z29uKGdqKSwgZ2VvanNvbi5tdWx0aWxpbmUoZ2opXS5mb3JFYWNoKGZ1bmN0aW9uIChsKSB7CiAgICBpZiAobC5nZW9tZXRyaWVzLmxlbmd0aCAmJiBsLmdlb21ldHJpZXNbMF0ubGVuZ3RoKSB7CiAgICAgIHdyaXRlKAogICAgICAvLyBmaWVsZCBkZWZpbml0aW9ucwogICAgICBsLnByb3BlcnRpZXMsCiAgICAgIC8vIGdlb21ldHJ5IHR5cGUKICAgICAgbC50eXBlLAogICAgICAvLyBnZW9tZXRyaWVzCiAgICAgIGwuZ2VvbWV0cmllcywgZnVuY3Rpb24gKGVyciwgZmlsZXMpIHsKICAgICAgICB2YXIgZmlsZU5hbWUgPSBvcHRpb25zICYmIG9wdGlvbnMudHlwZXMgJiYgb3B0aW9ucy50eXBlc1tsLnR5cGUudG9Mb3dlckNhc2UoKV0gPyBvcHRpb25zLnR5cGVzW2wudHlwZS50b0xvd2VyQ2FzZSgpXSA6IGwudHlwZTsKICAgICAgICB6aXBUYXJnZXQuZmlsZShmaWxlTmFtZSArICIuc2hwIiwgZmlsZXMuc2hwLmJ1ZmZlciwgewogICAgICAgICAgYmluYXJ5OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgemlwVGFyZ2V0LmZpbGUoZmlsZU5hbWUgKyAiLnNoeCIsIGZpbGVzLnNoeC5idWZmZXIsIHsKICAgICAgICAgIGJpbmFyeTogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIHppcFRhcmdldC5maWxlKGZpbGVOYW1lICsgIi5kYmYiLCBmaWxlcy5kYmYsIHsKICAgICAgICAgIGJpbmFyeTogdHJ1ZQogICAgICAgIH0pOyAvLyAuYnVmZmVyCiAgICAgICAgemlwVGFyZ2V0LmZpbGUoZmlsZU5hbWUgKyAiLnByaiIsIHByaik7CiAgICAgICAgemlwVGFyZ2V0LmZpbGUoZmlsZU5hbWUgKyAiLmNwZyIsICd1dGYtOCcpOwogICAgICB9KTsKICAgIH0KICB9KTsKICB2YXIgemlwT3B0aW9ucyA9IHt9OwogIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5vdXRwdXRUeXBlKSB7CiAgICB6aXBPcHRpb25zLnR5cGUgPSAiYmFzZTY0IjsKICB9IGVsc2UgewogICAgemlwT3B0aW9ucy50eXBlID0gb3B0aW9ucy5vdXRwdXRUeXBlOwogIH0KICBpZiAoIW9wdGlvbnMgfHwgIW9wdGlvbnMuY29tcHJlc3Npb24pIHsKICAgIHppcE9wdGlvbnMuY29tcHJlc3Npb24gPSAiREVGTEFURSI7CiAgfSBlbHNlIHsKICAgIHppcE9wdGlvbnMuY29tcHJlc3Npb24gPSBvcHRpb25zLmNvbXByZXNzaW9uOwogIH0KICBpZiAoc3RyZWFtKSB7CiAgICByZXR1cm4gemlwLmdlbmVyYXRlTm9kZVN0cmVhbShfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHppcE9wdGlvbnMpLCB7fSwgewogICAgICBzdHJlYW1GaWxlczogdHJ1ZQogICAgfSkpOwogIH0KICByZXR1cm4gemlwLmdlbmVyYXRlQXN5bmMoemlwT3B0aW9ucyk7Cn07"},{"version":3,"names":["write","require","geojson","defaultPrj","JSZip","module","exports","gj","options","stream","arguments","length","undefined","zip","zipTarget","folder","prj","point","line","polygon","multipolygon","multiline","forEach","l","geometries","properties","type","err","files","fileName","types","toLowerCase","file","shp","buffer","binary","shx","dbf","zipOptions","outputType","compression","generateNodeStream","_objectSpread","streamFiles","generateAsync"],"sources":["D:/work/workspace/ruoyi-ui/src/plugins/shpwrite/src/zip.js"],"sourcesContent":["var write = require(\"./write\");\nvar geojson = require(\"./geojson\");\nvar defaultPrj = require('./prj');\nvar JSZip = require(\"jszip\");\n\n\nmodule.exports = function (\n  gj,\n  options,\n  stream = false\n) {\n  let zip = new JSZip();\n  let zipTarget = zip;\n  if (options && options.folder) {\n    zipTarget = zip.folder(options.folder);\n  }\n\n  var prj = (options && options.prj) ? options.prj : defaultPrj;\n\n  [\n    geojson.point(gj),\n    geojson.line(gj),\n    geojson.polygon(gj),\n    geojson.multipolygon(gj),\n    geojson.multiline(gj),\n  ].forEach(function (l) {\n    if (l.geometries.length && l.geometries[0].length) {\n      write(\n        // field definitions\n        l.properties,\n        // geometry type\n        l.type,\n        // geometries\n        l.geometries,\n        function (err, files) {\n          var fileName =\n            options && options.types && options.types[l.type.toLowerCase()]\n              ? options.types[l.type.toLowerCase()]\n              : l.type;\n          zipTarget.file(fileName + \".shp\", files.shp.buffer, { binary: true });\n          zipTarget.file(fileName + \".shx\", files.shx.buffer, { binary: true });\n          zipTarget.file(fileName + \".dbf\", files.dbf, { binary: true }); // .buffer\n          zipTarget.file(fileName + \".prj\", prj);\n          zipTarget.file(fileName + \".cpg\", 'utf-8');\n        }\n      );\n    }\n  });\n\n  var zipOptions = {};\n  if (!options || !options.outputType) {\n    zipOptions.type = \"base64\";\n  } else {\n    zipOptions.type = options.outputType;\n  }\n\n  if (!options || !options.compression) {\n    zipOptions.compression = \"DEFLATE\";\n  } else {\n    zipOptions.compression = options.compression;\n  }\n\n  if (stream) {\n    return zip.generateNodeStream({ ...zipOptions, streamFiles: true });\n  }\n\n  return zip.generateAsync(zipOptions);\n};\n"],"mappings":"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"}]}