{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\DrawPoi.js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\poi\\DrawPoi.js","mtime":1720084653000},{"path":"E:\\workspacevsCode\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1720856214296}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyIpOwp2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoIkU6L3dvcmtzcGFjZXZzQ29kZS93ZWItdWktdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyIpLmRlZmF1bHQ7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwp2YXIgX2NsYXNzQ2FsbENoZWNrMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRTovd29ya3NwYWNldnNDb2RlL3dlYi11aS10cmF2ZWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiKSk7CnZhciBfY3JlYXRlQ2xhc3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJFOi93b3Jrc3BhY2V2c0NvZGUvd2ViLXVpLXRyYXZlbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIpKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiKTsKdmFyIF9sZWFmbGV0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJsZWFmbGV0IikpOwp2YXIgX2xvY2F0aW9uID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL2Fzc2V0cy9pbWFnZXMvbG9jYXRpb24ucG5nIikpOwp2YXIgX1BvaW50RW50aXR5ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL1BvaW50RW50aXR5IikpOwp2YXIgX0xvbmdpdHVkZSA9IHJlcXVpcmUoIi4vTG9uZ2l0dWRlMTgwIik7CnZhciBfY29tbW9uID0gcmVxdWlyZSgiLi4vYml6L2NvbW1vbiIpOwp2YXIgRmx5X0xldmVsID0gMTA7CnZhciBkcmF3UG9pT2JqOwpmdW5jdGlvbiBjbGlja0V2ZW50KGV2dCkgewogIHZhciBsYXRsbmcgPSBldnQubGF0bG5nOwogIGRyYXdQb2lPYmoubWFwLl9jb250YWluZXIuc3R5bGUuY3Vyc29yID0gJyc7CiAgZHJhd1BvaU9iai5jcmVhdGVNYXJrZXJFZGl0KHsKICAgIGxhdGxuZzogbGF0bG5nLAogICAgbmFtZTogJycKICB9KTsKICBkcmF3UG9pT2JqLnZtLnBhZ2UgPSAnZWRpdCc7CiAgdmFyIHBvaW50RW50aXR5ID0gZHJhd1BvaU9iai5jcmVhdGVFbnRpdHkoe30pOwogIGRyYXdQb2lPYmoudm0uY3VycmVudFBvaW50ID0gcG9pbnRFbnRpdHk7CiAgZHJhd1BvaU9iai51cGRhdGVMYXRsbmcoZXZ0KTsKICBkcmF3UG9pT2JqLm1hcC5vZmYoJ2NsaWNrJywgY2xpY2tFdmVudCwgZHJhd1BvaU9iai5jbGlja0NvbnRleHQpOwogIGRyYXdQb2lPYmoudm0uZHJhd2luZyA9IGZhbHNlOwogIGRyYXdQb2lPYmouc2V0TW91c2VTdGF0dXModHJ1ZSk7Cn0KdmFyIERyYXdQb2kgPSBleHBvcnRzLmRlZmF1bHQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERyYXdQb2kocGFyZW50KSB7CiAgICAoMCwgX2NsYXNzQ2FsbENoZWNrMi5kZWZhdWx0KSh0aGlzLCBEcmF3UG9pKTsKICAgIHRoaXMubWFwID0gd2luZG93Lm1hcDsKICAgIHRoaXMudm0gPSBwYXJlbnQ7CiAgICB0aGlzLmxheWVyR3JvdXAgPSBfbGVhZmxldC5kZWZhdWx0LmxheWVyR3JvdXAoKS5hZGRUbyh0aGlzLm1hcCk7CiAgICB0aGlzLm1hcmtlciA9IG51bGw7CiAgICB0aGlzLm1hcmtlckVkaXQgPSBudWxsOwogICAgdGhpcy5jbGlja0NvbnRleHQgPSAnRHJhd1BvaUNvbnRleHQnOwogICAgZHJhd1BvaU9iaiA9IHRoaXM7CiAgfQogIHJldHVybiAoMCwgX2NyZWF0ZUNsYXNzMi5kZWZhdWx0KShEcmF3UG9pLCBbewogICAga2V5OiAiY3JlYXRlTWFya2VyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVNYXJrZXIocGFyYW0pIHsKICAgICAgdmFyIGljb24gPSBfbGVhZmxldC5kZWZhdWx0Lmljb24oewogICAgICAgIGljb25Vcmw6IF9sb2NhdGlvbi5kZWZhdWx0LAogICAgICAgIGljb25TaXplOiBbMzIsIDMyXSwKICAgICAgICBpY29uQW5jaG9yOiBbMTYsIDMyXQogICAgICB9KTsKICAgICAgdmFyIG1hcmtlciA9IF9sZWFmbGV0LmRlZmF1bHQubWFya2VyKHBhcmFtLmxhdGxuZywgewogICAgICAgIGljb246IGljb24sCiAgICAgICAgaXRlbTogcGFyYW0uaXRlbQogICAgICB9KTsKICAgICAgdGhpcy5sYXllckdyb3VwLmFkZExheWVyKG1hcmtlcik7CiAgICAgIGlmIChwYXJhbS5uYW1lKSB7CiAgICAgICAgdmFyIG9mZnNldCA9IHsKICAgICAgICAgIG9mZnNldDogbmV3IF9sZWFmbGV0LmRlZmF1bHQuUG9pbnQoMCwgLTIwKQogICAgICAgIH07CiAgICAgICAgbWFya2VyLmJpbmRQb3B1cChwYXJhbS5uYW1lICsgJzxicj4nICsgcGFyYW0uZGVzYywgb2Zmc2V0KS5vcGVuUG9wdXAoKTsKICAgICAgfQogICAgICB0aGlzLm1hcmtlciA9IG1hcmtlcjsKICAgICAgcmV0dXJuIG1hcmtlcjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcmVhdGVNYXJrZXJFZGl0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVNYXJrZXJFZGl0KHBhcmFtKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBsYXRsbmcgPSBwYXJhbS5sYXRsbmc7CiAgICAgIHZhciBpY29uID0gX2xlYWZsZXQuZGVmYXVsdC5kaXZJY29uKHsKICAgICAgICBjbGFzc05hbWU6ICdsZWFmbGV0LWljb24tcG9pLWVkaXQnLAogICAgICAgIGljb25TaXplOiBbMTIsIDEyXSwKICAgICAgICBpY29uQW5jaG9yOiBbNiwgMF0KICAgICAgfSk7CiAgICAgIC8vIOenu+WKqOS9kwogICAgICB2YXIgbWFya2VyRWRpdCA9IF9sZWFmbGV0LmRlZmF1bHQubWFya2VyKGxhdGxuZywgewogICAgICAgIGljb246IGljb24sCiAgICAgICAgZHJhZ2dhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgICBtYXJrZXJFZGl0Lm9uKCdkcmFnJywgZnVuY3Rpb24gKGV2dCkgewogICAgICAgIF90aGlzLnVwZGF0ZUxhdGxuZyhldnQpOwogICAgICB9KTsKICAgICAgdGhpcy5sYXllckdyb3VwLmFkZExheWVyKG1hcmtlckVkaXQpOwogICAgICB0aGlzLm1hcmtlckVkaXQgPSBtYXJrZXJFZGl0OwoKICAgICAgLy8g5pys5L2TCiAgICAgIHRoaXMuY3JlYXRlTWFya2VyKHsKICAgICAgICBsYXRsbmc6IGxhdGxuZywKICAgICAgICBuYW1lOiBwYXJhbS5uYW1lLAogICAgICAgIGRlc2M6IHBhcmFtLmRlc2MKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlRW50aXR5IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVFbnRpdHkob3B0aW9ucykgewogICAgICB2YXIgcG9pbnRFbnRpdHkgPSBuZXcgX1BvaW50RW50aXR5LmRlZmF1bHQob3B0aW9ucyk7CiAgICAgIHJldHVybiBwb2ludEVudGl0eTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGVMYXRsbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUxhdGxuZyhldnQpIHsKICAgICAgdmFyIGxhdCA9ICgwLCBfY29tbW9uLnRvRml4ZWQpKGV2dC5sYXRsbmcubGF0KTsKICAgICAgdGhpcy52bS5jdXJyZW50UG9pbnQubGF0ID0gbGF0OwogICAgICB0aGlzLnZtLmN1cnJlbnRQb2ludC5sbmcgPSAoMCwgX0xvbmdpdHVkZS5nZXRMbmcpKGV2dC5sYXRsbmcubG5nKTsKICAgICAgdGhpcy5tYXJrZXIuc2V0TGF0TG5nKGV2dC5sYXRsbmcpOwogICAgfQogIH0sIHsKICAgIGtleTogInNldExhdExuZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0TGF0TG5nKGxhdCwgbG5nKSB7CiAgICAgIGlmIChsYXQgPCAtOTAgfHwgbGF0ID4gOTAgfHwgbG5nID4gMTgwIHx8IGxuZyA8IC0xODApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIGxhdGxuZyA9IF9sZWFmbGV0LmRlZmF1bHQubGF0TG5nKGxhdCwgbG5nKTsKICAgICAgdGhpcy5tYXAuZmx5VG8obGF0bG5nLCBGbHlfTGV2ZWwsIHsKICAgICAgICBhbmltYXRlOiBmYWxzZQogICAgICB9KTsKICAgICAgaWYgKHRoaXMubWFya2VyKSB7CiAgICAgICAgdGhpcy5tYXJrZXIuc2V0TGF0TG5nKGxhdGxuZyk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMubWFya2VyRWRpdCkgewogICAgICAgIHRoaXMubWFya2VyRWRpdC5zZXRMYXRMbmcobGF0bG5nKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImRyYXciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoKSB7CiAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgdGhpcy5zZXRNb3VzZVN0YXR1cyhmYWxzZSk7CiAgICAgIHRoaXMubWFwLm9uKCdjbGljaycsIGNsaWNrRXZlbnQsIHRoaXMuY2xpY2tDb250ZXh0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmF3Q2FuY2VsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3Q2FuY2VsKCkgewogICAgICB0aGlzLm1hcC5vZmYoJ2NsaWNrJywgY2xpY2tFdmVudCwgdGhpcy5jbGlja0NvbnRleHQpOwogICAgICB0aGlzLnNldE1vdXNlU3RhdHVzKHRydWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImZseVRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBmbHlUbyhpdGVtKSB7CiAgICAgIHRoaXMuY2xlYXIoKTsKICAgICAgdmFyIGxhdGxuZyA9IFtpdGVtLkxhdGl0dWRlLCBpdGVtLkxvbmdpdHVkZV07CiAgICAgIHRoaXMuY3JlYXRlTWFya2VyKHsKICAgICAgICBsYXRsbmc6IGxhdGxuZywKICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgZGVzYzogaXRlbS5kZXNjcmlwdGlvbiwKICAgICAgICBpdGVtOiBpdGVtCiAgICAgIH0pOwogICAgICB0aGlzLm1hcC5mbHlUbyhsYXRsbmcsIEZseV9MZXZlbCwgewogICAgICAgIGFuaW1hdGU6IGZhbHNlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImZseVRvRWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmx5VG9FZGl0KGl0ZW0pIHsKICAgICAgdmFyIGxhdGxuZyA9IFtpdGVtLkxhdGl0dWRlLCBpdGVtLkxvbmdpdHVkZV07CiAgICAgIHRoaXMubWFwLmZseVRvKGxhdGxuZywgRmx5X0xldmVsLCB7CiAgICAgICAgYW5pbWF0ZTogZmFsc2UKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZWRpdChpdGVtKSB7CiAgICAgIHRoaXMuY2xlYXIoKTsKCiAgICAgIC8vIHRoaXMuZmx5VG9FZGl0KGl0ZW0pCiAgICAgIHZhciBwb2ludEVudGl0eSA9IHRoaXMuY3JlYXRlRW50aXR5KHsKICAgICAgICBpZDogaXRlbS5pZCwKICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgYWx0aXR1ZGU6IGl0ZW0uYWx0aXR1ZGUsCiAgICAgICAgZGVzYzogaXRlbS5kZXNjcmlwdGlvbiwKICAgICAgICBsYXQ6IGl0ZW0ubGF0aXR1ZGUsCiAgICAgICAgbG5nOiBpdGVtLmxvbmdpdHVkZSwKICAgICAgICBwaG90b3M6IGl0ZW0ucGhvdG9zLAogICAgICAgIHRpbWU6IGl0ZW0udGltZQogICAgICB9KTsKICAgICAgdGhpcy52bS5jdXJyZW50UG9pbnQgPSBwb2ludEVudGl0eTsKICAgICAgdGhpcy52bS5wYWdlID0gJ2VkaXQnOwogICAgICB0aGlzLmNyZWF0ZU1hcmtlckVkaXQoewogICAgICAgIGxhdGxuZzogcG9pbnRFbnRpdHkuZ2V0TGF0bG5nKCksCiAgICAgICAgbmFtZTogaXRlbS5uYW1lLAogICAgICAgIHRpbWU6IGl0ZW0udGltZSwKICAgICAgICBkZXNjOiBpdGVtLmRlc2NyaXB0aW9uCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMubGF5ZXJHcm91cC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgbGF5ZXIucmVtb3ZlRnJvbShfdGhpczIubGF5ZXJHcm91cCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyQnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAoIWlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGF5ZXJHcm91cC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy5pdGVtICYmIGxheWVyLm9wdGlvbnMuaXRlbS5JZCA9PT0gaWQpIHsKICAgICAgICAgIGxheWVyLnJlbW92ZUZyb20oX3RoaXMzLmxheWVyR3JvdXApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TW91c2VTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1vdXNlU3RhdHVzKCkgewogICAgICB2YXIgZGYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgICAgIGlmIChkZikgewogICAgICAgIF9sZWFmbGV0LmRlZmF1bHQuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLm1hcC5fY29udGFpbmVyLCAnbGVhZmxldC1jdXJzb3ItY3Jvc3NoYWlyJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2xlYWZsZXQuZGVmYXVsdC5Eb21VdGlsLmFkZENsYXNzKHRoaXMubWFwLl9jb250YWluZXIsICdsZWFmbGV0LWN1cnNvci1jcm9zc2hhaXInKTsKICAgICAgfQogICAgfQogIH1dKTsKfSgpOw=="},{"version":3,"names":["_leaflet","_interopRequireDefault","require","_location","_PointEntity","_Longitude","_common","Fly_Level","drawPoiObj","clickEvent","evt","latlng","map","_container","style","cursor","createMarkerEdit","name","vm","page","pointEntity","createEntity","currentPoint","updateLatlng","off","clickContext","drawing","setMouseStatus","DrawPoi","exports","default","parent","_classCallCheck2","window","layerGroup","L","addTo","marker","markerEdit","_createClass2","key","value","createMarker","param","icon","iconUrl","locationPng","iconSize","iconAnchor","item","addLayer","offset","Point","bindPopup","desc","openPopup","_this","divIcon","className","draggable","on","options","PointEntity","lat","toFixed","lng","getLng","setLatLng","latLng","flyTo","animate","draw","clear","drawCancel","Latitude","Longitude","description","flyToEdit","edit","id","altitude","latitude","longitude","photos","time","getLatlng","_this2","eachLayer","layer","removeFrom","clearById","_this3","Id","df","arguments","length","undefined","DomUtil","removeClass","addClass"],"sources":["E:/workspacevsCode/web-ui-travel/src/views/AMyWork/tools/poi/DrawPoi.js"],"sourcesContent":["import L from 'leaflet'\nimport locationPng from '@/assets/images/location.png'\nimport PointEntity from './PointEntity'\nimport { getLng } from './Longitude180'\nimport { toFixed } from '../biz/common'\n\nconst Fly_Level = 10\nlet drawPoiObj\n\nfunction clickEvent(evt) {\n  const latlng = evt.latlng\n  drawPoiObj.map._container.style.cursor = ''\n\n  drawPoiObj.createMarkerEdit({\n    latlng: latlng,\n    name: ''\n  })\n\n  drawPoiObj.vm.page = 'edit'\n  const pointEntity = drawPoiObj.createEntity({})\n  drawPoiObj.vm.currentPoint = pointEntity\n\n  drawPoiObj.updateLatlng(evt)\n\n  drawPoiObj.map.off('click', clickEvent, drawPoiObj.clickContext)\n  drawPoiObj.vm.drawing = false\n  drawPoiObj.setMouseStatus(true)\n}\n\nexport default class DrawPoi {\n  constructor(parent) {\n    this.map = window.map\n    this.vm = parent\n    this.layerGroup = L.layerGroup().addTo(this.map)\n\n    this.marker = null\n    this.markerEdit = null\n    this.clickContext = 'DrawPoiContext'\n    drawPoiObj = this\n  }\n  createMarker(param) {\n    const icon = L.icon({\n      iconUrl: locationPng,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    })\n    const marker = L.marker(param.latlng, {\n      icon: icon,\n      item: param.item\n    })\n    this.layerGroup.addLayer(marker)\n\n    if (param.name) {\n      const offset = {\n        offset: new L.Point(0, -20)\n      }\n      marker.bindPopup(param.name + '<br>' + param.desc, offset).openPopup()\n    }\n    this.marker = marker\n    return marker\n  }\n  createMarkerEdit(param) {\n    const latlng = param.latlng\n    const icon = L.divIcon({\n      className: 'leaflet-icon-poi-edit',\n      iconSize: [12, 12],\n      iconAnchor: [6, 0]\n    })\n    // 移动体\n    const markerEdit = L.marker(latlng, {\n      icon: icon,\n      draggable: true\n    })\n    markerEdit.on('drag', evt => {\n      this.updateLatlng(evt)\n    })\n    this.layerGroup.addLayer(markerEdit)\n    this.markerEdit = markerEdit\n\n    // 本体\n    this.createMarker({\n      latlng: latlng,\n      name: param.name,\n      desc: param.desc\n    })\n  }\n  createEntity(options) {\n    const pointEntity = new PointEntity(options)\n    return pointEntity\n  }\n  updateLatlng(evt) {\n    const lat = toFixed(evt.latlng.lat)\n    this.vm.currentPoint.lat = lat\n    this.vm.currentPoint.lng = getLng(evt.latlng.lng)\n\n    this.marker.setLatLng(evt.latlng)\n  }\n  setLatLng(lat, lng) {\n    if (lat < -90 || lat > 90 || lng > 180 || lng < -180) {\n      return\n    }\n    const latlng = L.latLng(lat, lng)\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n    if (this.marker) {\n      this.marker.setLatLng(latlng)\n    }\n    if (this.markerEdit) {\n      this.markerEdit.setLatLng(latlng)\n    }\n  }\n  draw() {\n    this.clear()\n    this.setMouseStatus(false)\n    this.map.on('click', clickEvent, this.clickContext)\n  }\n  drawCancel() {\n    this.map.off('click', clickEvent, this.clickContext)\n    this.setMouseStatus(true)\n  }\n  flyTo(item) {\n    this.clear()\n    const latlng = [item.Latitude, item.Longitude]\n    this.createMarker({\n      latlng: latlng,\n      name: item.name,\n      desc: item.description,\n      item: item\n    })\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  flyToEdit(item) {\n    const latlng = [item.Latitude, item.Longitude]\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  edit(item) {\n    this.clear()\n\n    // this.flyToEdit(item)\n    const pointEntity = this.createEntity({\n      id: item.id,\n      name: item.name,\n      altitude: item.altitude,\n      desc: item.description,\n      lat: item.latitude,\n      lng: item.longitude,\n      photos: item.photos,\n      time: item.time\n    })\n    this.vm.currentPoint = pointEntity\n    this.vm.page = 'edit'\n    this.createMarkerEdit({\n      latlng: pointEntity.getLatlng(),\n      name: item.name,\n      time: item.time,\n      desc: item.description\n    })\n  }\n  clear() {\n    this.layerGroup.eachLayer(layer => {\n      layer.removeFrom(this.layerGroup)\n    })\n  }\n  clearById(id) {\n    if (!id) {\n      return\n    }\n    this.layerGroup.eachLayer(layer => {\n      if (layer.options && layer.options.item && layer.options.item.Id === id) {\n        layer.removeFrom(this.layerGroup)\n      }\n    })\n  }\n  setMouseStatus(df = true) {\n    if (df) {\n      L.DomUtil.removeClass(this.map._container, 'leaflet-cursor-crosshair')\n    } else {\n      L.DomUtil.addClass(this.map._container, 'leaflet-cursor-crosshair')\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}]}