{"remainingRequest":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\poi\\DrawPoi.js","dependencies":[{"path":"D:\\work\\workspace_wm\\web-ui-travel\\src\\views\\biz\\tools\\poi\\DrawPoi.js","mtime":1719886286509},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyIpOwp2YXIgX2ludGVyb3BSZXF1aXJlRGVmYXVsdCA9IHJlcXVpcmUoIkQ6L3dvcmsvd29ya3NwYWNlX3dtL3dlYi11aS10cmF2ZWwvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CnZhciBfY2xhc3NDYWxsQ2hlY2syID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZV93bS93ZWItdWktdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIikpOwp2YXIgX2NyZWF0ZUNsYXNzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiRDovd29yay93b3Jrc3BhY2Vfd20vd2ViLXVpLXRyYXZlbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIpKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwp2YXIgX2xlYWZsZXQgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImxlYWZsZXQiKSk7CnZhciBfbG9jYXRpb24gPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIkAvYXNzZXRzL2ltYWdlcy9sb2NhdGlvbi5wbmciKSk7CnZhciBfUG9pbnRFbnRpdHkgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoIi4vUG9pbnRFbnRpdHkiKSk7CnZhciBfTG9uZ2l0dWRlID0gcmVxdWlyZSgiLi9Mb25naXR1ZGUxODAiKTsKdmFyIF9jb21tb24gPSByZXF1aXJlKCIuLi9iaXovY29tbW9uIik7CnZhciBGbHlfTGV2ZWwgPSAxMDsKdmFyIGRyYXdQb2lPYmo7CmZ1bmN0aW9uIGNsaWNrRXZlbnQoZXZ0KSB7CiAgdmFyIGxhdGxuZyA9IGV2dC5sYXRsbmc7CiAgZHJhd1BvaU9iai5tYXAuX2NvbnRhaW5lci5zdHlsZS5jdXJzb3IgPSAnJzsKICBkcmF3UG9pT2JqLmNyZWF0ZU1hcmtlckVkaXQoewogICAgbGF0bG5nOiBsYXRsbmcsCiAgICBuYW1lOiAnJwogIH0pOwogIGRyYXdQb2lPYmoudm0ucGFnZSA9ICdlZGl0JzsKICB2YXIgcG9pbnRFbnRpdHkgPSBkcmF3UG9pT2JqLmNyZWF0ZUVudGl0eSh7fSk7CiAgZHJhd1BvaU9iai52bS5jdXJyZW50UG9pbnQgPSBwb2ludEVudGl0eTsKICBkcmF3UG9pT2JqLnVwZGF0ZUxhdGxuZyhldnQpOwogIGRyYXdQb2lPYmoubWFwLm9mZignY2xpY2snLCBjbGlja0V2ZW50LCBkcmF3UG9pT2JqLmNsaWNrQ29udGV4dCk7CiAgZHJhd1BvaU9iai52bS5kcmF3aW5nID0gZmFsc2U7CiAgZHJhd1BvaU9iai5zZXRNb3VzZVN0YXR1cyh0cnVlKTsKfQp2YXIgRHJhd1BvaSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRHJhd1BvaShwYXJlbnQpIHsKICAgICgwLCBfY2xhc3NDYWxsQ2hlY2syLmRlZmF1bHQpKHRoaXMsIERyYXdQb2kpOwogICAgdGhpcy5tYXAgPSB3aW5kb3cubWFwOwogICAgdGhpcy52bSA9IHBhcmVudDsKICAgIHRoaXMubGF5ZXJHcm91cCA9IF9sZWFmbGV0LmRlZmF1bHQubGF5ZXJHcm91cCgpLmFkZFRvKHRoaXMubWFwKTsKICAgIHRoaXMubWFya2VyID0gbnVsbDsKICAgIHRoaXMubWFya2VyRWRpdCA9IG51bGw7CiAgICB0aGlzLmNsaWNrQ29udGV4dCA9ICdEcmF3UG9pQ29udGV4dCc7CiAgICBkcmF3UG9pT2JqID0gdGhpczsKICB9CiAgKDAsIF9jcmVhdGVDbGFzczIuZGVmYXVsdCkoRHJhd1BvaSwgW3sKICAgIGtleTogImNyZWF0ZU1hcmtlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWFya2VyKHBhcmFtKSB7CiAgICAgIHZhciBpY29uID0gX2xlYWZsZXQuZGVmYXVsdC5pY29uKHsKICAgICAgICBpY29uVXJsOiBfbG9jYXRpb24uZGVmYXVsdCwKICAgICAgICBpY29uU2l6ZTogWzMyLCAzMl0sCiAgICAgICAgaWNvbkFuY2hvcjogWzE2LCAzMl0KICAgICAgfSk7CiAgICAgIHZhciBtYXJrZXIgPSBfbGVhZmxldC5kZWZhdWx0Lm1hcmtlcihwYXJhbS5sYXRsbmcsIHsKICAgICAgICBpY29uOiBpY29uLAogICAgICAgIGl0ZW06IHBhcmFtLml0ZW0KICAgICAgfSk7CiAgICAgIHRoaXMubGF5ZXJHcm91cC5hZGRMYXllcihtYXJrZXIpOwogICAgICBpZiAocGFyYW0ubmFtZSkgewogICAgICAgIHZhciBvZmZzZXQgPSB7CiAgICAgICAgICBvZmZzZXQ6IG5ldyBfbGVhZmxldC5kZWZhdWx0LlBvaW50KDAsIC0yMCkKICAgICAgICB9OwogICAgICAgIG1hcmtlci5iaW5kUG9wdXAocGFyYW0ubmFtZSArICc8YnI+JyArIHBhcmFtLmRlc2MsIG9mZnNldCkub3BlblBvcHVwKCk7CiAgICAgIH0KICAgICAgdGhpcy5tYXJrZXIgPSBtYXJrZXI7CiAgICAgIHJldHVybiBtYXJrZXI7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlTWFya2VyRWRpdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlTWFya2VyRWRpdChwYXJhbSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgbGF0bG5nID0gcGFyYW0ubGF0bG5nOwogICAgICB2YXIgaWNvbiA9IF9sZWFmbGV0LmRlZmF1bHQuZGl2SWNvbih7CiAgICAgICAgY2xhc3NOYW1lOiAnbGVhZmxldC1pY29uLXBvaS1lZGl0JywKICAgICAgICBpY29uU2l6ZTogWzEyLCAxMl0sCiAgICAgICAgaWNvbkFuY2hvcjogWzYsIDBdCiAgICAgIH0pOwogICAgICAvLyDnp7vliqjkvZMKICAgICAgdmFyIG1hcmtlckVkaXQgPSBfbGVhZmxldC5kZWZhdWx0Lm1hcmtlcihsYXRsbmcsIHsKICAgICAgICBpY29uOiBpY29uLAogICAgICAgIGRyYWdnYWJsZTogdHJ1ZQogICAgICB9KTsKICAgICAgbWFya2VyRWRpdC5vbignZHJhZycsIGZ1bmN0aW9uIChldnQpIHsKICAgICAgICBfdGhpcy51cGRhdGVMYXRsbmcoZXZ0KTsKICAgICAgfSk7CiAgICAgIHRoaXMubGF5ZXJHcm91cC5hZGRMYXllcihtYXJrZXJFZGl0KTsKICAgICAgdGhpcy5tYXJrZXJFZGl0ID0gbWFya2VyRWRpdDsKCiAgICAgIC8vIOacrOS9kwogICAgICB0aGlzLmNyZWF0ZU1hcmtlcih7CiAgICAgICAgbGF0bG5nOiBsYXRsbmcsCiAgICAgICAgbmFtZTogcGFyYW0ubmFtZSwKICAgICAgICBkZXNjOiBwYXJhbS5kZXNjCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUVudGl0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRW50aXR5KG9wdGlvbnMpIHsKICAgICAgdmFyIHBvaW50RW50aXR5ID0gbmV3IF9Qb2ludEVudGl0eS5kZWZhdWx0KG9wdGlvbnMpOwogICAgICByZXR1cm4gcG9pbnRFbnRpdHk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlTGF0bG5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVMYXRsbmcoZXZ0KSB7CiAgICAgIHZhciBsYXQgPSAoMCwgX2NvbW1vbi50b0ZpeGVkKShldnQubGF0bG5nLmxhdCk7CiAgICAgIHRoaXMudm0uY3VycmVudFBvaW50LmxhdCA9IGxhdDsKICAgICAgdGhpcy52bS5jdXJyZW50UG9pbnQubG5nID0gKDAsIF9Mb25naXR1ZGUuZ2V0TG5nKShldnQubGF0bG5nLmxuZyk7CiAgICAgIHRoaXMubWFya2VyLnNldExhdExuZyhldnQubGF0bG5nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRMYXRMbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldExhdExuZyhsYXQsIGxuZykgewogICAgICBpZiAobGF0IDwgLTkwIHx8IGxhdCA+IDkwIHx8IGxuZyA+IDE4MCB8fCBsbmcgPCAtMTgwKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBsYXRsbmcgPSBfbGVhZmxldC5kZWZhdWx0LmxhdExuZyhsYXQsIGxuZyk7CiAgICAgIHRoaXMubWFwLmZseVRvKGxhdGxuZywgRmx5X0xldmVsLCB7CiAgICAgICAgYW5pbWF0ZTogZmFsc2UKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLm1hcmtlcikgewogICAgICAgIHRoaXMubWFya2VyLnNldExhdExuZyhsYXRsbmcpOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1hcmtlckVkaXQpIHsKICAgICAgICB0aGlzLm1hcmtlckVkaXQuc2V0TGF0TG5nKGxhdGxuZyk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcmF3IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KCkgewogICAgICB0aGlzLmNsZWFyKCk7CiAgICAgIHRoaXMuc2V0TW91c2VTdGF0dXMoZmFsc2UpOwogICAgICB0aGlzLm1hcC5vbignY2xpY2snLCBjbGlja0V2ZW50LCB0aGlzLmNsaWNrQ29udGV4dCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZHJhd0NhbmNlbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJhd0NhbmNlbCgpIHsKICAgICAgdGhpcy5tYXAub2ZmKCdjbGljaycsIGNsaWNrRXZlbnQsIHRoaXMuY2xpY2tDb250ZXh0KTsKICAgICAgdGhpcy5zZXRNb3VzZVN0YXR1cyh0cnVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmbHlUbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmx5VG8oaXRlbSkgewogICAgICB0aGlzLmNsZWFyKCk7CiAgICAgIHZhciBsYXRsbmcgPSBbaXRlbS5MYXRpdHVkZSwgaXRlbS5Mb25naXR1ZGVdOwogICAgICB0aGlzLmNyZWF0ZU1hcmtlcih7CiAgICAgICAgbGF0bG5nOiBsYXRsbmcsCiAgICAgICAgbmFtZTogaXRlbS5OYW1lLAogICAgICAgIGRlc2M6IGl0ZW0uRGVzY3JpcHRpb24sCiAgICAgICAgaXRlbTogaXRlbQogICAgICB9KTsKICAgICAgdGhpcy5tYXAuZmx5VG8obGF0bG5nLCBGbHlfTGV2ZWwsIHsKICAgICAgICBhbmltYXRlOiBmYWxzZQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmbHlUb0VkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZseVRvRWRpdChpdGVtKSB7CiAgICAgIHZhciBsYXRsbmcgPSBbaXRlbS5MYXRpdHVkZSwgaXRlbS5Mb25naXR1ZGVdOwogICAgICB0aGlzLm1hcC5mbHlUbyhsYXRsbmcsIEZseV9MZXZlbCwgewogICAgICAgIGFuaW1hdGU6IGZhbHNlCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImVkaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVkaXQoaXRlbSkgewogICAgICB0aGlzLmNsZWFyKCk7CgogICAgICAvLyB0aGlzLmZseVRvRWRpdChpdGVtKQogICAgICB2YXIgcG9pbnRFbnRpdHkgPSB0aGlzLmNyZWF0ZUVudGl0eSh7CiAgICAgICAgaWQ6IGl0ZW0uSWQsCiAgICAgICAgbmFtZTogaXRlbS5OYW1lLAogICAgICAgIGFsdGl0dWRlOiBpdGVtLkFsdGl0dWRlLAogICAgICAgIGRlc2M6IGl0ZW0uRGVzY3JpcHRpb24sCiAgICAgICAgbGF0OiBpdGVtLkxhdGl0dWRlLAogICAgICAgIGxuZzogaXRlbS5Mb25naXR1ZGUsCiAgICAgICAgcGhvdG9zOiBpdGVtLlBob3RvcywKICAgICAgICB0YXJnZXQ6IGl0ZW0uVGFyZ2V0CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcmVzczogIiIKICAgICAgICAgKiBBbHRpdHVkZTogMAogICAgICAgICAqIERlc2NyaXB0aW9uOiAiIgogICAgICAgICAqIElkOiAzNjgwCiAgICAgICAgICogTGF0aXR1ZGU6IDU4LjUzOTU3NAogICAgICAgICAqIExhdGl0dWRlVGFnOiAi5YyX57qsIgogICAgICAgICAqIExvbmdpdHVkZTogNjUuNzQyMTg0CiAgICAgICAgICogTG9uZ2l0dWRlVGFnOiAi5Lic57uPIgogICAgICAgICAqIE5hbWU6ICLkuoYiCiAgICAgICAgICogUGhvdG9zOiBudWxsCiAgICAgICAgICogUmVjb3JkVGltZTogIjIwMjMtMDQtMjcgMTg6Mzk6NDYiCiAgICAgICAgICogVGFyZ2V0OiAiIgogICAgICAgICAqIFVzZXJJZDogMAogICAgICAgICAqLwogICAgICB9KTsKCiAgICAgIHRoaXMudm0uY3VycmVudFBvaW50ID0gcG9pbnRFbnRpdHk7CiAgICAgIHRoaXMudm0ucGFnZSA9ICdlZGl0JzsKICAgICAgdGhpcy5jcmVhdGVNYXJrZXJFZGl0KHsKICAgICAgICBsYXRsbmc6IHBvaW50RW50aXR5LmdldExhdGxuZygpLAogICAgICAgIG5hbWU6IGl0ZW0uTmFtZSwKICAgICAgICBkZXNjOiBpdGVtLkRlc2NyaXB0aW9uCiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHRoaXMubGF5ZXJHcm91cC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgbGF5ZXIucmVtb3ZlRnJvbShfdGhpczIubGF5ZXJHcm91cCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyQnlJZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJCeUlkKGlkKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICBpZiAoIWlkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMubGF5ZXJHcm91cC5lYWNoTGF5ZXIoZnVuY3Rpb24gKGxheWVyKSB7CiAgICAgICAgaWYgKGxheWVyLm9wdGlvbnMgJiYgbGF5ZXIub3B0aW9ucy5pdGVtICYmIGxheWVyLm9wdGlvbnMuaXRlbS5JZCA9PT0gaWQpIHsKICAgICAgICAgIGxheWVyLnJlbW92ZUZyb20oX3RoaXMzLmxheWVyR3JvdXApOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0TW91c2VTdGF0dXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldE1vdXNlU3RhdHVzKCkgewogICAgICB2YXIgZGYgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRydWU7CiAgICAgIGlmIChkZikgewogICAgICAgIF9sZWFmbGV0LmRlZmF1bHQuRG9tVXRpbC5yZW1vdmVDbGFzcyh0aGlzLm1hcC5fY29udGFpbmVyLCAnbGVhZmxldC1jdXJzb3ItY3Jvc3NoYWlyJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgX2xlYWZsZXQuZGVmYXVsdC5Eb21VdGlsLmFkZENsYXNzKHRoaXMubWFwLl9jb250YWluZXIsICdsZWFmbGV0LWN1cnNvci1jcm9zc2hhaXInKTsKICAgICAgfQogICAgfQogIH1dKTsKICByZXR1cm4gRHJhd1BvaTsKfSgpOwpleHBvcnRzLmRlZmF1bHQgPSBEcmF3UG9pOw=="},{"version":3,"names":["_leaflet","_interopRequireDefault","require","_location","_PointEntity","_Longitude","_common","Fly_Level","drawPoiObj","clickEvent","evt","latlng","map","_container","style","cursor","createMarkerEdit","name","vm","page","pointEntity","createEntity","currentPoint","updateLatlng","off","clickContext","drawing","setMouseStatus","DrawPoi","parent","_classCallCheck2","default","window","layerGroup","L","addTo","marker","markerEdit","_createClass2","key","value","createMarker","param","icon","iconUrl","locationPng","iconSize","iconAnchor","item","addLayer","offset","Point","bindPopup","desc","openPopup","_this","divIcon","className","draggable","on","options","PointEntity","lat","toFixed","lng","getLng","setLatLng","latLng","flyTo","animate","draw","clear","drawCancel","Latitude","Longitude","Name","Description","flyToEdit","edit","id","Id","altitude","Altitude","photos","Photos","target","Target","getLatlng","_this2","eachLayer","layer","removeFrom","clearById","_this3","df","arguments","length","undefined","DomUtil","removeClass","addClass","exports"],"sources":["D:/work/workspace_wm/web-ui-travel/src/views/biz/tools/poi/DrawPoi.js"],"sourcesContent":["import L from 'leaflet'\nimport locationPng from '@/assets/images/location.png'\nimport PointEntity from './PointEntity'\nimport { getLng } from './Longitude180'\nimport { toFixed } from '../biz/common'\n\nconst Fly_Level = 10\nlet drawPoiObj\n\nfunction clickEvent(evt) {\n  const latlng = evt.latlng\n  drawPoiObj.map._container.style.cursor = ''\n\n  drawPoiObj.createMarkerEdit({\n    latlng: latlng,\n    name: ''\n  })\n\n  drawPoiObj.vm.page = 'edit'\n  const pointEntity = drawPoiObj.createEntity({})\n  drawPoiObj.vm.currentPoint = pointEntity\n\n  drawPoiObj.updateLatlng(evt)\n\n  drawPoiObj.map.off('click', clickEvent, drawPoiObj.clickContext)\n  drawPoiObj.vm.drawing = false\n  drawPoiObj.setMouseStatus(true)\n}\n\nexport default class DrawPoi {\n  constructor(parent) {\n    this.map = window.map\n    this.vm = parent\n    this.layerGroup = L.layerGroup().addTo(this.map)\n\n    this.marker = null\n    this.markerEdit = null\n    this.clickContext = 'DrawPoiContext'\n    drawPoiObj = this\n  }\n  createMarker(param) {\n    const icon = L.icon({\n      iconUrl: locationPng,\n      iconSize: [32, 32],\n      iconAnchor: [16, 32]\n    })\n    const marker = L.marker(param.latlng, {\n      icon: icon,\n      item: param.item\n    })\n    this.layerGroup.addLayer(marker)\n\n    if (param.name) {\n      const offset = {\n        offset: new L.Point(0, -20)\n      }\n      marker.bindPopup(param.name + '<br>' + param.desc, offset).openPopup()\n    }\n    this.marker = marker\n    return marker\n  }\n  createMarkerEdit(param) {\n    const latlng = param.latlng\n    const icon = L.divIcon({\n      className: 'leaflet-icon-poi-edit',\n      iconSize: [12, 12],\n      iconAnchor: [6, 0]\n    })\n    // 移动体\n    const markerEdit = L.marker(latlng, {\n      icon: icon,\n      draggable: true\n    })\n    markerEdit.on('drag', evt => {\n      this.updateLatlng(evt)\n    })\n    this.layerGroup.addLayer(markerEdit)\n    this.markerEdit = markerEdit\n\n    // 本体\n    this.createMarker({\n      latlng: latlng,\n      name: param.name,\n      desc: param.desc\n    })\n  }\n  createEntity(options) {\n    const pointEntity = new PointEntity(options)\n    return pointEntity\n  }\n  updateLatlng(evt) {\n    const lat = toFixed(evt.latlng.lat)\n    this.vm.currentPoint.lat = lat\n    this.vm.currentPoint.lng = getLng(evt.latlng.lng)\n\n    this.marker.setLatLng(evt.latlng)\n  }\n  setLatLng(lat, lng) {\n    if (lat < -90 || lat > 90 || lng > 180 || lng < -180) {\n      return\n    }\n    const latlng = L.latLng(lat, lng)\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n    if (this.marker) {\n      this.marker.setLatLng(latlng)\n    }\n    if (this.markerEdit) {\n      this.markerEdit.setLatLng(latlng)\n    }\n  }\n  draw() {\n    this.clear()\n    this.setMouseStatus(false)\n    this.map.on('click', clickEvent, this.clickContext)\n  }\n  drawCancel() {\n    this.map.off('click', clickEvent, this.clickContext)\n    this.setMouseStatus(true)\n  }\n  flyTo(item) {\n    this.clear()\n    const latlng = [item.Latitude, item.Longitude]\n    this.createMarker({\n      latlng: latlng,\n      name: item.Name,\n      desc: item.Description,\n      item: item\n    })\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  flyToEdit(item) {\n    const latlng = [item.Latitude, item.Longitude]\n    this.map.flyTo(latlng, Fly_Level, { animate: false })\n  }\n  edit(item) {\n    this.clear()\n\n    // this.flyToEdit(item)\n    const pointEntity = this.createEntity({\n      id: item.Id,\n      name: item.Name,\n      altitude: item.Altitude,\n      desc: item.Description,\n      lat: item.Latitude,\n      lng: item.Longitude,\n      photos: item.Photos,\n      target: item.Target\n      /**\n       * Address: \"\"\n       * Altitude: 0\n       * Description: \"\"\n       * Id: 3680\n       * Latitude: 58.539574\n       * LatitudeTag: \"北纬\"\n       * Longitude: 65.742184\n       * LongitudeTag: \"东经\"\n       * Name: \"了\"\n       * Photos: null\n       * RecordTime: \"2023-04-27 18:39:46\"\n       * Target: \"\"\n       * UserId: 0\n       */\n    })\n    this.vm.currentPoint = pointEntity\n    this.vm.page = 'edit'\n    this.createMarkerEdit({\n      latlng: pointEntity.getLatlng(),\n      name: item.Name,\n      desc: item.Description\n    })\n  }\n  clear() {\n    this.layerGroup.eachLayer(layer => {\n      layer.removeFrom(this.layerGroup)\n    })\n  }\n  clearById(id) {\n    if (!id) {\n      return\n    }\n    this.layerGroup.eachLayer(layer => {\n      if (layer.options && layer.options.item && layer.options.item.Id === id) {\n        layer.removeFrom(this.layerGroup)\n      }\n    })\n  }\n  setMouseStatus(df = true) {\n    if (df) {\n      L.DomUtil.removeClass(this.map._container, 'leaflet-cursor-crosshair')\n    } else {\n      L.DomUtil.addClass(this.map._container, 'leaflet-cursor-crosshair')\n    }\n  }\n}\n"],"mappings":"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"}]}