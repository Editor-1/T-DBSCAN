{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\dbscan.js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\dbscan.js","mtime":1722255013458},{"path":"E:\\workspacevsCode\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1720856214296}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRic2NhbiA9IGRic2NhbjsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIik7CmZ1bmN0aW9uIGRic2NhbihkYXRhLCBlcHMsIG1pblB0cykgewogIC8vIOiuoeeul+S4pOeCuemXtOasp+awj+i3neemu+eahOi+heWKqeWHveaVsAogIGZ1bmN0aW9uIGNhbGN1bGF0ZURpc3RhbmNlKHBvaW50MSwgcG9pbnQyKSB7CiAgICB2YXIgbGF0MSA9IHBhcnNlRmxvYXQocG9pbnQxLmxhdCk7CiAgICB2YXIgbG5nMSA9IHBhcnNlRmxvYXQocG9pbnQxLmxuZyk7CiAgICB2YXIgbGF0MiA9IHBhcnNlRmxvYXQocG9pbnQyLmxhdCk7CiAgICB2YXIgbG5nMiA9IHBhcnNlRmxvYXQocG9pbnQyLmxuZyk7CiAgICB2YXIgcmFkTGF0MSA9IGxhdDEgKiBNYXRoLlBJIC8gMTgwLjA7CiAgICB2YXIgcmFkTGF0MiA9IGxhdDIgKiBNYXRoLlBJIC8gMTgwLjA7CiAgICB2YXIgYSA9IHJhZExhdDEgLSByYWRMYXQyOwogICAgdmFyIGIgPSBsbmcxICogTWF0aC5QSSAvIDE4MC4wIC0gbG5nMiAqIE1hdGguUEkgLyAxODAuMDsKICAgIHZhciBzID0gMiAqIE1hdGguYXNpbihNYXRoLnNxcnQoTWF0aC5wb3coTWF0aC5zaW4oYSAvIDIpLCAyKSArIE1hdGguY29zKHJhZExhdDEpICogTWF0aC5jb3MocmFkTGF0MikgKiBNYXRoLnBvdyhNYXRoLnNpbihiIC8gMiksIDIpKSk7CiAgICByZXR1cm4gcyAqIDYzNzA5OTYuODE7IC8vIOi/lOWbnui3neemu+WNleS9jeS4uuexswogIH0KCiAgLy8g5p+l5om+6YK75Z+f55qE6L6F5Yqp5Ye95pWwCiAgZnVuY3Rpb24gcmVnaW9uUXVlcnkoZGF0YSwgcG9pbnQsIGVwcykgewogICAgdmFyIG5laWdoYm9ycyA9IFtdOwogICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChwLCBpbmRleCkgewogICAgICBpZiAoY2FsY3VsYXRlRGlzdGFuY2UocG9pbnQsIHApIDw9IGVwcyAqIDEwMDApIHsKICAgICAgICAvLyDlsIYgZXBzIOi9rOaNouS4uuexswogICAgICAgIG5laWdoYm9ycy5wdXNoKGluZGV4KTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbmVpZ2hib3JzOwogIH0KICB2YXIgbnVtID0gZGF0YS5sZW5ndGg7CiAgdmFyIHVudmlzaXRlZCA9IEFycmF5LmZyb20oewogICAgbGVuZ3RoOiBudW0KICB9LCBmdW5jdGlvbiAoXywgaSkgewogICAgcmV0dXJuIGk7CiAgfSk7CiAgdmFyIHZpc2l0ZWQgPSBbXTsKICB2YXIgQyA9IEFycmF5KG51bSkuZmlsbCgtMSk7CiAgdmFyIGNvcmVQb2ludHMgPSBbXTsKICB2YXIgayA9IC0xOwogIHdoaWxlICh1bnZpc2l0ZWQubGVuZ3RoID4gMCkgewogICAgLy8g6buY6K6k5Y+W5pyq6K6/6Zeu55qE56ys5LiA5Liq54K5CiAgICB2YXIgcCA9IHVudmlzaXRlZC5zaGlmdCgpOwogICAgdmlzaXRlZC5wdXNoKHApOwogICAgdmFyIE4gPSByZWdpb25RdWVyeShkYXRhLCBkYXRhW3BdLCBlcHMpOwogICAgaWYgKE4ubGVuZ3RoID49IG1pblB0cykgewogICAgICBrICs9IDE7CiAgICAgIENbcF0gPSBrOwogICAgICBjb3JlUG9pbnRzLnB1c2goZGF0YVtwXSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgTi5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBwaSA9IE5baV07CiAgICAgICAgaWYgKHVudmlzaXRlZC5pbmNsdWRlcyhwaSkpIHsKICAgICAgICAgIHVudmlzaXRlZC5zcGxpY2UodW52aXNpdGVkLmluZGV4T2YocGkpLCAxKTsKICAgICAgICAgIHZpc2l0ZWQucHVzaChwaSk7CiAgICAgICAgICB2YXIgTSA9IHJlZ2lvblF1ZXJ5KGRhdGEsIGRhdGFbcGldLCBlcHMpOwogICAgICAgICAgaWYgKE0ubGVuZ3RoID49IG1pblB0cykgewogICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IE0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICB2YXIgdCA9IE1bal07CiAgICAgICAgICAgICAgaWYgKCFOLmluY2x1ZGVzKHQpKSB7CiAgICAgICAgICAgICAgICBOLnB1c2godCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmIChDW3BpXSA9PT0gLTEpIHsKICAgICAgICAgIENbcGldID0gazsKICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIENbcF0gPSAtMTsKICAgIH0KICB9CiAgcmV0dXJuIGNvcmVQb2ludHM7Cn0="},{"version":3,"names":["dbscan","data","eps","minPts","calculateDistance","point1","point2","lat1","parseFloat","lat","lng1","lng","lat2","lng2","radLat1","Math","PI","radLat2","a","b","s","asin","sqrt","pow","sin","cos","regionQuery","point","neighbors","forEach","p","index","push","num","length","unvisited","Array","from","_","i","visited","C","fill","corePoints","k","shift","N","pi","includes","splice","indexOf","M","j","t"],"sources":["E:/workspacevsCode/web-ui-travel/src/views/AMyWork/tools/algo/dbscan.js"],"sourcesContent":["export function dbscan(data, eps, minPts) {\r\n    // 计算两点间欧氏距离的辅助函数\r\n    function calculateDistance(point1, point2) {\r\n        const lat1 = parseFloat(point1.lat);\r\n        const lng1 = parseFloat(point1.lng);\r\n        const lat2 = parseFloat(point2.lat);\r\n        const lng2 = parseFloat(point2.lng);\r\n\r\n        const radLat1 = lat1 * Math.PI / 180.0;\r\n        const radLat2 = lat2 * Math.PI / 180.0;\r\n        const a = radLat1 - radLat2;\r\n        const b = (lng1 * Math.PI / 180.0) - (lng2 * Math.PI / 180.0);\r\n        const s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\r\n            Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\r\n        return s * 6370996.81; // 返回距离单位为米\r\n    }\r\n\r\n    // 查找邻域的辅助函数\r\n    function regionQuery(data, point, eps) {\r\n        const neighbors = [];\r\n        data.forEach((p, index) => {\r\n            if (calculateDistance(point, p) <= eps * 1000) { // 将 eps 转换为米\r\n                neighbors.push(index);\r\n            }\r\n        });\r\n        return neighbors;\r\n    }\r\n\r\n    const num = data.length;\r\n    const unvisited = Array.from({ length: num }, (_, i) => i);\r\n    const visited = [];\r\n    const C = Array(num).fill(-1);\r\n    const corePoints = [];\r\n    let k = -1;\r\n\r\n    while (unvisited.length > 0) {\r\n        // 默认取未访问的第一个点\r\n        const p = unvisited.shift();\r\n        visited.push(p);\r\n\r\n        const N = regionQuery(data, data[p], eps);\r\n\r\n        if (N.length >= minPts) {\r\n            k += 1;\r\n            C[p] = k;\r\n            corePoints.push(data[p]);\r\n\r\n            for (let i = 0; i < N.length; i++) {\r\n                const pi = N[i];\r\n                if (unvisited.includes(pi)) {\r\n                    unvisited.splice(unvisited.indexOf(pi), 1);\r\n                    visited.push(pi);\r\n\r\n                    const M = regionQuery(data, data[pi], eps);\r\n                    if (M.length >= minPts) {\r\n                        for (let j = 0; j < M.length; j++) {\r\n                            const t = M[j];\r\n                            if (!N.includes(t)) {\r\n                                N.push(t);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (C[pi] === -1) {\r\n                    C[pi] = k;\r\n                }\r\n            }\r\n        } else {\r\n            C[p] = -1;\r\n        }\r\n    }\r\n\r\n    return corePoints;\r\n}\r\n"],"mappings":"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","ignoreList":[]}]}