{"remainingRequest":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\workspace_wm\\web-ui-travel\\src\\plugins\\shpwrite\\src\\zip.js","dependencies":[{"path":"D:\\work\\workspace_wm\\web-ui-travel\\src\\plugins\\shpwrite\\src\\zip.js","mtime":1713921359920},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\work\\workspace_wm\\web-ui-travel\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCJEOi93b3JrL3dvcmtzcGFjZV93bS93ZWItdWktdHJhdmVsL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL29iamVjdFNwcmVhZDIuanMiKS5kZWZhdWx0OwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyIpOwp2YXIgd3JpdGUgPSByZXF1aXJlKCIuL3dyaXRlIik7CnZhciBnZW9qc29uID0gcmVxdWlyZSgiLi9nZW9qc29uIik7CnZhciBkZWZhdWx0UHJqID0gcmVxdWlyZSgnLi9wcmonKTsKdmFyIEpTWmlwID0gcmVxdWlyZSgianN6aXAiKTsKbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZ2osIG9wdGlvbnMpIHsKICB2YXIgc3RyZWFtID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICB2YXIgemlwID0gbmV3IEpTWmlwKCk7CiAgdmFyIHppcFRhcmdldCA9IHppcDsKICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmZvbGRlcikgewogICAgemlwVGFyZ2V0ID0gemlwLmZvbGRlcihvcHRpb25zLmZvbGRlcik7CiAgfQogIHZhciBwcmogPSBvcHRpb25zICYmIG9wdGlvbnMucHJqID8gb3B0aW9ucy5wcmogOiBkZWZhdWx0UHJqOwogIFtnZW9qc29uLnBvaW50KGdqKSwgZ2VvanNvbi5saW5lKGdqKSwgZ2VvanNvbi5wb2x5Z29uKGdqKSwgZ2VvanNvbi5tdWx0aXBvbHlnb24oZ2opLCBnZW9qc29uLm11bHRpbGluZShnaildLmZvckVhY2goZnVuY3Rpb24gKGwpIHsKICAgIGlmIChsLmdlb21ldHJpZXMubGVuZ3RoICYmIGwuZ2VvbWV0cmllc1swXS5sZW5ndGgpIHsKICAgICAgd3JpdGUoCiAgICAgIC8vIGZpZWxkIGRlZmluaXRpb25zCiAgICAgIGwucHJvcGVydGllcywKICAgICAgLy8gZ2VvbWV0cnkgdHlwZQogICAgICBsLnR5cGUsCiAgICAgIC8vIGdlb21ldHJpZXMKICAgICAgbC5nZW9tZXRyaWVzLCBmdW5jdGlvbiAoZXJyLCBmaWxlcykgewogICAgICAgIHZhciBmaWxlTmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlcyAmJiBvcHRpb25zLnR5cGVzW2wudHlwZS50b0xvd2VyQ2FzZSgpXSA/IG9wdGlvbnMudHlwZXNbbC50eXBlLnRvTG93ZXJDYXNlKCldIDogbC50eXBlOwogICAgICAgIHppcFRhcmdldC5maWxlKGZpbGVOYW1lICsgIi5zaHAiLCBmaWxlcy5zaHAuYnVmZmVyLCB7CiAgICAgICAgICBiaW5hcnk6IHRydWUKICAgICAgICB9KTsKICAgICAgICB6aXBUYXJnZXQuZmlsZShmaWxlTmFtZSArICIuc2h4IiwgZmlsZXMuc2h4LmJ1ZmZlciwgewogICAgICAgICAgYmluYXJ5OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgemlwVGFyZ2V0LmZpbGUoZmlsZU5hbWUgKyAiLmRiZiIsIGZpbGVzLmRiZiwgewogICAgICAgICAgYmluYXJ5OiB0cnVlCiAgICAgICAgfSk7IC8vIC5idWZmZXIKICAgICAgICB6aXBUYXJnZXQuZmlsZShmaWxlTmFtZSArICIucHJqIiwgcHJqKTsKICAgICAgICB6aXBUYXJnZXQuZmlsZShmaWxlTmFtZSArICIuY3BnIiwgJ3V0Zi04Jyk7CiAgICAgIH0pOwogICAgfQogIH0pOwogIHZhciB6aXBPcHRpb25zID0ge307CiAgaWYgKCFvcHRpb25zIHx8ICFvcHRpb25zLm91dHB1dFR5cGUpIHsKICAgIHppcE9wdGlvbnMudHlwZSA9ICJiYXNlNjQiOwogIH0gZWxzZSB7CiAgICB6aXBPcHRpb25zLnR5cGUgPSBvcHRpb25zLm91dHB1dFR5cGU7CiAgfQogIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5jb21wcmVzc2lvbikgewogICAgemlwT3B0aW9ucy5jb21wcmVzc2lvbiA9ICJERUZMQVRFIjsKICB9IGVsc2UgewogICAgemlwT3B0aW9ucy5jb21wcmVzc2lvbiA9IG9wdGlvbnMuY29tcHJlc3Npb247CiAgfQogIGlmIChzdHJlYW0pIHsKICAgIHJldHVybiB6aXAuZ2VuZXJhdGVOb2RlU3RyZWFtKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgemlwT3B0aW9ucyksIHt9LCB7CiAgICAgIHN0cmVhbUZpbGVzOiB0cnVlCiAgICB9KSk7CiAgfQogIHJldHVybiB6aXAuZ2VuZXJhdGVBc3luYyh6aXBPcHRpb25zKTsKfTs="},{"version":3,"names":["write","require","geojson","defaultPrj","JSZip","module","exports","gj","options","stream","arguments","length","undefined","zip","zipTarget","folder","prj","point","line","polygon","multipolygon","multiline","forEach","l","geometries","properties","type","err","files","fileName","types","toLowerCase","file","shp","buffer","binary","shx","dbf","zipOptions","outputType","compression","generateNodeStream","_objectSpread","streamFiles","generateAsync"],"sources":["D:/work/workspace_wm/web-ui-travel/src/plugins/shpwrite/src/zip.js"],"sourcesContent":["var write = require(\"./write\");\nvar geojson = require(\"./geojson\");\nvar defaultPrj = require('./prj');\nvar JSZip = require(\"jszip\");\n\n\nmodule.exports = function (\n  gj,\n  options,\n  stream = false\n) {\n  let zip = new JSZip();\n  let zipTarget = zip;\n  if (options && options.folder) {\n    zipTarget = zip.folder(options.folder);\n  }\n\n  var prj = (options && options.prj) ? options.prj : defaultPrj;\n\n  [\n    geojson.point(gj),\n    geojson.line(gj),\n    geojson.polygon(gj),\n    geojson.multipolygon(gj),\n    geojson.multiline(gj),\n  ].forEach(function (l) {\n    if (l.geometries.length && l.geometries[0].length) {\n      write(\n        // field definitions\n        l.properties,\n        // geometry type\n        l.type,\n        // geometries\n        l.geometries,\n        function (err, files) {\n          var fileName =\n            options && options.types && options.types[l.type.toLowerCase()]\n              ? options.types[l.type.toLowerCase()]\n              : l.type;\n          zipTarget.file(fileName + \".shp\", files.shp.buffer, { binary: true });\n          zipTarget.file(fileName + \".shx\", files.shx.buffer, { binary: true });\n          zipTarget.file(fileName + \".dbf\", files.dbf, { binary: true }); // .buffer\n          zipTarget.file(fileName + \".prj\", prj);\n          zipTarget.file(fileName + \".cpg\", 'utf-8');\n        }\n      );\n    }\n  });\n\n  var zipOptions = {};\n  if (!options || !options.outputType) {\n    zipOptions.type = \"base64\";\n  } else {\n    zipOptions.type = options.outputType;\n  }\n\n  if (!options || !options.compression) {\n    zipOptions.compression = \"DEFLATE\";\n  } else {\n    zipOptions.compression = options.compression;\n  }\n\n  if (stream) {\n    return zip.generateNodeStream({ ...zipOptions, streamFiles: true });\n  }\n\n  return zip.generateAsync(zipOptions);\n};\n"],"mappings":"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"}]}