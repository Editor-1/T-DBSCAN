{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\dbscan.js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\dbscan.js","mtime":1726234291625},{"path":"E:\\workspacevsCode\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1720856214296}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJFOi93b3Jrc3BhY2V2c0NvZGUvd2ViLXVpLXRyYXZlbC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGJzY2FuID0gZGJzY2FuOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKdmFyIF9wdWJNZXRob2RzID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3B1Yk1ldGhvZHMiKSk7CmZ1bmN0aW9uIGRic2NhbihkYXRhLCBlcHMsIG1pblB0cykgewogIC8vIOafpeaJvumCu+Wfn+eahOi+heWKqeWHveaVsAogIGZ1bmN0aW9uIHJlZ2lvblF1ZXJ5KGRhdGEsIHBvaW50LCBlcHMpIHsKICAgIHZhciBuZWlnaGJvcnMgPSBbXTsKICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAocCwgaW5kZXgpIHsKICAgICAgaWYgKCgwLCBfcHViTWV0aG9kcy5kZWZhdWx0KShwb2ludCwgcCkgPD0gZXBzICogMTAwMCkgewogICAgICAgIC8vIOWwhiBlcHMg6L2s5o2i5Li657GzCiAgICAgICAgbmVpZ2hib3JzLnB1c2goaW5kZXgpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBuZWlnaGJvcnM7CiAgfQogIHZhciBudW0gPSBkYXRhLmxlbmd0aDsKICB2YXIgdW52aXNpdGVkID0gQXJyYXkuZnJvbSh7CiAgICBsZW5ndGg6IG51bQogIH0sIGZ1bmN0aW9uIChfLCBpKSB7CiAgICByZXR1cm4gaTsKICB9KTsKICB2YXIgdmlzaXRlZCA9IFtdOwogIHZhciBDID0gQXJyYXkobnVtKS5maWxsKC0xKTsKICB2YXIgY29yZVBvaW50cyA9IFtdOwogIHZhciBrID0gLTE7CiAgd2hpbGUgKHVudmlzaXRlZC5sZW5ndGggPiAwKSB7CiAgICAvLyDpu5jorqTlj5bmnKrorr/pl67nmoTnrKzkuIDkuKrngrkKICAgIHZhciBwID0gdW52aXNpdGVkLnNoaWZ0KCk7CiAgICB2aXNpdGVkLnB1c2gocCk7CiAgICB2YXIgTiA9IHJlZ2lvblF1ZXJ5KGRhdGEsIGRhdGFbcF0sIGVwcyk7CiAgICBpZiAoTi5sZW5ndGggPj0gbWluUHRzKSB7CiAgICAgIGsgKz0gMTsKICAgICAgQ1twXSA9IGs7CiAgICAgIGNvcmVQb2ludHMucHVzaChkYXRhW3BdKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBOLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIHBpID0gTltpXTsKICAgICAgICBpZiAodW52aXNpdGVkLmluY2x1ZGVzKHBpKSkgewogICAgICAgICAgdW52aXNpdGVkLnNwbGljZSh1bnZpc2l0ZWQuaW5kZXhPZihwaSksIDEpOwogICAgICAgICAgdmlzaXRlZC5wdXNoKHBpKTsKICAgICAgICAgIHZhciBNID0gcmVnaW9uUXVlcnkoZGF0YSwgZGF0YVtwaV0sIGVwcyk7CiAgICAgICAgICBpZiAoTS5sZW5ndGggPj0gbWluUHRzKSB7CiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgTS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIHZhciB0ID0gTVtqXTsKICAgICAgICAgICAgICBpZiAoIU4uaW5jbHVkZXModCkpIHsKICAgICAgICAgICAgICAgIE4ucHVzaCh0KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKENbcGldID09PSAtMSkgewogICAgICAgICAgQ1twaV0gPSBrOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgQ1twXSA9IC0xOwogICAgfQogIH0KICByZXR1cm4gY29yZVBvaW50czsKfQ=="},{"version":3,"names":["_pubMethods","_interopRequireDefault","require","dbscan","data","eps","minPts","regionQuery","point","neighbors","forEach","p","index","calculateDistance","push","num","length","unvisited","Array","from","_","i","visited","C","fill","corePoints","k","shift","N","pi","includes","splice","indexOf","M","j","t"],"sources":["E:/workspacevsCode/web-ui-travel/src/views/AMyWork/tools/algo/dbscan.js"],"sourcesContent":["import calculateDistance from './pubMethods'\r\n\r\nexport function dbscan(data, eps, minPts) {\r\n    // 查找邻域的辅助函数\r\n    function regionQuery(data, point, eps) {\r\n        const neighbors = [];\r\n        data.forEach((p, index) => {\r\n            if (calculateDistance(point, p) <= eps * 1000) { // 将 eps 转换为米\r\n                neighbors.push(index);\r\n            }\r\n        });\r\n        return neighbors;\r\n    }\r\n\r\n    const num = data.length;\r\n    const unvisited = Array.from({ length: num }, (_, i) => i);\r\n    const visited = [];\r\n    const C = Array(num).fill(-1);\r\n    const corePoints = [];\r\n    let k = -1;\r\n\r\n    while (unvisited.length > 0) {\r\n        // 默认取未访问的第一个点\r\n        const p = unvisited.shift();\r\n        visited.push(p);\r\n\r\n        const N = regionQuery(data, data[p], eps);\r\n\r\n        if (N.length >= minPts) {\r\n            k += 1;\r\n            C[p] = k;\r\n            corePoints.push(data[p]);\r\n\r\n            for (let i = 0; i < N.length; i++) {\r\n                const pi = N[i];\r\n                if (unvisited.includes(pi)) {\r\n                    unvisited.splice(unvisited.indexOf(pi), 1);\r\n                    visited.push(pi);\r\n\r\n                    const M = regionQuery(data, data[pi], eps);\r\n                    if (M.length >= minPts) {\r\n                        for (let j = 0; j < M.length; j++) {\r\n                            const t = M[j];\r\n                            if (!N.includes(t)) {\r\n                                N.push(t);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (C[pi] === -1) {\r\n                    C[pi] = k;\r\n                }\r\n            }\r\n        } else {\r\n            C[p] = -1;\r\n        }\r\n    }\r\n\r\n    return corePoints;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAAA,WAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEO,SAASC,MAAMA,CAACC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAE;EACtC;EACA,SAASC,WAAWA,CAACH,IAAI,EAAEI,KAAK,EAAEH,GAAG,EAAE;IACnC,IAAMI,SAAS,GAAG,EAAE;IACpBL,IAAI,CAACM,OAAO,CAAC,UAACC,CAAC,EAAEC,KAAK,EAAK;MACvB,IAAI,IAAAC,mBAAiB,EAACL,KAAK,EAAEG,CAAC,CAAC,IAAIN,GAAG,GAAG,IAAI,EAAE;QAAE;QAC7CI,SAAS,CAACK,IAAI,CAACF,KAAK,CAAC;MACzB;IACJ,CAAC,CAAC;IACF,OAAOH,SAAS;EACpB;EAEA,IAAMM,GAAG,GAAGX,IAAI,CAACY,MAAM;EACvB,IAAMC,SAAS,GAAGC,KAAK,CAACC,IAAI,CAAC;IAAEH,MAAM,EAAED;EAAI,CAAC,EAAE,UAACK,CAAC,EAAEC,CAAC;IAAA,OAAKA,CAAC;EAAA,EAAC;EAC1D,IAAMC,OAAO,GAAG,EAAE;EAClB,IAAMC,CAAC,GAAGL,KAAK,CAACH,GAAG,CAAC,CAACS,IAAI,CAAC,CAAC,CAAC,CAAC;EAC7B,IAAMC,UAAU,GAAG,EAAE;EACrB,IAAIC,CAAC,GAAG,CAAC,CAAC;EAEV,OAAOT,SAAS,CAACD,MAAM,GAAG,CAAC,EAAE;IACzB;IACA,IAAML,CAAC,GAAGM,SAAS,CAACU,KAAK,CAAC,CAAC;IAC3BL,OAAO,CAACR,IAAI,CAACH,CAAC,CAAC;IAEf,IAAMiB,CAAC,GAAGrB,WAAW,CAACH,IAAI,EAAEA,IAAI,CAACO,CAAC,CAAC,EAAEN,GAAG,CAAC;IAEzC,IAAIuB,CAAC,CAACZ,MAAM,IAAIV,MAAM,EAAE;MACpBoB,CAAC,IAAI,CAAC;MACNH,CAAC,CAACZ,CAAC,CAAC,GAAGe,CAAC;MACRD,UAAU,CAACX,IAAI,CAACV,IAAI,CAACO,CAAC,CAAC,CAAC;MAExB,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGO,CAAC,CAACZ,MAAM,EAAEK,CAAC,EAAE,EAAE;QAC/B,IAAMQ,EAAE,GAAGD,CAAC,CAACP,CAAC,CAAC;QACf,IAAIJ,SAAS,CAACa,QAAQ,CAACD,EAAE,CAAC,EAAE;UACxBZ,SAAS,CAACc,MAAM,CAACd,SAAS,CAACe,OAAO,CAACH,EAAE,CAAC,EAAE,CAAC,CAAC;UAC1CP,OAAO,CAACR,IAAI,CAACe,EAAE,CAAC;UAEhB,IAAMI,CAAC,GAAG1B,WAAW,CAACH,IAAI,EAAEA,IAAI,CAACyB,EAAE,CAAC,EAAExB,GAAG,CAAC;UAC1C,IAAI4B,CAAC,CAACjB,MAAM,IAAIV,MAAM,EAAE;YACpB,KAAK,IAAI4B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,CAAC,CAACjB,MAAM,EAAEkB,CAAC,EAAE,EAAE;cAC/B,IAAMC,CAAC,GAAGF,CAAC,CAACC,CAAC,CAAC;cACd,IAAI,CAACN,CAAC,CAACE,QAAQ,CAACK,CAAC,CAAC,EAAE;gBAChBP,CAAC,CAACd,IAAI,CAACqB,CAAC,CAAC;cACb;YACJ;UACJ;QACJ;QACA,IAAIZ,CAAC,CAACM,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;UACdN,CAAC,CAACM,EAAE,CAAC,GAAGH,CAAC;QACb;MACJ;IACJ,CAAC,MAAM;MACHH,CAAC,CAACZ,CAAC,CAAC,GAAG,CAAC,CAAC;IACb;EACJ;EAEA,OAAOc,UAAU;AACrB","ignoreList":[]}]}