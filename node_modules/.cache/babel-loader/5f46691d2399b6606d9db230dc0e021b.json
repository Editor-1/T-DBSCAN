{"remainingRequest":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js!E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\optics.js","dependencies":[{"path":"E:\\workspacevsCode\\web-ui-travel\\src\\views\\AMyWork\\tools\\algo\\optics.js","mtime":1722255535775},{"path":"E:\\workspacevsCode\\web-ui-travel\\babel.config.js","mtime":1677117676000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\workspacevsCode\\web-ui-travel\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1720856214296}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLm9wdGljcyA9IG9wdGljczsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbGwuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyIpOwpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc2V0LmpzIik7CnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiKTsKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiKTsKZnVuY3Rpb24gb3B0aWNzKGRhdGEsIGVwcywgbWluUHRzKSB7CiAgLy8g6K6h566X5Lik54K56Ze05qyn5rCP6Led56a755qE6L6F5Yqp5Ye95pWwCiAgZnVuY3Rpb24gY2FsY3VsYXRlRGlzdGFuY2UocG9pbnQxLCBwb2ludDIpIHsKICAgIHZhciBsYXQxID0gcGFyc2VGbG9hdChwb2ludDEubGF0KTsKICAgIHZhciBsbmcxID0gcGFyc2VGbG9hdChwb2ludDEubG5nKTsKICAgIHZhciBsYXQyID0gcGFyc2VGbG9hdChwb2ludDIubGF0KTsKICAgIHZhciBsbmcyID0gcGFyc2VGbG9hdChwb2ludDIubG5nKTsKICAgIHZhciByYWRMYXQxID0gbGF0MSAqIE1hdGguUEkgLyAxODAuMDsKICAgIHZhciByYWRMYXQyID0gbGF0MiAqIE1hdGguUEkgLyAxODAuMDsKICAgIHZhciBhID0gcmFkTGF0MSAtIHJhZExhdDI7CiAgICB2YXIgYiA9IGxuZzEgKiBNYXRoLlBJIC8gMTgwLjAgLSBsbmcyICogTWF0aC5QSSAvIDE4MC4wOwogICAgdmFyIHMgPSAyICogTWF0aC5hc2luKE1hdGguc3FydChNYXRoLnBvdyhNYXRoLnNpbihhIC8gMiksIDIpICsgTWF0aC5jb3MocmFkTGF0MSkgKiBNYXRoLmNvcyhyYWRMYXQyKSAqIE1hdGgucG93KE1hdGguc2luKGIgLyAyKSwgMikpKTsKICAgIHJldHVybiBzICogNjM3MDk5Ni44MTsgLy8g6L+U5Zue6Led56a75Y2V5L2N5Li657GzCiAgfQoKICAvLyDmn6Xmib7pgrvln5/nmoTovoXliqnlh73mlbAKICBmdW5jdGlvbiByZWdpb25RdWVyeShkYXRhLCBwb2ludCwgZXBzKSB7CiAgICB2YXIgbmVpZ2hib3JzID0gW107CiAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHAsIGluZGV4KSB7CiAgICAgIGlmIChjYWxjdWxhdGVEaXN0YW5jZShwb2ludCwgcCkgPD0gZXBzICogMTAwMCkgewogICAgICAgIC8vIOWwhiBlcHMg6L2s5o2i5Li657GzCiAgICAgICAgbmVpZ2hib3JzLnB1c2goaW5kZXgpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBuZWlnaGJvcnM7CiAgfQoKICAvLyDorqHnrpfmoLjlv4Pot53nprvnmoTovoXliqnlh73mlbAKICBmdW5jdGlvbiBjb3JlRGlzdGFuY2UocG9pbnQsIG5laWdoYm9ycywgbWluUHRzKSB7CiAgICBpZiAobmVpZ2hib3JzLmxlbmd0aCA+PSBtaW5QdHMpIHsKICAgICAgdmFyIHNvcnRlZERpc3RhbmNlcyA9IG5laWdoYm9ycy5tYXAoZnVuY3Rpb24gKGluZGV4KSB7CiAgICAgICAgcmV0dXJuIGNhbGN1bGF0ZURpc3RhbmNlKHBvaW50LCBkYXRhW2luZGV4XSk7CiAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICByZXR1cm4gYSAtIGI7CiAgICAgIH0pOwogICAgICByZXR1cm4gc29ydGVkRGlzdGFuY2VzW21pblB0cyAtIDFdOwogICAgfQogICAgcmV0dXJuIG51bGw7CiAgfQogIHZhciBudW0gPSBkYXRhLmxlbmd0aDsKICB2YXIgY29yZVBvaW50cyA9IFtdOwogIHZhciB2aXNpdGVkID0gQXJyYXkobnVtKS5maWxsKGZhbHNlKTsKCiAgLy8g5omp5bGV57CH55qE6L6F5Yqp5Ye95pWwCiAgZnVuY3Rpb24gcHJvY2Vzc1BvaW50KHBvaW50SW5kZXgpIHsKICAgIHZhciBuZWlnaGJvcnMgPSByZWdpb25RdWVyeShkYXRhLCBkYXRhW3BvaW50SW5kZXhdLCBlcHMpOwogICAgaWYgKG5laWdoYm9ycy5sZW5ndGggPj0gbWluUHRzKSB7CiAgICAgIHZhciBjb3JlRGlzdCA9IGNvcmVEaXN0YW5jZShkYXRhW3BvaW50SW5kZXhdLCBuZWlnaGJvcnMsIG1pblB0cyk7CiAgICAgIGlmIChjb3JlRGlzdCAhPT0gbnVsbCkgewogICAgICAgIGNvcmVQb2ludHMucHVzaChkYXRhW3BvaW50SW5kZXhdKTsKICAgICAgfQogICAgICB2YXIgc2VlZHMgPSBuZXcgU2V0KG5laWdoYm9ycyk7CiAgICAgIHNlZWRzLmRlbGV0ZShwb2ludEluZGV4KTsKICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgdmFyIGN1cnJlbnQgPSBzZWVkcy52YWx1ZXMoKS5uZXh0KCkudmFsdWU7CiAgICAgICAgc2VlZHMuZGVsZXRlKGN1cnJlbnQpOwogICAgICAgIGlmICghdmlzaXRlZFtjdXJyZW50XSkgewogICAgICAgICAgdmlzaXRlZFtjdXJyZW50XSA9IHRydWU7CiAgICAgICAgICB2YXIgY3VycmVudE5laWdoYm9ycyA9IHJlZ2lvblF1ZXJ5KGRhdGEsIGRhdGFbY3VycmVudF0sIGVwcyk7CiAgICAgICAgICBpZiAoY3VycmVudE5laWdoYm9ycy5sZW5ndGggPj0gbWluUHRzKSB7CiAgICAgICAgICAgIHZhciBjdXJyZW50Q29yZURpc3QgPSBjb3JlRGlzdGFuY2UoZGF0YVtjdXJyZW50XSwgY3VycmVudE5laWdoYm9ycywgbWluUHRzKTsKICAgICAgICAgICAgaWYgKGN1cnJlbnRDb3JlRGlzdCAhPT0gbnVsbCkgewogICAgICAgICAgICAgIGNvcmVQb2ludHMucHVzaChkYXRhW2N1cnJlbnRdKTsKICAgICAgICAgICAgICBjdXJyZW50TmVpZ2hib3JzLmZvckVhY2goZnVuY3Rpb24gKG5laWdoYm9yKSB7CiAgICAgICAgICAgICAgICBpZiAoIXZpc2l0ZWRbbmVpZ2hib3JdKSB7CiAgICAgICAgICAgICAgICAgIGlmIChjYWxjdWxhdGVEaXN0YW5jZShkYXRhW2N1cnJlbnRdLCBkYXRhW25laWdoYm9yXSkgPD0gZXBzICogMTAwMCkgewogICAgICAgICAgICAgICAgICAgIHNlZWRzLmFkZChuZWlnaGJvcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfTsKICAgICAgd2hpbGUgKHNlZWRzLnNpemUgPiAwKSB7CiAgICAgICAgX2xvb3AoKTsKICAgICAgfQogICAgfQogIH0KICBmb3IgKHZhciBpID0gMDsgaSA8IG51bTsgaSsrKSB7CiAgICBpZiAoIXZpc2l0ZWRbaV0pIHsKICAgICAgdmlzaXRlZFtpXSA9IHRydWU7CiAgICAgIHByb2Nlc3NQb2ludChpKTsKICAgIH0KICB9CiAgcmV0dXJuIGNvcmVQb2ludHM7Cn0="},{"version":3,"names":["optics","data","eps","minPts","calculateDistance","point1","point2","lat1","parseFloat","lat","lng1","lng","lat2","lng2","radLat1","Math","PI","radLat2","a","b","s","asin","sqrt","pow","sin","cos","regionQuery","point","neighbors","forEach","p","index","push","coreDistance","length","sortedDistances","map","sort","num","corePoints","visited","Array","fill","processPoint","pointIndex","coreDist","seeds","Set","delete","_loop","current","values","next","value","currentNeighbors","currentCoreDist","neighbor","add","size","i"],"sources":["E:/workspacevsCode/web-ui-travel/src/views/AMyWork/tools/algo/optics.js"],"sourcesContent":["export function optics(data, eps, minPts) {\r\n    // 计算两点间欧氏距离的辅助函数\r\n    function calculateDistance(point1, point2) {\r\n        const lat1 = parseFloat(point1.lat);\r\n        const lng1 = parseFloat(point1.lng);\r\n        const lat2 = parseFloat(point2.lat);\r\n        const lng2 = parseFloat(point2.lng);\r\n\r\n        const radLat1 = lat1 * Math.PI / 180.0;\r\n        const radLat2 = lat2 * Math.PI / 180.0;\r\n        const a = radLat1 - radLat2;\r\n        const b = (lng1 * Math.PI / 180.0) - (lng2 * Math.PI / 180.0);\r\n        const s = 2 * Math.asin(Math.sqrt(Math.pow(Math.sin(a / 2), 2) +\r\n            Math.cos(radLat1) * Math.cos(radLat2) * Math.pow(Math.sin(b / 2), 2)));\r\n        return s * 6370996.81; // 返回距离单位为米\r\n    }\r\n\r\n    // 查找邻域的辅助函数\r\n    function regionQuery(data, point, eps) {\r\n        const neighbors = [];\r\n        data.forEach((p, index) => {\r\n            if (calculateDistance(point, p) <= eps * 1000) { // 将 eps 转换为米\r\n                neighbors.push(index);\r\n            }\r\n        });\r\n        return neighbors;\r\n    }\r\n\r\n    // 计算核心距离的辅助函数\r\n    function coreDistance(point, neighbors, minPts) {\r\n        if (neighbors.length >= minPts) {\r\n            const sortedDistances = neighbors\r\n                .map(index => calculateDistance(point, data[index]))\r\n                .sort((a, b) => a - b);\r\n            return sortedDistances[minPts - 1];\r\n        }\r\n        return null;\r\n    }\r\n\r\n    const num = data.length;\r\n    const corePoints = [];\r\n    const visited = Array(num).fill(false);\r\n\r\n    // 扩展簇的辅助函数\r\n    function processPoint(pointIndex) {\r\n        const neighbors = regionQuery(data, data[pointIndex], eps);\r\n\r\n        if (neighbors.length >= minPts) {\r\n            const coreDist = coreDistance(data[pointIndex], neighbors, minPts);\r\n            if (coreDist !== null) {\r\n                corePoints.push(data[pointIndex]);\r\n            }\r\n\r\n            const seeds = new Set(neighbors);\r\n            seeds.delete(pointIndex);\r\n\r\n            while (seeds.size > 0) {\r\n                const current = seeds.values().next().value;\r\n                seeds.delete(current);\r\n\r\n                if (!visited[current]) {\r\n                    visited[current] = true;\r\n                    const currentNeighbors = regionQuery(data, data[current], eps);\r\n\r\n                    if (currentNeighbors.length >= minPts) {\r\n                        const currentCoreDist = coreDistance(data[current], currentNeighbors, minPts);\r\n                        if (currentCoreDist !== null) {\r\n                            corePoints.push(data[current]);\r\n                            currentNeighbors.forEach(neighbor => {\r\n                                if (!visited[neighbor]) {\r\n                                    if (calculateDistance(data[current], data[neighbor]) <= eps * 1000) {\r\n                                        seeds.add(neighbor);\r\n                                    }\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < num; i++) {\r\n        if (!visited[i]) {\r\n            visited[i] = true;\r\n            processPoint(i);\r\n        }\r\n    }\r\n\r\n    return corePoints;\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;AAAO,SAASA,MAAMA,CAACC,IAAI,EAAEC,GAAG,EAAEC,MAAM,EAAE;EACtC;EACA,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,MAAM,EAAE;IACvC,IAAMC,IAAI,GAAGC,UAAU,CAACH,MAAM,CAACI,GAAG,CAAC;IACnC,IAAMC,IAAI,GAAGF,UAAU,CAACH,MAAM,CAACM,GAAG,CAAC;IACnC,IAAMC,IAAI,GAAGJ,UAAU,CAACF,MAAM,CAACG,GAAG,CAAC;IACnC,IAAMI,IAAI,GAAGL,UAAU,CAACF,MAAM,CAACK,GAAG,CAAC;IAEnC,IAAMG,OAAO,GAAGP,IAAI,GAAGQ,IAAI,CAACC,EAAE,GAAG,KAAK;IACtC,IAAMC,OAAO,GAAGL,IAAI,GAAGG,IAAI,CAACC,EAAE,GAAG,KAAK;IACtC,IAAME,CAAC,GAAGJ,OAAO,GAAGG,OAAO;IAC3B,IAAME,CAAC,GAAIT,IAAI,GAAGK,IAAI,CAACC,EAAE,GAAG,KAAK,GAAKH,IAAI,GAAGE,IAAI,CAACC,EAAE,GAAG,KAAM;IAC7D,IAAMI,CAAC,GAAG,CAAC,GAAGL,IAAI,CAACM,IAAI,CAACN,IAAI,CAACO,IAAI,CAACP,IAAI,CAACQ,GAAG,CAACR,IAAI,CAACS,GAAG,CAACN,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAC1DH,IAAI,CAACU,GAAG,CAACX,OAAO,CAAC,GAAGC,IAAI,CAACU,GAAG,CAACR,OAAO,CAAC,GAAGF,IAAI,CAACQ,GAAG,CAACR,IAAI,CAACS,GAAG,CAACL,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC1E,OAAOC,CAAC,GAAG,UAAU,CAAC,CAAC;EAC3B;;EAEA;EACA,SAASM,WAAWA,CAACzB,IAAI,EAAE0B,KAAK,EAAEzB,GAAG,EAAE;IACnC,IAAM0B,SAAS,GAAG,EAAE;IACpB3B,IAAI,CAAC4B,OAAO,CAAC,UAACC,CAAC,EAAEC,KAAK,EAAK;MACvB,IAAI3B,iBAAiB,CAACuB,KAAK,EAAEG,CAAC,CAAC,IAAI5B,GAAG,GAAG,IAAI,EAAE;QAAE;QAC7C0B,SAAS,CAACI,IAAI,CAACD,KAAK,CAAC;MACzB;IACJ,CAAC,CAAC;IACF,OAAOH,SAAS;EACpB;;EAEA;EACA,SAASK,YAAYA,CAACN,KAAK,EAAEC,SAAS,EAAEzB,MAAM,EAAE;IAC5C,IAAIyB,SAAS,CAACM,MAAM,IAAI/B,MAAM,EAAE;MAC5B,IAAMgC,eAAe,GAAGP,SAAS,CAC5BQ,GAAG,CAAC,UAAAL,KAAK;QAAA,OAAI3B,iBAAiB,CAACuB,KAAK,EAAE1B,IAAI,CAAC8B,KAAK,CAAC,CAAC;MAAA,EAAC,CACnDM,IAAI,CAAC,UAACnB,CAAC,EAAEC,CAAC;QAAA,OAAKD,CAAC,GAAGC,CAAC;MAAA,EAAC;MAC1B,OAAOgB,eAAe,CAAChC,MAAM,GAAG,CAAC,CAAC;IACtC;IACA,OAAO,IAAI;EACf;EAEA,IAAMmC,GAAG,GAAGrC,IAAI,CAACiC,MAAM;EACvB,IAAMK,UAAU,GAAG,EAAE;EACrB,IAAMC,OAAO,GAAGC,KAAK,CAACH,GAAG,CAAC,CAACI,IAAI,CAAC,KAAK,CAAC;;EAEtC;EACA,SAASC,YAAYA,CAACC,UAAU,EAAE;IAC9B,IAAMhB,SAAS,GAAGF,WAAW,CAACzB,IAAI,EAAEA,IAAI,CAAC2C,UAAU,CAAC,EAAE1C,GAAG,CAAC;IAE1D,IAAI0B,SAAS,CAACM,MAAM,IAAI/B,MAAM,EAAE;MAC5B,IAAM0C,QAAQ,GAAGZ,YAAY,CAAChC,IAAI,CAAC2C,UAAU,CAAC,EAAEhB,SAAS,EAAEzB,MAAM,CAAC;MAClE,IAAI0C,QAAQ,KAAK,IAAI,EAAE;QACnBN,UAAU,CAACP,IAAI,CAAC/B,IAAI,CAAC2C,UAAU,CAAC,CAAC;MACrC;MAEA,IAAME,KAAK,GAAG,IAAIC,GAAG,CAACnB,SAAS,CAAC;MAChCkB,KAAK,CAACE,MAAM,CAACJ,UAAU,CAAC;MAAC,IAAAK,KAAA,YAAAA,MAAA,EAEF;QACnB,IAAMC,OAAO,GAAGJ,KAAK,CAACK,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,KAAK;QAC3CP,KAAK,CAACE,MAAM,CAACE,OAAO,CAAC;QAErB,IAAI,CAACV,OAAO,CAACU,OAAO,CAAC,EAAE;UACnBV,OAAO,CAACU,OAAO,CAAC,GAAG,IAAI;UACvB,IAAMI,gBAAgB,GAAG5B,WAAW,CAACzB,IAAI,EAAEA,IAAI,CAACiD,OAAO,CAAC,EAAEhD,GAAG,CAAC;UAE9D,IAAIoD,gBAAgB,CAACpB,MAAM,IAAI/B,MAAM,EAAE;YACnC,IAAMoD,eAAe,GAAGtB,YAAY,CAAChC,IAAI,CAACiD,OAAO,CAAC,EAAEI,gBAAgB,EAAEnD,MAAM,CAAC;YAC7E,IAAIoD,eAAe,KAAK,IAAI,EAAE;cAC1BhB,UAAU,CAACP,IAAI,CAAC/B,IAAI,CAACiD,OAAO,CAAC,CAAC;cAC9BI,gBAAgB,CAACzB,OAAO,CAAC,UAAA2B,QAAQ,EAAI;gBACjC,IAAI,CAAChB,OAAO,CAACgB,QAAQ,CAAC,EAAE;kBACpB,IAAIpD,iBAAiB,CAACH,IAAI,CAACiD,OAAO,CAAC,EAAEjD,IAAI,CAACuD,QAAQ,CAAC,CAAC,IAAItD,GAAG,GAAG,IAAI,EAAE;oBAChE4C,KAAK,CAACW,GAAG,CAACD,QAAQ,CAAC;kBACvB;gBACJ;cACJ,CAAC,CAAC;YACN;UACJ;QACJ;MACJ,CAAC;MAtBD,OAAOV,KAAK,CAACY,IAAI,GAAG,CAAC;QAAAT,KAAA;MAAA;IAuBzB;EACJ;EAEA,KAAK,IAAIU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrB,GAAG,EAAEqB,CAAC,EAAE,EAAE;IAC1B,IAAI,CAACnB,OAAO,CAACmB,CAAC,CAAC,EAAE;MACbnB,OAAO,CAACmB,CAAC,CAAC,GAAG,IAAI;MACjBhB,YAAY,CAACgB,CAAC,CAAC;IACnB;EACJ;EAEA,OAAOpB,UAAU;AACrB","ignoreList":[]}]}